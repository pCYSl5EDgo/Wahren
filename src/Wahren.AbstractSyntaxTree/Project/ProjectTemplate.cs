#nullable enable
// <auto-generated>
// THIS (.cs) FILE IS GENERATED BY T4. DO NOT CHANGE IT. CHANGE THE .tt FILE INSTEAD.
// </auto-generated>

namespace Wahren.AbstractSyntaxTree.Project;

using Parser;
using Statement;
using Statement.Expression;

public sealed partial class Project
{
	public ref Result TryGetPowerNode(uint queryFileId, ReadOnlySpan<char> name, out uint index)
    {
        ref var pair = ref Power.TryGetTrack(name, queryFileId);
        if (!Unsafe.IsNullRef(ref pair))
        {
            index = pair.Id;
            return ref Files[pair.FileId];
        }
        ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(name);
        if (!Unsafe.IsNullRef(ref track) && track.Kind == ReferenceKind.Power)
        {
            index = (uint)track.NodeIndex;
            return ref Files[track.ResultId];
        }

        index = 0;
        return ref Unsafe.NullRef<Result>();
    }

    public ref Result TryGetPowerNode(ReadOnlySpan<char> name, out uint index)
    {
        ref var pair = ref Power.TryGet(name, out _);
        if (!Unsafe.IsNullRef(ref pair))
        {
            index = pair.Id;
            return ref Files[pair.FileId];
        }
        ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(name);
        if (!Unsafe.IsNullRef(ref track) && track.Kind == ReferenceKind.Power)
        {
            index = (uint)track.NodeIndex;
            return ref Files[track.ResultId];
        }

        index = 0;
        return ref Unsafe.NullRef<Result>();
    }

	public ref Result TryGetClassNode(uint queryFileId, ReadOnlySpan<char> name, out uint index)
    {
        ref var pair = ref Class.TryGetTrack(name, queryFileId);
        if (!Unsafe.IsNullRef(ref pair))
        {
            index = pair.Id;
            return ref Files[pair.FileId];
        }
        ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(name);
        if (!Unsafe.IsNullRef(ref track) && track.Kind == ReferenceKind.Class)
        {
            index = (uint)track.NodeIndex;
            return ref Files[track.ResultId];
        }

        index = 0;
        return ref Unsafe.NullRef<Result>();
    }

    public ref Result TryGetClassNode(ReadOnlySpan<char> name, out uint index)
    {
        ref var pair = ref Class.TryGet(name, out _);
        if (!Unsafe.IsNullRef(ref pair))
        {
            index = pair.Id;
            return ref Files[pair.FileId];
        }
        ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(name);
        if (!Unsafe.IsNullRef(ref track) && track.Kind == ReferenceKind.Class)
        {
            index = (uint)track.NodeIndex;
            return ref Files[track.ResultId];
        }

        index = 0;
        return ref Unsafe.NullRef<Result>();
    }

	public ref Result TryGetDungeonNode(uint queryFileId, ReadOnlySpan<char> name, out uint index)
    {
        ref var pair = ref Dungeon.TryGetTrack(name, queryFileId);
        if (!Unsafe.IsNullRef(ref pair))
        {
            index = pair.Id;
            return ref Files[pair.FileId];
        }
        var files = Files.AsSpan();
        for (int i = 0; i < files.Length; ++i)
        {
            ref var file = ref files[i];
            ref var list = ref file.DungeonNodeList;
            uint end = (uint)list.Count;
            if (end == 0)
            {
                continue;
            }

            for (index = 0; index != end; ++index)
            {
                ref var node = ref list[index];
                if (name.SequenceEqual(file.GetSpan(node.Name)))
                {
                    Dungeon.TryRegisterTrack(name, ((uint)i, index), queryFileId);
                    return ref file;
                }
            }
        }

        index = 0;
        return ref Unsafe.NullRef<Result>();
    }

    public ref Result TryGetDungeonNode(ReadOnlySpan<char> name, out uint index)
    {
        ref var pair = ref Dungeon.TryGet(name, out _);
        if (!Unsafe.IsNullRef(ref pair))
        {
            index = pair.Id;
            return ref Files[pair.FileId];
        }
        var files = Files.AsSpan();
        for (int i = 0; i < files.Length; ++i)
        {
            ref var file = ref files[i];
            ref var list = ref file.DungeonNodeList;
            uint end = (uint)list.Count;
            if (end == 0)
            {
                continue;
            }

            for (index = 0; index != end; ++index)
            {
                ref var node = ref list[index];
                if (name.SequenceEqual(file.GetSpan(node.Name)))
                {
                    return ref file;
                }
            }
        }

        index = 0;
        return ref Unsafe.NullRef<Result>();
    }

	public ref Result TryGetFieldNode(uint queryFileId, ReadOnlySpan<char> name, out uint index)
    {
        ref var pair = ref Field.TryGetTrack(name, queryFileId);
        if (!Unsafe.IsNullRef(ref pair))
        {
            index = pair.Id;
            return ref Files[pair.FileId];
        }
        var files = Files.AsSpan();
        for (int i = 0; i < files.Length; ++i)
        {
            ref var file = ref files[i];
            ref var list = ref file.FieldNodeList;
            uint end = (uint)list.Count;
            if (end == 0)
            {
                continue;
            }

            for (index = 0; index != end; ++index)
            {
                ref var node = ref list[index];
                if (name.SequenceEqual(file.GetSpan(node.Name)))
                {
                    Field.TryRegisterTrack(name, ((uint)i, index), queryFileId);
                    return ref file;
                }
            }
        }

        index = 0;
        return ref Unsafe.NullRef<Result>();
    }

    public ref Result TryGetFieldNode(ReadOnlySpan<char> name, out uint index)
    {
        ref var pair = ref Field.TryGet(name, out _);
        if (!Unsafe.IsNullRef(ref pair))
        {
            index = pair.Id;
            return ref Files[pair.FileId];
        }
        var files = Files.AsSpan();
        for (int i = 0; i < files.Length; ++i)
        {
            ref var file = ref files[i];
            ref var list = ref file.FieldNodeList;
            uint end = (uint)list.Count;
            if (end == 0)
            {
                continue;
            }

            for (index = 0; index != end; ++index)
            {
                ref var node = ref list[index];
                if (name.SequenceEqual(file.GetSpan(node.Name)))
                {
                    return ref file;
                }
            }
        }

        index = 0;
        return ref Unsafe.NullRef<Result>();
    }

	public ref Result TryGetMovetypeNode(uint queryFileId, ReadOnlySpan<char> name, out uint index)
    {
        ref var pair = ref Movetype.TryGetTrack(name, queryFileId);
        if (!Unsafe.IsNullRef(ref pair))
        {
            index = pair.Id;
            return ref Files[pair.FileId];
        }
        var files = Files.AsSpan();
        for (int i = 0; i < files.Length; ++i)
        {
            ref var file = ref files[i];
            ref var list = ref file.MovetypeNodeList;
            uint end = (uint)list.Count;
            if (end == 0)
            {
                continue;
            }

            for (index = 0; index != end; ++index)
            {
                ref var node = ref list[index];
                if (name.SequenceEqual(file.GetSpan(node.Name)))
                {
                    Movetype.TryRegisterTrack(name, ((uint)i, index), queryFileId);
                    return ref file;
                }
            }
        }

        index = 0;
        return ref Unsafe.NullRef<Result>();
    }

    public ref Result TryGetMovetypeNode(ReadOnlySpan<char> name, out uint index)
    {
        ref var pair = ref Movetype.TryGet(name, out _);
        if (!Unsafe.IsNullRef(ref pair))
        {
            index = pair.Id;
            return ref Files[pair.FileId];
        }
        var files = Files.AsSpan();
        for (int i = 0; i < files.Length; ++i)
        {
            ref var file = ref files[i];
            ref var list = ref file.MovetypeNodeList;
            uint end = (uint)list.Count;
            if (end == 0)
            {
                continue;
            }

            for (index = 0; index != end; ++index)
            {
                ref var node = ref list[index];
                if (name.SequenceEqual(file.GetSpan(node.Name)))
                {
                    return ref file;
                }
            }
        }

        index = 0;
        return ref Unsafe.NullRef<Result>();
    }

	public ref Result TryGetObjectNode(uint queryFileId, ReadOnlySpan<char> name, out uint index)
    {
        ref var pair = ref Object.TryGetTrack(name, queryFileId);
        if (!Unsafe.IsNullRef(ref pair))
        {
            index = pair.Id;
            return ref Files[pair.FileId];
        }
        var files = Files.AsSpan();
        for (int i = 0; i < files.Length; ++i)
        {
            ref var file = ref files[i];
            ref var list = ref file.ObjectNodeList;
            uint end = (uint)list.Count;
            if (end == 0)
            {
                continue;
            }

            for (index = 0; index != end; ++index)
            {
                ref var node = ref list[index];
                if (name.SequenceEqual(file.GetSpan(node.Name)))
                {
                    Object.TryRegisterTrack(name, ((uint)i, index), queryFileId);
                    return ref file;
                }
            }
        }

        index = 0;
        return ref Unsafe.NullRef<Result>();
    }

    public ref Result TryGetObjectNode(ReadOnlySpan<char> name, out uint index)
    {
        ref var pair = ref Object.TryGet(name, out _);
        if (!Unsafe.IsNullRef(ref pair))
        {
            index = pair.Id;
            return ref Files[pair.FileId];
        }
        var files = Files.AsSpan();
        for (int i = 0; i < files.Length; ++i)
        {
            ref var file = ref files[i];
            ref var list = ref file.ObjectNodeList;
            uint end = (uint)list.Count;
            if (end == 0)
            {
                continue;
            }

            for (index = 0; index != end; ++index)
            {
                ref var node = ref list[index];
                if (name.SequenceEqual(file.GetSpan(node.Name)))
                {
                    return ref file;
                }
            }
        }

        index = 0;
        return ref Unsafe.NullRef<Result>();
    }

	public ref Result TryGetRaceNode(uint queryFileId, ReadOnlySpan<char> name, out uint index)
    {
        ref var pair = ref Race.TryGetTrack(name, queryFileId);
        if (!Unsafe.IsNullRef(ref pair))
        {
            index = pair.Id;
            return ref Files[pair.FileId];
        }
        ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(name);
        if (!Unsafe.IsNullRef(ref track) && track.Kind == ReferenceKind.Race)
        {
            index = (uint)track.NodeIndex;
            return ref Files[track.ResultId];
        }

        index = 0;
        return ref Unsafe.NullRef<Result>();
    }

    public ref Result TryGetRaceNode(ReadOnlySpan<char> name, out uint index)
    {
        ref var pair = ref Race.TryGet(name, out _);
        if (!Unsafe.IsNullRef(ref pair))
        {
            index = pair.Id;
            return ref Files[pair.FileId];
        }
        ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(name);
        if (!Unsafe.IsNullRef(ref track) && track.Kind == ReferenceKind.Race)
        {
            index = (uint)track.NodeIndex;
            return ref Files[track.ResultId];
        }

        index = 0;
        return ref Unsafe.NullRef<Result>();
    }

	public ref Result TryGetSkillNode(uint queryFileId, ReadOnlySpan<char> name, out uint index)
    {
        ref var pair = ref Skill.TryGetTrack(name, queryFileId);
        if (!Unsafe.IsNullRef(ref pair))
        {
            index = pair.Id;
            return ref Files[pair.FileId];
        }
        ref var track = ref AmbiguousDictionary_SkillSkillset.TryGet(name);
        if (!Unsafe.IsNullRef(ref track) && track.Kind == ReferenceKind.Skill)
        {
            index = (uint)track.NodeIndex;
            return ref Files[track.ResultId];
        }

        index = 0;
        return ref Unsafe.NullRef<Result>();
    }

    public ref Result TryGetSkillNode(ReadOnlySpan<char> name, out uint index)
    {
        ref var pair = ref Skill.TryGet(name, out _);
        if (!Unsafe.IsNullRef(ref pair))
        {
            index = pair.Id;
            return ref Files[pair.FileId];
        }
        ref var track = ref AmbiguousDictionary_SkillSkillset.TryGet(name);
        if (!Unsafe.IsNullRef(ref track) && track.Kind == ReferenceKind.Skill)
        {
            index = (uint)track.NodeIndex;
            return ref Files[track.ResultId];
        }

        index = 0;
        return ref Unsafe.NullRef<Result>();
    }

	public ref Result TryGetSkillsetNode(uint queryFileId, ReadOnlySpan<char> name, out uint index)
    {
        ref var pair = ref Skillset.TryGetTrack(name, queryFileId);
        if (!Unsafe.IsNullRef(ref pair))
        {
            index = pair.Id;
            return ref Files[pair.FileId];
        }
        ref var track = ref AmbiguousDictionary_SkillSkillset.TryGet(name);
        if (!Unsafe.IsNullRef(ref track) && track.Kind == ReferenceKind.Skillset)
        {
            index = (uint)track.NodeIndex;
            return ref Files[track.ResultId];
        }

        index = 0;
        return ref Unsafe.NullRef<Result>();
    }

    public ref Result TryGetSkillsetNode(ReadOnlySpan<char> name, out uint index)
    {
        ref var pair = ref Skillset.TryGet(name, out _);
        if (!Unsafe.IsNullRef(ref pair))
        {
            index = pair.Id;
            return ref Files[pair.FileId];
        }
        ref var track = ref AmbiguousDictionary_SkillSkillset.TryGet(name);
        if (!Unsafe.IsNullRef(ref track) && track.Kind == ReferenceKind.Skillset)
        {
            index = (uint)track.NodeIndex;
            return ref Files[track.ResultId];
        }

        index = 0;
        return ref Unsafe.NullRef<Result>();
    }

	public ref Result TryGetSpotNode(uint queryFileId, ReadOnlySpan<char> name, out uint index)
    {
        ref var pair = ref Spot.TryGetTrack(name, queryFileId);
        if (!Unsafe.IsNullRef(ref pair))
        {
            index = pair.Id;
            return ref Files[pair.FileId];
        }
        ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(name);
        if (!Unsafe.IsNullRef(ref track) && track.Kind == ReferenceKind.Spot)
        {
            index = (uint)track.NodeIndex;
            return ref Files[track.ResultId];
        }

        index = 0;
        return ref Unsafe.NullRef<Result>();
    }

    public ref Result TryGetSpotNode(ReadOnlySpan<char> name, out uint index)
    {
        ref var pair = ref Spot.TryGet(name, out _);
        if (!Unsafe.IsNullRef(ref pair))
        {
            index = pair.Id;
            return ref Files[pair.FileId];
        }
        ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(name);
        if (!Unsafe.IsNullRef(ref track) && track.Kind == ReferenceKind.Spot)
        {
            index = (uint)track.NodeIndex;
            return ref Files[track.ResultId];
        }

        index = 0;
        return ref Unsafe.NullRef<Result>();
    }

	public ref Result TryGetUnitNode(uint queryFileId, ReadOnlySpan<char> name, out uint index)
    {
        ref var pair = ref Unit.TryGetTrack(name, queryFileId);
        if (!Unsafe.IsNullRef(ref pair))
        {
            index = pair.Id;
            return ref Files[pair.FileId];
        }
        ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(name);
        if (!Unsafe.IsNullRef(ref track) && track.Kind == ReferenceKind.Unit)
        {
            index = (uint)track.NodeIndex;
            return ref Files[track.ResultId];
        }

        index = 0;
        return ref Unsafe.NullRef<Result>();
    }

    public ref Result TryGetUnitNode(ReadOnlySpan<char> name, out uint index)
    {
        ref var pair = ref Unit.TryGet(name, out _);
        if (!Unsafe.IsNullRef(ref pair))
        {
            index = pair.Id;
            return ref Files[pair.FileId];
        }
        ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(name);
        if (!Unsafe.IsNullRef(ref track) && track.Kind == ReferenceKind.Unit)
        {
            index = (uint)track.NodeIndex;
            return ref Files[track.ResultId];
        }

        index = 0;
        return ref Unsafe.NullRef<Result>();
    }

	public ref Result TryGetVoiceNode(uint queryFileId, ReadOnlySpan<char> name, out uint index)
    {
        ref var pair = ref Voice.TryGetTrack(name, queryFileId);
        if (!Unsafe.IsNullRef(ref pair))
        {
            index = pair.Id;
            return ref Files[pair.FileId];
        }
        var files = Files.AsSpan();
        for (int i = 0; i < files.Length; ++i)
        {
            ref var file = ref files[i];
            ref var list = ref file.VoiceNodeList;
            uint end = (uint)list.Count;
            if (end == 0)
            {
                continue;
            }

            for (index = 0; index != end; ++index)
            {
                ref var node = ref list[index];
                if (name.SequenceEqual(file.GetSpan(node.Name)))
                {
                    Voice.TryRegisterTrack(name, ((uint)i, index), queryFileId);
                    return ref file;
                }
            }
        }

        index = 0;
        return ref Unsafe.NullRef<Result>();
    }

    public ref Result TryGetVoiceNode(ReadOnlySpan<char> name, out uint index)
    {
        ref var pair = ref Voice.TryGet(name, out _);
        if (!Unsafe.IsNullRef(ref pair))
        {
            index = pair.Id;
            return ref Files[pair.FileId];
        }
        var files = Files.AsSpan();
        for (int i = 0; i < files.Length; ++i)
        {
            ref var file = ref files[i];
            ref var list = ref file.VoiceNodeList;
            uint end = (uint)list.Count;
            if (end == 0)
            {
                continue;
            }

            for (index = 0; index != end; ++index)
            {
                ref var node = ref list[index];
                if (name.SequenceEqual(file.GetSpan(node.Name)))
                {
                    return ref file;
                }
            }
        }

        index = 0;
        return ref Unsafe.NullRef<Result>();
    }

	public ref Result TryGetScenarioNode(uint queryFileId, ReadOnlySpan<char> name, out uint index)
    {
        ref var pair = ref Scenario.TryGetTrack(name, queryFileId);
        if (!Unsafe.IsNullRef(ref pair))
        {
            index = pair.Id;
            return ref Files[pair.FileId];
        }
        var files = Files.AsSpan();
        for (int i = 0; i < files.Length; ++i)
        {
            ref var file = ref files[i];
            ref var list = ref file.ScenarioNodeList;
            uint end = (uint)list.Count;
            if (end == 0)
            {
                continue;
            }

            for (index = 0; index != end; ++index)
            {
                ref var node = ref list[index];
                if (name.SequenceEqual(file.GetSpan(node.Name)))
                {
                    Scenario.TryRegisterTrack(name, ((uint)i, index), queryFileId);
                    return ref file;
                }
            }
        }

        index = 0;
        return ref Unsafe.NullRef<Result>();
    }

    public ref Result TryGetScenarioNode(ReadOnlySpan<char> name, out uint index)
    {
        ref var pair = ref Scenario.TryGet(name, out _);
        if (!Unsafe.IsNullRef(ref pair))
        {
            index = pair.Id;
            return ref Files[pair.FileId];
        }
        var files = Files.AsSpan();
        for (int i = 0; i < files.Length; ++i)
        {
            ref var file = ref files[i];
            ref var list = ref file.ScenarioNodeList;
            uint end = (uint)list.Count;
            if (end == 0)
            {
                continue;
            }

            for (index = 0; index != end; ++index)
            {
                ref var node = ref list[index];
                if (name.SequenceEqual(file.GetSpan(node.Name)))
                {
                    return ref file;
                }
            }
        }

        index = 0;
        return ref Unsafe.NullRef<Result>();
    }

	public ref Result TryGetEventNode(uint queryFileId, ReadOnlySpan<char> name, out uint index)
    {
        ref var pair = ref Event.TryGetTrack(name, queryFileId);
        if (!Unsafe.IsNullRef(ref pair))
        {
            index = pair.Id;
            return ref Files[pair.FileId];
        }
        var files = Files.AsSpan();
        for (int i = 0; i < files.Length; ++i)
        {
            ref var file = ref files[i];
            ref var list = ref file.EventNodeList;
            uint end = (uint)list.Count;
            if (end == 0)
            {
                continue;
            }

            for (index = 0; index != end; ++index)
            {
                ref var node = ref list[index];
                if (name.SequenceEqual(file.GetSpan(node.Name)))
                {
                    Event.TryRegisterTrack(name, ((uint)i, index), queryFileId);
                    return ref file;
                }
            }
        }

        index = 0;
        return ref Unsafe.NullRef<Result>();
    }

    public ref Result TryGetEventNode(ReadOnlySpan<char> name, out uint index)
    {
        ref var pair = ref Event.TryGet(name, out _);
        if (!Unsafe.IsNullRef(ref pair))
        {
            index = pair.Id;
            return ref Files[pair.FileId];
        }
        var files = Files.AsSpan();
        for (int i = 0; i < files.Length; ++i)
        {
            ref var file = ref files[i];
            ref var list = ref file.EventNodeList;
            uint end = (uint)list.Count;
            if (end == 0)
            {
                continue;
            }

            for (index = 0; index != end; ++index)
            {
                ref var node = ref list[index];
                if (name.SequenceEqual(file.GetSpan(node.Name)))
                {
                    return ref file;
                }
            }
        }

        index = 0;
        return ref Unsafe.NullRef<Result>();
    }

	public ref Result TryGetStoryNode(uint queryFileId, ReadOnlySpan<char> name, out uint index)
    {
        ref var pair = ref Story.TryGetTrack(name, queryFileId);
        if (!Unsafe.IsNullRef(ref pair))
        {
            index = pair.Id;
            return ref Files[pair.FileId];
        }
        var files = Files.AsSpan();
        for (int i = 0; i < files.Length; ++i)
        {
            ref var file = ref files[i];
            ref var list = ref file.StoryNodeList;
            uint end = (uint)list.Count;
            if (end == 0)
            {
                continue;
            }

            for (index = 0; index != end; ++index)
            {
                ref var node = ref list[index];
                if (name.SequenceEqual(file.GetSpan(node.Name)))
                {
                    Story.TryRegisterTrack(name, ((uint)i, index), queryFileId);
                    return ref file;
                }
            }
        }

        index = 0;
        return ref Unsafe.NullRef<Result>();
    }

    public ref Result TryGetStoryNode(ReadOnlySpan<char> name, out uint index)
    {
        ref var pair = ref Story.TryGet(name, out _);
        if (!Unsafe.IsNullRef(ref pair))
        {
            index = pair.Id;
            return ref Files[pair.FileId];
        }
        var files = Files.AsSpan();
        for (int i = 0; i < files.Length; ++i)
        {
            ref var file = ref files[i];
            ref var list = ref file.StoryNodeList;
            uint end = (uint)list.Count;
            if (end == 0)
            {
                continue;
            }

            for (index = 0; index != end; ++index)
            {
                ref var node = ref list[index];
                if (name.SequenceEqual(file.GetSpan(node.Name)))
                {
                    return ref file;
                }
            }
        }

        index = 0;
        return ref Unsafe.NullRef<Result>();
    }

    public bool CheckExistance()
    {
        var fileSpan = Files.AsSpan();
        var success = true;

        for (uint fileIndex = 0; fileIndex < fileSpan.Length; ++fileIndex)
        {
            ref var file = ref fileSpan[(int)fileIndex];
            ref var set = ref file.PowerSet;
            for (uint i = 0, end = set.Count; i != end ; i++)
            {
                var name = set[i];
                if (!Unsafe.IsNullRef(ref TryGetPowerNode(fileIndex, name, out _)))
                {
                    continue;
                }

                success = false;
                this.ErrorAdd_NameStructureNotFound("power", name, ref file, set.References[i].AsSpan());
            }
        }

        for (uint fileIndex = 0; fileIndex < fileSpan.Length; ++fileIndex)
        {
            ref var file = ref fileSpan[(int)fileIndex];
            ref var set = ref file.ClassSet;
            for (uint i = 0, end = set.Count; i != end ; i++)
            {
                var name = set[i];
                if (!Unsafe.IsNullRef(ref TryGetClassNode(fileIndex, name, out _)))
                {
                    continue;
                }

                success = false;
                this.ErrorAdd_NameStructureNotFound("class", name, ref file, set.References[i].AsSpan());
            }
        }

        for (uint fileIndex = 0; fileIndex < fileSpan.Length; ++fileIndex)
        {
            ref var file = ref fileSpan[(int)fileIndex];
            ref var set = ref file.DungeonSet;
            for (uint i = 0, end = set.Count; i != end ; i++)
            {
                var name = set[i];
                if (!Unsafe.IsNullRef(ref TryGetDungeonNode(fileIndex, name, out _)))
                {
                    continue;
                }

                success = false;
                this.ErrorAdd_NameStructureNotFound("dungeon", name, ref file, set.References[i].AsSpan());
            }
        }

        for (uint fileIndex = 0; fileIndex < fileSpan.Length; ++fileIndex)
        {
            ref var file = ref fileSpan[(int)fileIndex];
            ref var set = ref file.FieldSet;
            for (uint i = 0, end = set.Count; i != end ; i++)
            {
                var name = set[i];
                if (!Unsafe.IsNullRef(ref TryGetFieldNode(fileIndex, name, out _)))
                {
                    continue;
                }

                success = false;
                this.ErrorAdd_NameStructureNotFound("field", name, ref file, set.References[i].AsSpan());
            }
        }

        for (uint fileIndex = 0; fileIndex < fileSpan.Length; ++fileIndex)
        {
            ref var file = ref fileSpan[(int)fileIndex];
            ref var set = ref file.MovetypeSet;
            for (uint i = 0, end = set.Count; i != end ; i++)
            {
                var name = set[i];
                if (!Unsafe.IsNullRef(ref TryGetMovetypeNode(fileIndex, name, out _)))
                {
                    continue;
                }

                success = false;
                this.ErrorAdd_NameStructureNotFound("movetype", name, ref file, set.References[i].AsSpan());
            }
        }

        for (uint fileIndex = 0; fileIndex < fileSpan.Length; ++fileIndex)
        {
            ref var file = ref fileSpan[(int)fileIndex];
            ref var set = ref file.ObjectSet;
            for (uint i = 0, end = set.Count; i != end ; i++)
            {
                var name = set[i];
                if (!Unsafe.IsNullRef(ref TryGetObjectNode(fileIndex, name, out _)))
                {
                    continue;
                }

                success = false;
                this.ErrorAdd_NameStructureNotFound("object", name, ref file, set.References[i].AsSpan());
            }
        }

        for (uint fileIndex = 0; fileIndex < fileSpan.Length; ++fileIndex)
        {
            ref var file = ref fileSpan[(int)fileIndex];
            ref var set = ref file.RaceSet;
            for (uint i = 0, end = set.Count; i != end ; i++)
            {
                var name = set[i];
                if (!Unsafe.IsNullRef(ref TryGetRaceNode(fileIndex, name, out _)))
                {
                    continue;
                }

                success = false;
                this.ErrorAdd_NameStructureNotFound("race", name, ref file, set.References[i].AsSpan());
            }
        }

        for (uint fileIndex = 0; fileIndex < fileSpan.Length; ++fileIndex)
        {
            ref var file = ref fileSpan[(int)fileIndex];
            ref var set = ref file.SkillSet;
            for (uint i = 0, end = set.Count; i != end ; i++)
            {
                var name = set[i];
                if (!Unsafe.IsNullRef(ref TryGetSkillNode(fileIndex, name, out _)))
                {
                    continue;
                }

                success = false;
                this.ErrorAdd_NameStructureNotFound("skill", name, ref file, set.References[i].AsSpan());
            }
        }

        for (uint fileIndex = 0; fileIndex < fileSpan.Length; ++fileIndex)
        {
            ref var file = ref fileSpan[(int)fileIndex];
            ref var set = ref file.SkillsetSet;
            for (uint i = 0, end = set.Count; i != end ; i++)
            {
                var name = set[i];
                if (!Unsafe.IsNullRef(ref TryGetSkillsetNode(fileIndex, name, out _)))
                {
                    continue;
                }

                success = false;
                this.ErrorAdd_NameStructureNotFound("skillset", name, ref file, set.References[i].AsSpan());
            }
        }

        for (uint fileIndex = 0; fileIndex < fileSpan.Length; ++fileIndex)
        {
            ref var file = ref fileSpan[(int)fileIndex];
            ref var set = ref file.SpotSet;
            for (uint i = 0, end = set.Count; i != end ; i++)
            {
                var name = set[i];
                if (!Unsafe.IsNullRef(ref TryGetSpotNode(fileIndex, name, out _)))
                {
                    continue;
                }

                success = false;
                this.ErrorAdd_NameStructureNotFound("spot", name, ref file, set.References[i].AsSpan());
            }
        }

        for (uint fileIndex = 0; fileIndex < fileSpan.Length; ++fileIndex)
        {
            ref var file = ref fileSpan[(int)fileIndex];
            ref var set = ref file.UnitSet;
            for (uint i = 2, end = set.Count; i != end ; i++)
            {
                var name = set[i];
                if (!Unsafe.IsNullRef(ref TryGetUnitNode(fileIndex, name, out _)))
                {
                    continue;
                }

                success = false;
                this.ErrorAdd_NameStructureNotFound("unit", name, ref file, set.References[i].AsSpan());
            }
        }

        for (uint fileIndex = 0; fileIndex < fileSpan.Length; ++fileIndex)
        {
            ref var file = ref fileSpan[(int)fileIndex];
            ref var set = ref file.VoiceSet;
            for (uint i = 0, end = set.Count; i != end ; i++)
            {
                var name = set[i];
                if (!Unsafe.IsNullRef(ref TryGetVoiceNode(fileIndex, name, out _)))
                {
                    continue;
                }

                success = false;
                this.ErrorAdd_NameStructureNotFound("voice", name, ref file, set.References[i].AsSpan());
            }
        }

        for (uint fileIndex = 0; fileIndex < fileSpan.Length; ++fileIndex)
        {
            ref var file = ref fileSpan[(int)fileIndex];
            ref var set = ref file.ScenarioSet;
            for (uint i = 10, end = set.Count; i != end ; i++)
            {
                var name = set[i];
                if (!Unsafe.IsNullRef(ref TryGetScenarioNode(fileIndex, name, out _)))
                {
                    continue;
                }

                success = false;
                this.ErrorAdd_NameStructureNotFound("scenario", name, ref file, set.References[i].AsSpan());
            }
        }

        for (uint fileIndex = 0; fileIndex < fileSpan.Length; ++fileIndex)
        {
            ref var file = ref fileSpan[(int)fileIndex];
            ref var set = ref file.EventSet;
            for (uint i = 0, end = set.Count; i != end ; i++)
            {
                var name = set[i];
                if (!Unsafe.IsNullRef(ref TryGetEventNode(fileIndex, name, out _)))
                {
                    continue;
                }

                success = false;
                this.ErrorAdd_NameStructureNotFound("event", name, ref file, set.References[i].AsSpan());
            }
        }

        for (uint fileIndex = 0; fileIndex < fileSpan.Length; ++fileIndex)
        {
            ref var file = ref fileSpan[(int)fileIndex];
            ref var set = ref file.StorySet;
            for (uint i = 0, end = set.Count; i != end ; i++)
            {
                var name = set[i];
                if (!Unsafe.IsNullRef(ref TryGetStoryNode(fileIndex, name, out _)))
                {
                    continue;
                }

                success = false;
                this.ErrorAdd_NameStructureNotFound("story", name, ref file, set.References[i].AsSpan());
            }
        }

        for (int fileIndex = 0; fileIndex < fileSpan.Length; ++fileIndex)
        {
            ref var file = ref fileSpan[fileIndex];
            ref var set = ref file.NumberVariableReaderSet;
            for (uint i = 0, end = set.Count; i != end ; i++)
            {
                var name = set[i];
                bool notFound = !file.NumberVariableWriterSet.TryGet(name, out _);
                if (notFound)
                {
                    for (int anotherFileIndex = 0; anotherFileIndex < fileSpan.Length; ++anotherFileIndex)
                    {
                        if (anotherFileIndex == fileIndex)
                        {
                            continue;
                        }

                        if (fileSpan[anotherFileIndex].NumberVariableWriterSet.TryGet(name, out _))
                        {
                            notFound = false;
                            break;
                        }
                    }
                }

                if (notFound)
                {
                    this.ErrorAdd_CorrespondingWritingNotFound("NumberVariable", name, ref file, set.References[i].AsSpan());
                }
            }
        }

        for (int fileIndex = 0; fileIndex < fileSpan.Length; ++fileIndex)
        {
            ref var file = ref fileSpan[fileIndex];
            ref var set = ref file.StringVariableReaderSet;
            for (uint i = 0, end = set.Count; i != end ; i++)
            {
                var name = set[i];
                bool notFound = !file.StringVariableWriterSet.TryGet(name, out _);
                if (notFound)
                {
                    for (int anotherFileIndex = 0; anotherFileIndex < fileSpan.Length; ++anotherFileIndex)
                    {
                        if (anotherFileIndex == fileIndex)
                        {
                            continue;
                        }

                        if (fileSpan[anotherFileIndex].StringVariableWriterSet.TryGet(name, out _))
                        {
                            notFound = false;
                            break;
                        }
                    }
                }

                if (notFound)
                {
                    this.ErrorAdd_CorrespondingWritingNotFound("StringVariable", name, ref file, set.References[i].AsSpan());
                }
            }
        }

        for (int fileIndex = 0; fileIndex < fileSpan.Length; ++fileIndex)
        {
            ref var file = ref fileSpan[fileIndex];
            ref var set = ref file.GlobalVariableReaderSet;
            for (uint i = 0, end = set.Count; i != end ; i++)
            {
                var name = set[i];
                bool notFound = !file.GlobalVariableWriterSet.TryGet(name, out _);
                if (notFound)
                {
                    for (int anotherFileIndex = 0; anotherFileIndex < fileSpan.Length; ++anotherFileIndex)
                    {
                        if (anotherFileIndex == fileIndex)
                        {
                            continue;
                        }

                        if (fileSpan[anotherFileIndex].GlobalVariableWriterSet.TryGet(name, out _))
                        {
                            notFound = false;
                            break;
                        }
                    }
                }

                if (notFound)
                {
                    this.ErrorAdd_CorrespondingWritingNotFound("GlobalVariable", name, ref file, set.References[i].AsSpan());
                }
            }
        }

        for (int fileIndex = 0; fileIndex < fileSpan.Length; ++fileIndex)
        {
            ref var file = ref fileSpan[fileIndex];
            ref var set = ref file.GlobalStringVariableReaderSet;
            for (uint i = 0, end = set.Count; i != end ; i++)
            {
                var name = set[i];
                bool notFound = !file.GlobalStringVariableWriterSet.TryGet(name, out _);
                if (notFound)
                {
                    for (int anotherFileIndex = 0; anotherFileIndex < fileSpan.Length; ++anotherFileIndex)
                    {
                        if (anotherFileIndex == fileIndex)
                        {
                            continue;
                        }

                        if (fileSpan[anotherFileIndex].GlobalStringVariableWriterSet.TryGet(name, out _))
                        {
                            notFound = false;
                            break;
                        }
                    }
                }

                if (notFound)
                {
                    this.ErrorAdd_CorrespondingWritingNotFound("GlobalStringVariable", name, ref file, set.References[i].AsSpan());
                }
            }
        }

        for (int fileIndex = 0; fileIndex < fileSpan.Length; ++fileIndex)
        {
            ref var file = ref fileSpan[fileIndex];
            ref var set = ref file.ClassTypeReaderSet;
            for (uint i = 0, end = set.Count; i != end ; i++)
            {
                var name = set[i];
                bool notFound = !file.ClassTypeWriterSet.TryGet(name, out _);
                if (notFound)
                {
                    for (int anotherFileIndex = 0; anotherFileIndex < fileSpan.Length; ++anotherFileIndex)
                    {
                        if (anotherFileIndex == fileIndex)
                        {
                            continue;
                        }

                        if (fileSpan[anotherFileIndex].ClassTypeWriterSet.TryGet(name, out _))
                        {
                            notFound = false;
                            break;
                        }
                    }
                }

                if (notFound)
                {
                    this.ErrorAdd_CorrespondingWritingNotFound("ClassType", name, ref file, set.References[i].AsSpan());
                }
            }
        }

        for (int fileIndex = 0; fileIndex < fileSpan.Length; ++fileIndex)
        {
            ref var file = ref fileSpan[fileIndex];
            ref var set = ref file.VoiceTypeReaderSet;
            for (uint i = 0, end = set.Count; i != end ; i++)
            {
                var name = set[i];
                bool notFound = !file.VoiceTypeWriterSet.TryGet(name, out _);
                if (notFound)
                {
                    for (int anotherFileIndex = 0; anotherFileIndex < fileSpan.Length; ++anotherFileIndex)
                    {
                        if (anotherFileIndex == fileIndex)
                        {
                            continue;
                        }

                        if (fileSpan[anotherFileIndex].VoiceTypeWriterSet.TryGet(name, out _))
                        {
                            notFound = false;
                            break;
                        }
                    }
                }

                if (notFound)
                {
                    this.ErrorAdd_CorrespondingWritingNotFound("VoiceType", name, ref file, set.References[i].AsSpan());
                }
            }
        }

        for (int fileIndex = 0; fileIndex < fileSpan.Length; ++fileIndex)
        {
            ref var file = ref fileSpan[fileIndex];
            ref var set = ref file.FieldIdReaderSet;
            for (uint i = 0, end = set.Count; i != end ; i++)
            {
                var name = set[i];
                bool notFound = !file.FieldIdWriterSet.TryGet(name, out _);
                if (notFound)
                {
                    for (int anotherFileIndex = 0; anotherFileIndex < fileSpan.Length; ++anotherFileIndex)
                    {
                        if (anotherFileIndex == fileIndex)
                        {
                            continue;
                        }

                        if (fileSpan[anotherFileIndex].FieldIdWriterSet.TryGet(name, out _))
                        {
                            notFound = false;
                            break;
                        }
                    }
                }

                if (notFound)
                {
                    this.ErrorAdd_CorrespondingWritingNotFound("FieldId", name, ref file, set.References[i].AsSpan());
                }
            }
        }

        for (int fileIndex = 0; fileIndex < fileSpan.Length; ++fileIndex)
        {
            ref var file = ref fileSpan[fileIndex];
            ref var set = ref file.FieldAttributeTypeReaderSet;
            for (uint i = 0, end = set.Count; i != end ; i++)
            {
                var name = set[i];
                bool notFound = !file.FieldAttributeTypeWriterSet.TryGet(name, out _);
                if (notFound)
                {
                    for (int anotherFileIndex = 0; anotherFileIndex < fileSpan.Length; ++anotherFileIndex)
                    {
                        if (anotherFileIndex == fileIndex)
                        {
                            continue;
                        }

                        if (fileSpan[anotherFileIndex].FieldAttributeTypeWriterSet.TryGet(name, out _))
                        {
                            notFound = false;
                            break;
                        }
                    }
                }

                if (notFound)
                {
                    this.ErrorAdd_CorrespondingWritingNotFound("FieldAttributeType", name, ref file, set.References[i].AsSpan());
                }
            }
        }

        for (uint fileIndex = 0; fileIndex < fileSpan.Length; ++fileIndex)
        {
            ref var file = ref fileSpan[(int)fileIndex];
            ref var set = ref file.AttributeTypeSet;
            for (uint i = 12, end = set.Count; i != end ; i++)
            {
                var name = set[i];
                if (ContainsAttributeType(name))
                {
                    continue;
                }

                success = false;
                this.ErrorAdd_AttributeTypeNotFound(name, ref file, set.References[i].AsSpan());
            }
        }

        return success;
    }

    private void AddReferenceAndValidate_Call(ref Result result, CallFunctionExpression call)
    {
        var arguments = call.Arguments.AsSpan();
        if (arguments.IsEmpty)
        {
            return;
        }

        ref var argument = ref arguments[0];
        ReadOnlySpan<char> span;
        switch (call.Kind)
        {
            case FunctionKind.isSelect:
                result.ErrorAdd($"Unknown action 'isSelect'.", call.TokenId);
                break;
            case FunctionKind.isWhoDead:
                result.ErrorAdd($"Unknown action 'isWhoDead'.", call.TokenId);
                break;
            case FunctionKind.isGameOver:
                result.ErrorAdd($"Unknown action 'isGameOver'.", call.TokenId);
                break;
            case FunctionKind.inPower:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("inPower", 1, "Power", argument.TokenId);
                }
                else if (span[0] == '@')
                {
                    if (span.Length != 1)
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    argument.ReferenceId = result.PowerSet.GetOrAdd(span, argument.TokenId);
                    argument.ReferenceKind = ReferenceKind.Power;
                    argument.HasReference = true;
                }

                argument = ref arguments[1];
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("inPower", 2, "Unit, Spot, StringVariableReader", argument.TokenId);
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("inPower", 2, "Unit, Spot, StringVariableReader", argument.TokenId);
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (!Unsafe.IsNullRef(ref track))
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Unit:
                                argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Unit;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Spot:
                                argument.ReferenceId = result.SpotSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Spot;
                                argument.HasReference = true;
                                break;
                            default:
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("inPower", 2, "Unit, Spot, StringVariableReader", argument.TokenId);
                                argument.HasReference = false;
                                break;
                        }
                    }
                    else
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("inPower", 2, "Unit, Spot, StringVariableReader", argument.TokenId);
                    }
                }

                for (int i = 2; i < arguments.Length; ++i)
                {
                    argument = ref arguments[i];
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("inPower", i + 1, "Unit, Spot, StringVariableReader", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length == 1)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("inPower", i + 1, "Unit, Spot, StringVariableReader", argument.TokenId);
                        }
                        else
                        {
                            argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                        if (!Unsafe.IsNullRef(ref track))
                        {
                            switch (track.Kind)
                            {
                                case ReferenceKind.Unit:
                                    argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                    argument.ReferenceKind = ReferenceKind.Unit;
                                    argument.HasReference = true;
                                    break;
                                case ReferenceKind.Spot:
                                    argument.ReferenceId = result.SpotSet.GetOrAdd(span, argument.TokenId);
                                    argument.ReferenceKind = ReferenceKind.Spot;
                                    argument.HasReference = true;
                                    break;
                                default:
                                    result.ErrorAdd_UnexpectedArgumentReferenceKind("inPower", i + 1, "Unit, Spot, StringVariableReader", argument.TokenId);
                                    argument.HasReference = false;
                                    break;
                            }
                        }
                        else
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("inPower", i + 1, "Unit, Spot, StringVariableReader", argument.TokenId);
                        }
                    }

                }
                break;
            case FunctionKind.isPlayer:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("isPlayer", 1, "Unit, Power, StringVariableReader", argument.TokenId);
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("isPlayer", 1, "Unit, Power, StringVariableReader", argument.TokenId);
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (!Unsafe.IsNullRef(ref track))
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Unit:
                                argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Unit;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Power:
                                argument.ReferenceId = result.PowerSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Power;
                                argument.HasReference = true;
                                break;
                            default:
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("isPlayer", 1, "Unit, Power, StringVariableReader", argument.TokenId);
                                argument.HasReference = false;
                                break;
                        }
                    }
                    else
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("isPlayer", 1, "Unit, Power, StringVariableReader", argument.TokenId);
                    }
                }

                break;
            case FunctionKind.countUnit:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("countUnit", 1, "Unit, Power, StringVariableReader", argument.TokenId);
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("countUnit", 1, "Unit, Power, StringVariableReader", argument.TokenId);
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (!Unsafe.IsNullRef(ref track))
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Unit:
                                argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Unit;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Power:
                                argument.ReferenceId = result.PowerSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Power;
                                argument.HasReference = true;
                                break;
                            default:
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("countUnit", 1, "Unit, Power, StringVariableReader", argument.TokenId);
                                argument.HasReference = false;
                                break;
                        }
                    }
                    else
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("countUnit", 1, "Unit, Power, StringVariableReader", argument.TokenId);
                    }
                }

                break;
            case FunctionKind.isEnemy:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("isEnemy", 1, "Unit, Spot, StringVariableReader", argument.TokenId);
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("isEnemy", 1, "Unit, Spot, StringVariableReader", argument.TokenId);
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (!Unsafe.IsNullRef(ref track))
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Unit:
                                argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Unit;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Spot:
                                argument.ReferenceId = result.SpotSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Spot;
                                argument.HasReference = true;
                                break;
                            default:
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("isEnemy", 1, "Unit, Spot, StringVariableReader", argument.TokenId);
                                argument.HasReference = false;
                                break;
                        }
                    }
                    else
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("isEnemy", 1, "Unit, Spot, StringVariableReader", argument.TokenId);
                    }
                }

                argument = ref arguments[1];
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("isEnemy", 2, "Unit, Spot, StringVariableReader", argument.TokenId);
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("isEnemy", 2, "Unit, Spot, StringVariableReader", argument.TokenId);
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (!Unsafe.IsNullRef(ref track))
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Unit:
                                argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Unit;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Spot:
                                argument.ReferenceId = result.SpotSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Spot;
                                argument.HasReference = true;
                                break;
                            default:
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("isEnemy", 2, "Unit, Spot, StringVariableReader", argument.TokenId);
                                argument.HasReference = false;
                                break;
                        }
                    }
                    else
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("isEnemy", 2, "Unit, Spot, StringVariableReader", argument.TokenId);
                    }
                }

                break;
            case FunctionKind.isFriend:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("isFriend", 1, "Unit, Spot, StringVariableReader", argument.TokenId);
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("isFriend", 1, "Unit, Spot, StringVariableReader", argument.TokenId);
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (!Unsafe.IsNullRef(ref track))
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Unit:
                                argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Unit;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Spot:
                                argument.ReferenceId = result.SpotSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Spot;
                                argument.HasReference = true;
                                break;
                            default:
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("isFriend", 1, "Unit, Spot, StringVariableReader", argument.TokenId);
                                argument.HasReference = false;
                                break;
                        }
                    }
                    else
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("isFriend", 1, "Unit, Spot, StringVariableReader", argument.TokenId);
                    }
                }

                argument = ref arguments[1];
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("isFriend", 2, "Unit, Spot, StringVariableReader", argument.TokenId);
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("isFriend", 2, "Unit, Spot, StringVariableReader", argument.TokenId);
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (!Unsafe.IsNullRef(ref track))
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Unit:
                                argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Unit;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Spot:
                                argument.ReferenceId = result.SpotSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Spot;
                                argument.HasReference = true;
                                break;
                            default:
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("isFriend", 2, "Unit, Spot, StringVariableReader", argument.TokenId);
                                argument.HasReference = false;
                                break;
                        }
                    }
                    else
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("isFriend", 2, "Unit, Spot, StringVariableReader", argument.TokenId);
                    }
                }

                break;
            case FunctionKind.isNpc:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("isNpc", 1, "Unit, Power, StringVariableReader", argument.TokenId);
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("isNpc", 1, "Unit, Power, StringVariableReader", argument.TokenId);
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (!Unsafe.IsNullRef(ref track))
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Unit:
                                argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Unit;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Power:
                                argument.ReferenceId = result.PowerSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Power;
                                argument.HasReference = true;
                                break;
                            default:
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("isNpc", 1, "Unit, Power, StringVariableReader", argument.TokenId);
                                argument.HasReference = false;
                                break;
                        }
                    }
                    else
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("isNpc", 1, "Unit, Power, StringVariableReader", argument.TokenId);
                    }
                }

                for (int i = 1; i < arguments.Length; ++i)
                {
                    argument = ref arguments[i];
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("isNpc", i + 1, "Unit, Power, StringVariableReader", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length == 1)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("isNpc", i + 1, "Unit, Power, StringVariableReader", argument.TokenId);
                        }
                        else
                        {
                            argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                        if (!Unsafe.IsNullRef(ref track))
                        {
                            switch (track.Kind)
                            {
                                case ReferenceKind.Unit:
                                    argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                    argument.ReferenceKind = ReferenceKind.Unit;
                                    argument.HasReference = true;
                                    break;
                                case ReferenceKind.Power:
                                    argument.ReferenceId = result.PowerSet.GetOrAdd(span, argument.TokenId);
                                    argument.ReferenceKind = ReferenceKind.Power;
                                    argument.HasReference = true;
                                    break;
                                default:
                                    result.ErrorAdd_UnexpectedArgumentReferenceKind("isNpc", i + 1, "Unit, Power, StringVariableReader", argument.TokenId);
                                    argument.HasReference = false;
                                    break;
                            }
                        }
                        else
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("isNpc", i + 1, "Unit, Power, StringVariableReader", argument.TokenId);
                        }
                    }

                }
                break;
            case FunctionKind.isAlive:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("isAlive", 1, "Unit, Power, StringVariableReader", argument.TokenId);
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("isAlive", 1, "Unit, Power, StringVariableReader", argument.TokenId);
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (!Unsafe.IsNullRef(ref track))
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Unit:
                                argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Unit;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Power:
                                argument.ReferenceId = result.PowerSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Power;
                                argument.HasReference = true;
                                break;
                            default:
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("isAlive", 1, "Unit, Power, StringVariableReader", argument.TokenId);
                                argument.HasReference = false;
                                break;
                        }
                    }
                    else
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("isAlive", 1, "Unit, Power, StringVariableReader", argument.TokenId);
                    }
                }

                for (int i = 1; i < arguments.Length; ++i)
                {
                    argument = ref arguments[i];
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("isAlive", i + 1, "Unit, Power, StringVariableReader", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length == 1)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("isAlive", i + 1, "Unit, Power, StringVariableReader", argument.TokenId);
                        }
                        else
                        {
                            argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                        if (!Unsafe.IsNullRef(ref track))
                        {
                            switch (track.Kind)
                            {
                                case ReferenceKind.Unit:
                                    argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                    argument.ReferenceKind = ReferenceKind.Unit;
                                    argument.HasReference = true;
                                    break;
                                case ReferenceKind.Power:
                                    argument.ReferenceId = result.PowerSet.GetOrAdd(span, argument.TokenId);
                                    argument.ReferenceKind = ReferenceKind.Power;
                                    argument.HasReference = true;
                                    break;
                                default:
                                    result.ErrorAdd_UnexpectedArgumentReferenceKind("isAlive", i + 1, "Unit, Power, StringVariableReader", argument.TokenId);
                                    argument.HasReference = false;
                                    break;
                            }
                        }
                        else
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("isAlive", i + 1, "Unit, Power, StringVariableReader", argument.TokenId);
                        }
                    }

                }
                break;
            case FunctionKind.inBattle:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("inBattle", 1, "Unit, Power, StringVariableReader", argument.TokenId);
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("inBattle", 1, "Unit, Power, StringVariableReader", argument.TokenId);
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (!Unsafe.IsNullRef(ref track))
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Unit:
                                argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Unit;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Power:
                                argument.ReferenceId = result.PowerSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Power;
                                argument.HasReference = true;
                                break;
                            default:
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("inBattle", 1, "Unit, Power, StringVariableReader", argument.TokenId);
                                argument.HasReference = false;
                                break;
                        }
                    }
                    else
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("inBattle", 1, "Unit, Power, StringVariableReader", argument.TokenId);
                    }
                }

                for (int i = 1; i < arguments.Length; ++i)
                {
                    argument = ref arguments[i];
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("inBattle", i + 1, "Unit, Power, StringVariableReader", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length == 1)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("inBattle", i + 1, "Unit, Power, StringVariableReader", argument.TokenId);
                        }
                        else
                        {
                            argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                        if (!Unsafe.IsNullRef(ref track))
                        {
                            switch (track.Kind)
                            {
                                case ReferenceKind.Unit:
                                    argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                    argument.ReferenceKind = ReferenceKind.Unit;
                                    argument.HasReference = true;
                                    break;
                                case ReferenceKind.Power:
                                    argument.ReferenceId = result.PowerSet.GetOrAdd(span, argument.TokenId);
                                    argument.ReferenceKind = ReferenceKind.Power;
                                    argument.HasReference = true;
                                    break;
                                default:
                                    result.ErrorAdd_UnexpectedArgumentReferenceKind("inBattle", i + 1, "Unit, Power, StringVariableReader", argument.TokenId);
                                    argument.HasReference = false;
                                    break;
                            }
                        }
                        else
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("inBattle", i + 1, "Unit, Power, StringVariableReader", argument.TokenId);
                        }
                    }

                }
                break;
            case FunctionKind.isJoin:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("isJoin", 1, "Power, Spot, StringVariableReader", argument.TokenId);
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("isJoin", 1, "Power, Spot, StringVariableReader", argument.TokenId);
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (!Unsafe.IsNullRef(ref track))
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Power:
                                argument.ReferenceId = result.PowerSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Power;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Spot:
                                argument.ReferenceId = result.SpotSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Spot;
                                argument.HasReference = true;
                                break;
                            default:
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("isJoin", 1, "Power, Spot, StringVariableReader", argument.TokenId);
                                argument.HasReference = false;
                                break;
                        }
                    }
                    else
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("isJoin", 1, "Power, Spot, StringVariableReader", argument.TokenId);
                    }
                }

                argument = ref arguments[1];
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("isJoin", 2, "Power, Spot, StringVariableReader", argument.TokenId);
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("isJoin", 2, "Power, Spot, StringVariableReader", argument.TokenId);
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (!Unsafe.IsNullRef(ref track))
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Power:
                                argument.ReferenceId = result.PowerSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Power;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Spot:
                                argument.ReferenceId = result.SpotSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Spot;
                                argument.HasReference = true;
                                break;
                            default:
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("isJoin", 2, "Power, Spot, StringVariableReader", argument.TokenId);
                                argument.HasReference = false;
                                break;
                        }
                    }
                    else
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("isJoin", 2, "Power, Spot, StringVariableReader", argument.TokenId);
                    }
                }

                if (arguments.Length <= 2)
                {
                    break;
                }
                argument = ref arguments[2];
                if (!argument.IsNumber && (argument.HasReference = PerResultValidator.IsBoolean(result.GetSpan(argument.TokenId), out argument.ReferenceId)))
                {
                    argument.ReferenceKind = ReferenceKind.Boolean;
                }
                else
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("isJoin", 3, "Boolean", argument.TokenId);
                }

                break;
            case FunctionKind.getDistance:
                switch (arguments.Length)
                {
                    case 2:
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("getDistance", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length == 1)
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("getDistance", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                            }
                            else
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                            if (!Unsafe.IsNullRef(ref track))
                            {
                                switch (track.Kind)
                                {
                                    case ReferenceKind.Unit:
                                        argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Unit;
                                        argument.HasReference = true;
                                        break;
                                    case ReferenceKind.Class:
                                        argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Class;
                                        argument.HasReference = true;
                                        break;
                                    default:
                                        result.ErrorAdd_UnexpectedArgumentReferenceKind("getDistance", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                                        argument.HasReference = false;
                                        break;
                                }
                            }
                            else
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("getDistance", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                            }
                        }

                        argument = ref arguments[1];
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("getDistance", 2, "Unit, Class, StringVariableReader", argument.TokenId);
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length == 1)
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("getDistance", 2, "Unit, Class, StringVariableReader", argument.TokenId);
                            }
                            else
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                            if (!Unsafe.IsNullRef(ref track))
                            {
                                switch (track.Kind)
                                {
                                    case ReferenceKind.Unit:
                                        argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Unit;
                                        argument.HasReference = true;
                                        break;
                                    case ReferenceKind.Class:
                                        argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Class;
                                        argument.HasReference = true;
                                        break;
                                    default:
                                        result.ErrorAdd_UnexpectedArgumentReferenceKind("getDistance", 2, "Unit, Class, StringVariableReader", argument.TokenId);
                                        argument.HasReference = false;
                                        break;
                                }
                            }
                            else
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("getDistance", 2, "Unit, Class, StringVariableReader", argument.TokenId);
                            }
                        }

                        break;
                    case 3:
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("getDistance", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length == 1)
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("getDistance", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                            }
                            else
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                            if (!Unsafe.IsNullRef(ref track))
                            {
                                switch (track.Kind)
                                {
                                    case ReferenceKind.Unit:
                                        argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Unit;
                                        argument.HasReference = true;
                                        break;
                                    case ReferenceKind.Class:
                                        argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Class;
                                        argument.HasReference = true;
                                        break;
                                    default:
                                        result.ErrorAdd_UnexpectedArgumentReferenceKind("getDistance", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                                        argument.HasReference = false;
                                        break;
                                }
                            }
                            else
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("getDistance", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                            }
                        }

                        argument = ref arguments[1];
                        if (!argument.IsNumber)
                        {
                            argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                            argument.ReferenceId = result.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                            argument.HasReference = true;
                        }

                        argument = ref arguments[2];
                        if (!argument.IsNumber)
                        {
                            argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                            argument.ReferenceId = result.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                            argument.HasReference = true;
                        }

                        break;
                }
                break;
            case FunctionKind.isPostIn:
                switch (arguments.Length)
                {
                    case 3:
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("isPostIn", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length == 1)
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("isPostIn", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                            }
                            else
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                            if (!Unsafe.IsNullRef(ref track))
                            {
                                switch (track.Kind)
                                {
                                    case ReferenceKind.Unit:
                                        argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Unit;
                                        argument.HasReference = true;
                                        break;
                                    case ReferenceKind.Class:
                                        argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Class;
                                        argument.HasReference = true;
                                        break;
                                    default:
                                        result.ErrorAdd_UnexpectedArgumentReferenceKind("isPostIn", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                                        argument.HasReference = false;
                                        break;
                                }
                            }
                            else
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("isPostIn", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                            }
                        }

                        argument = ref arguments[1];
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("isPostIn", 2, "Unit, Class, StringVariableReader", argument.TokenId);
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length == 1)
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("isPostIn", 2, "Unit, Class, StringVariableReader", argument.TokenId);
                            }
                            else
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                            if (!Unsafe.IsNullRef(ref track))
                            {
                                switch (track.Kind)
                                {
                                    case ReferenceKind.Unit:
                                        argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Unit;
                                        argument.HasReference = true;
                                        break;
                                    case ReferenceKind.Class:
                                        argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Class;
                                        argument.HasReference = true;
                                        break;
                                    default:
                                        result.ErrorAdd_UnexpectedArgumentReferenceKind("isPostIn", 2, "Unit, Class, StringVariableReader", argument.TokenId);
                                        argument.HasReference = false;
                                        break;
                                }
                            }
                            else
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("isPostIn", 2, "Unit, Class, StringVariableReader", argument.TokenId);
                            }
                        }

                        argument = ref arguments[2];
                        if (!argument.IsNumber)
                        {
                            argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                            argument.ReferenceId = result.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                            argument.HasReference = true;
                        }

                        break;
                    case 4:
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("isPostIn", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length == 1)
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("isPostIn", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                            }
                            else
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                            if (!Unsafe.IsNullRef(ref track))
                            {
                                switch (track.Kind)
                                {
                                    case ReferenceKind.Unit:
                                        argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Unit;
                                        argument.HasReference = true;
                                        break;
                                    case ReferenceKind.Class:
                                        argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Class;
                                        argument.HasReference = true;
                                        break;
                                    default:
                                        result.ErrorAdd_UnexpectedArgumentReferenceKind("isPostIn", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                                        argument.HasReference = false;
                                        break;
                                }
                            }
                            else
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("isPostIn", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                            }
                        }

                        argument = ref arguments[1];
                        if (!argument.IsNumber)
                        {
                            argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                            argument.ReferenceId = result.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                            argument.HasReference = true;
                        }

                        argument = ref arguments[2];
                        if (!argument.IsNumber)
                        {
                            argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                            argument.ReferenceId = result.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                            argument.HasReference = true;
                        }

                        argument = ref arguments[3];
                        if (!argument.IsNumber)
                        {
                            argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                            argument.ReferenceId = result.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                            argument.HasReference = true;
                        }

                        break;
                    case 5:
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("isPostIn", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length == 1)
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("isPostIn", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                            }
                            else
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                            if (!Unsafe.IsNullRef(ref track))
                            {
                                switch (track.Kind)
                                {
                                    case ReferenceKind.Unit:
                                        argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Unit;
                                        argument.HasReference = true;
                                        break;
                                    case ReferenceKind.Class:
                                        argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Class;
                                        argument.HasReference = true;
                                        break;
                                    default:
                                        result.ErrorAdd_UnexpectedArgumentReferenceKind("isPostIn", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                                        argument.HasReference = false;
                                        break;
                                }
                            }
                            else
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("isPostIn", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                            }
                        }

                        argument = ref arguments[1];
                        if (!argument.IsNumber)
                        {
                            argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                            argument.ReferenceId = result.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                            argument.HasReference = true;
                        }

                        argument = ref arguments[2];
                        if (!argument.IsNumber)
                        {
                            argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                            argument.ReferenceId = result.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                            argument.HasReference = true;
                        }

                        argument = ref arguments[3];
                        if (!argument.IsNumber)
                        {
                            argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                            argument.ReferenceId = result.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                            argument.HasReference = true;
                        }

                        argument = ref arguments[4];
                        if (!argument.IsNumber)
                        {
                            argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                            argument.ReferenceId = result.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                            argument.HasReference = true;
                        }

                        break;
                }
                break;
        }
    }

    private void AddReferenceAndValidate_Call(ref Result result, CallActionStatement call)
    {
        var arguments = call.Arguments.AsSpan();
        if (arguments.IsEmpty)
        {
            return;
        }

        ref var argument = ref arguments[0];
        ReadOnlySpan<char> span;
        switch (call.Kind)
        {
            case ActionKind.vc:
                result.ErrorAdd($"Unknown action 'vc'.", call.TokenId);
                break;
            case ActionKind.play:
                result.ErrorAdd($"Unknown action 'play'.", call.TokenId);
                break;
            case ActionKind.ppl1:
                result.ErrorAdd($"Unknown action 'ppl1'.", call.TokenId);
                break;
            case ActionKind.citom:
                result.ErrorAdd($"Unknown action 'citom'.", call.TokenId);
                break;
            case ActionKind.setbcg:
                result.ErrorAdd($"Unknown action 'setbcg'.", call.TokenId);
                break;
            case ActionKind.showCamp:
                result.ErrorAdd($"Unknown action 'showCamp'.", call.TokenId);
                break;
            case ActionKind.clickWait:
                result.ErrorAdd($"Unknown action 'clickWait'.", call.TokenId);
                break;
            case ActionKind.worldskin:
                result.ErrorAdd($"Unknown action 'worldskin'.", call.TokenId);
                break;
            case ActionKind.darkness_off:
                result.ErrorAdd($"Unknown action 'darkness_off'.", call.TokenId);
                break;
            case ActionKind.doGameEnding:
                result.ErrorAdd($"Unknown action 'doGameEnding'.", call.TokenId);
                break;
            case ActionKind.storeDeath:
                result.ErrorAdd($"Unknown action 'storeDeath'.", call.TokenId);
                break;
            case ActionKind.dialog:
                switch (arguments.Length)
                {
                    case 1:
                        AddReferenceAndValidate_CompoundText(ref result, ref argument);

                        break;
                    case 2:
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("dialog", 1, "Unit, Text, StringVariableReader", argument.TokenId);
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length == 1)
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("dialog", 1, "Unit, Text, StringVariableReader", argument.TokenId);
                            }
                            else
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                            if (!Unsafe.IsNullRef(ref track))
                            {
                                switch (track.Kind)
                                {
                                    case ReferenceKind.Unit:
                                        argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Unit;
                                        argument.HasReference = true;
                                        break;
                                }
                            }
                        }

                        argument = ref arguments[1];
                        AddReferenceAndValidate_CompoundText(ref result, ref argument);

                        break;
                }
                break;
            case ActionKind.dialogF:
                switch (arguments.Length)
                {
                    case 1:
                        AddReferenceAndValidate_CompoundText(ref result, ref argument);

                        break;
                    case 2:
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("dialogF", 1, "Unit, Text, StringVariableReader", argument.TokenId);
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length == 1)
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("dialogF", 1, "Unit, Text, StringVariableReader", argument.TokenId);
                            }
                            else
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                            if (!Unsafe.IsNullRef(ref track))
                            {
                                switch (track.Kind)
                                {
                                    case ReferenceKind.Unit:
                                        argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Unit;
                                        argument.HasReference = true;
                                        break;
                                }
                            }
                        }

                        argument = ref arguments[1];
                        AddReferenceAndValidate_CompoundText(ref result, ref argument);

                        break;
                }
                break;
            case ActionKind.locate:
                switch (arguments.Length)
                {
                    case 1:
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("locate", 1, "Unit, Spot, StringVariableReader", argument.TokenId);
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length == 1)
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("locate", 1, "Unit, Spot, StringVariableReader", argument.TokenId);
                            }
                            else
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                            if (!Unsafe.IsNullRef(ref track))
                            {
                                switch (track.Kind)
                                {
                                    case ReferenceKind.Unit:
                                        argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Unit;
                                        argument.HasReference = true;
                                        break;
                                    case ReferenceKind.Spot:
                                        argument.ReferenceId = result.SpotSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Spot;
                                        argument.HasReference = true;
                                        break;
                                    default:
                                        result.ErrorAdd_UnexpectedArgumentReferenceKind("locate", 1, "Unit, Spot, StringVariableReader", argument.TokenId);
                                        argument.HasReference = false;
                                        break;
                                }
                            }
                            else
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("locate", 1, "Unit, Spot, StringVariableReader", argument.TokenId);
                            }
                        }

                        break;
                    case 2:
                        if (!argument.IsNumber)
                        {
                            argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                            argument.ReferenceId = result.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                            argument.HasReference = true;
                        }

                        argument = ref arguments[1];
                        if (!argument.IsNumber)
                        {
                            argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                            argument.ReferenceId = result.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                            argument.HasReference = true;
                        }

                        break;
                }
                break;
            case ActionKind.scroll:
                switch (arguments.Length)
                {
                    case 1:
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("scroll", 1, "Unit, Class, Spot, StringVariableReader", argument.TokenId);
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length == 1)
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("scroll", 1, "Unit, Class, Spot, StringVariableReader", argument.TokenId);
                            }
                            else
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                            if (!Unsafe.IsNullRef(ref track))
                            {
                                switch (track.Kind)
                                {
                                    case ReferenceKind.Unit:
                                        argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Unit;
                                        argument.HasReference = true;
                                        break;
                                    case ReferenceKind.Class:
                                        argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Class;
                                        argument.HasReference = true;
                                        break;
                                    case ReferenceKind.Spot:
                                        argument.ReferenceId = result.SpotSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Spot;
                                        argument.HasReference = true;
                                        break;
                                    default:
                                        result.ErrorAdd_UnexpectedArgumentReferenceKind("scroll", 1, "Unit, Class, Spot, StringVariableReader", argument.TokenId);
                                        argument.HasReference = false;
                                        break;
                                }
                            }
                            else
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("scroll", 1, "Unit, Class, Spot, StringVariableReader", argument.TokenId);
                            }
                        }

                        break;
                    case 2:
                        if (!argument.IsNumber)
                        {
                            argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                            argument.ReferenceId = result.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                            argument.HasReference = true;
                        }

                        argument = ref arguments[1];
                        if (!argument.IsNumber)
                        {
                            argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                            argument.ReferenceId = result.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                            argument.HasReference = true;
                        }

                        break;
                }
                break;
            case ActionKind.showSpotMark:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("showSpotMark", 1, "Unit, Power, Spot, StringVariableReader", argument.TokenId);
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("showSpotMark", 1, "Unit, Power, Spot, StringVariableReader", argument.TokenId);
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (!Unsafe.IsNullRef(ref track))
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Unit:
                                argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Unit;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Power:
                                argument.ReferenceId = result.PowerSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Power;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Spot:
                                argument.ReferenceId = result.SpotSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Spot;
                                argument.HasReference = true;
                                break;
                            default:
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("showSpotMark", 1, "Unit, Power, Spot, StringVariableReader", argument.TokenId);
                                argument.HasReference = false;
                                break;
                        }
                    }
                    else
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("showSpotMark", 1, "Unit, Power, Spot, StringVariableReader", argument.TokenId);
                    }
                }

                if (arguments.Length <= 1)
                {
                    break;
                }
                argument = ref arguments[1];
                if (!argument.IsNumber)
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("showSpotMark", 2, "Number", argument.TokenId);
                }

                break;
            case ActionKind.msg:
                switch (arguments.Length)
                {
                    case 1:
                        AddReferenceAndValidate_CompoundText(ref result, ref argument);

                        break;
                    case 2:
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("msg", 1, "Unit, Text, StringVariableReader", argument.TokenId);
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length == 1)
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("msg", 1, "Unit, Text, StringVariableReader", argument.TokenId);
                            }
                            else
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                            if (!Unsafe.IsNullRef(ref track))
                            {
                                switch (track.Kind)
                                {
                                    case ReferenceKind.Unit:
                                        argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Unit;
                                        argument.HasReference = true;
                                        break;
                                }
                            }
                        }

                        argument = ref arguments[1];
                        AddReferenceAndValidate_CompoundText(ref result, ref argument);

                        break;
                    case 3:
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("msg", 1, "Unit, Text, StringVariableReader", argument.TokenId);
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length == 1)
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("msg", 1, "Unit, Text, StringVariableReader", argument.TokenId);
                            }
                            else
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                            if (!Unsafe.IsNullRef(ref track))
                            {
                                switch (track.Kind)
                                {
                                    case ReferenceKind.Unit:
                                        argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Unit;
                                        argument.HasReference = true;
                                        break;
                                }
                            }
                        }

                        argument = ref arguments[1];
                        argument.ReferenceKind = ReferenceKind.face;
                        argument.ReferenceId = result.faceSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                        argument.HasReference = true;

                        argument = ref arguments[2];
                        AddReferenceAndValidate_CompoundText(ref result, ref argument);

                        break;
                }
                break;
            case ActionKind.msg2:
                switch (arguments.Length)
                {
                    case 1:
                        AddReferenceAndValidate_CompoundText(ref result, ref argument);

                        break;
                    case 2:
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("msg2", 1, "Unit, Text, StringVariableReader", argument.TokenId);
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length == 1)
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("msg2", 1, "Unit, Text, StringVariableReader", argument.TokenId);
                            }
                            else
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                            if (!Unsafe.IsNullRef(ref track))
                            {
                                switch (track.Kind)
                                {
                                    case ReferenceKind.Unit:
                                        argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Unit;
                                        argument.HasReference = true;
                                        break;
                                }
                            }
                        }

                        argument = ref arguments[1];
                        AddReferenceAndValidate_CompoundText(ref result, ref argument);

                        break;
                    case 3:
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("msg2", 1, "Unit, Text, StringVariableReader", argument.TokenId);
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length == 1)
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("msg2", 1, "Unit, Text, StringVariableReader", argument.TokenId);
                            }
                            else
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                            if (!Unsafe.IsNullRef(ref track))
                            {
                                switch (track.Kind)
                                {
                                    case ReferenceKind.Unit:
                                        argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Unit;
                                        argument.HasReference = true;
                                        break;
                                }
                            }
                        }

                        argument = ref arguments[1];
                        argument.ReferenceKind = ReferenceKind.face;
                        argument.ReferenceId = result.faceSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                        argument.HasReference = true;

                        argument = ref arguments[2];
                        AddReferenceAndValidate_CompoundText(ref result, ref argument);

                        break;
                }
                break;
            case ActionKind.talk:
                switch (arguments.Length)
                {
                    case 1:
                        AddReferenceAndValidate_CompoundText(ref result, ref argument);

                        break;
                    case 2:
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("talk", 1, "Unit, Text, StringVariableReader", argument.TokenId);
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length == 1)
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("talk", 1, "Unit, Text, StringVariableReader", argument.TokenId);
                            }
                            else
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                            if (!Unsafe.IsNullRef(ref track))
                            {
                                switch (track.Kind)
                                {
                                    case ReferenceKind.Unit:
                                        argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Unit;
                                        argument.HasReference = true;
                                        break;
                                }
                            }
                        }

                        argument = ref arguments[1];
                        AddReferenceAndValidate_CompoundText(ref result, ref argument);

                        break;
                    case 3:
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("talk", 1, "Unit, Text, StringVariableReader", argument.TokenId);
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length == 1)
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("talk", 1, "Unit, Text, StringVariableReader", argument.TokenId);
                            }
                            else
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                            if (!Unsafe.IsNullRef(ref track))
                            {
                                switch (track.Kind)
                                {
                                    case ReferenceKind.Unit:
                                        argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Unit;
                                        argument.HasReference = true;
                                        break;
                                }
                            }
                        }

                        argument = ref arguments[1];
                        argument.ReferenceKind = ReferenceKind.face;
                        argument.ReferenceId = result.faceSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                        argument.HasReference = true;

                        argument = ref arguments[2];
                        AddReferenceAndValidate_CompoundText(ref result, ref argument);

                        break;
                }
                break;
            case ActionKind.talk2:
                switch (arguments.Length)
                {
                    case 1:
                        AddReferenceAndValidate_CompoundText(ref result, ref argument);

                        break;
                    case 2:
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("talk2", 1, "Unit, Text, StringVariableReader", argument.TokenId);
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length == 1)
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("talk2", 1, "Unit, Text, StringVariableReader", argument.TokenId);
                            }
                            else
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                            if (!Unsafe.IsNullRef(ref track))
                            {
                                switch (track.Kind)
                                {
                                    case ReferenceKind.Unit:
                                        argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Unit;
                                        argument.HasReference = true;
                                        break;
                                }
                            }
                        }

                        argument = ref arguments[1];
                        AddReferenceAndValidate_CompoundText(ref result, ref argument);

                        break;
                    case 3:
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("talk2", 1, "Unit, Text, StringVariableReader", argument.TokenId);
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length == 1)
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("talk2", 1, "Unit, Text, StringVariableReader", argument.TokenId);
                            }
                            else
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                            if (!Unsafe.IsNullRef(ref track))
                            {
                                switch (track.Kind)
                                {
                                    case ReferenceKind.Unit:
                                        argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Unit;
                                        argument.HasReference = true;
                                        break;
                                }
                            }
                        }

                        argument = ref arguments[1];
                        argument.ReferenceKind = ReferenceKind.face;
                        argument.ReferenceId = result.faceSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                        argument.HasReference = true;

                        argument = ref arguments[2];
                        AddReferenceAndValidate_CompoundText(ref result, ref argument);

                        break;
                }
                break;
            case ActionKind.chat:
                switch (arguments.Length)
                {
                    case 1:
                        AddReferenceAndValidate_CompoundText(ref result, ref argument);

                        break;
                    case 2:
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("chat", 1, "Unit, Text, StringVariableReader", argument.TokenId);
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length == 1)
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("chat", 1, "Unit, Text, StringVariableReader", argument.TokenId);
                            }
                            else
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                            if (!Unsafe.IsNullRef(ref track))
                            {
                                switch (track.Kind)
                                {
                                    case ReferenceKind.Unit:
                                        argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Unit;
                                        argument.HasReference = true;
                                        break;
                                }
                            }
                        }

                        argument = ref arguments[1];
                        AddReferenceAndValidate_CompoundText(ref result, ref argument);

                        break;
                    case 3:
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("chat", 1, "Unit, Text, StringVariableReader", argument.TokenId);
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length == 1)
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("chat", 1, "Unit, Text, StringVariableReader", argument.TokenId);
                            }
                            else
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                            if (!Unsafe.IsNullRef(ref track))
                            {
                                switch (track.Kind)
                                {
                                    case ReferenceKind.Unit:
                                        argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Unit;
                                        argument.HasReference = true;
                                        break;
                                }
                            }
                        }

                        argument = ref arguments[1];
                        argument.ReferenceKind = ReferenceKind.face;
                        argument.ReferenceId = result.faceSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                        argument.HasReference = true;

                        argument = ref arguments[2];
                        AddReferenceAndValidate_CompoundText(ref result, ref argument);

                        break;
                }
                break;
            case ActionKind.chat2:
                switch (arguments.Length)
                {
                    case 1:
                        AddReferenceAndValidate_CompoundText(ref result, ref argument);

                        break;
                    case 2:
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("chat2", 1, "Unit, Text, StringVariableReader", argument.TokenId);
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length == 1)
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("chat2", 1, "Unit, Text, StringVariableReader", argument.TokenId);
                            }
                            else
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                            if (!Unsafe.IsNullRef(ref track))
                            {
                                switch (track.Kind)
                                {
                                    case ReferenceKind.Unit:
                                        argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Unit;
                                        argument.HasReference = true;
                                        break;
                                }
                            }
                        }

                        argument = ref arguments[1];
                        AddReferenceAndValidate_CompoundText(ref result, ref argument);

                        break;
                    case 3:
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("chat2", 1, "Unit, Text, StringVariableReader", argument.TokenId);
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length == 1)
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("chat2", 1, "Unit, Text, StringVariableReader", argument.TokenId);
                            }
                            else
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                            if (!Unsafe.IsNullRef(ref track))
                            {
                                switch (track.Kind)
                                {
                                    case ReferenceKind.Unit:
                                        argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Unit;
                                        argument.HasReference = true;
                                        break;
                                }
                            }
                        }

                        argument = ref arguments[1];
                        argument.ReferenceKind = ReferenceKind.face;
                        argument.ReferenceId = result.faceSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                        argument.HasReference = true;

                        argument = ref arguments[2];
                        AddReferenceAndValidate_CompoundText(ref result, ref argument);

                        break;
                }
                break;
            case ActionKind.changeMaster:
                switch (arguments.Length)
                {
                    case 1:
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("changeMaster", 1, "Unit", argument.TokenId);
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length != 1)
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.Unit;
                            argument.HasReference = true;
                        }

                        break;
                    case 2:
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("changeMaster", 1, "Unit, Power, StringVariableReader", argument.TokenId);
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length == 1)
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("changeMaster", 1, "Unit, Power, StringVariableReader", argument.TokenId);
                            }
                            else
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                            if (!Unsafe.IsNullRef(ref track))
                            {
                                switch (track.Kind)
                                {
                                    case ReferenceKind.Unit:
                                        argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Unit;
                                        argument.HasReference = true;
                                        break;
                                    case ReferenceKind.Power:
                                        argument.ReferenceId = result.PowerSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Power;
                                        argument.HasReference = true;
                                        break;
                                    default:
                                        result.ErrorAdd_UnexpectedArgumentReferenceKind("changeMaster", 1, "Unit, Power, StringVariableReader", argument.TokenId);
                                        argument.HasReference = false;
                                        break;
                                }
                            }
                            else
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("changeMaster", 1, "Unit, Power, StringVariableReader", argument.TokenId);
                            }
                        }

                        argument = ref arguments[1];
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("changeMaster", 2, "Unit", argument.TokenId);
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length != 1)
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.Unit;
                            argument.HasReference = true;
                        }

                        break;
                    case 3:
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("changeMaster", 1, "Unit", argument.TokenId);
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length != 1)
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.Unit;
                            argument.HasReference = true;
                        }

                        argument = ref arguments[1];
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("changeMaster", 2, "Unit", argument.TokenId);
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length != 1)
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.Unit;
                            argument.HasReference = true;
                        }

                        argument = ref arguments[2];
                        argument.ReferenceKind = ReferenceKind.flag;
                        argument.ReferenceId = result.flagSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                        argument.HasReference = true;

                        break;
                }
                break;
            case ActionKind.select:
                argument.ReferenceKind = ReferenceKind.NumberVariableWriter;
                argument.ReferenceId = result.NumberVariableWriterSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                argument.HasReference = true;

                argument = ref arguments[1];
                AddReferenceAndValidate_CompoundText(ref result, ref argument);

                break;
            case ActionKind.setPM:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("setPM", 1, "Unit", argument.TokenId);
                }
                else if (span[0] == '@')
                {
                    if (span.Length != 1)
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                    argument.ReferenceKind = ReferenceKind.Unit;
                    argument.HasReference = true;
                }

                argument = ref arguments[1];
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("setPM", 2, "Race, Unit, Class, StringVariableReader", argument.TokenId);
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("setPM", 2, "Race, Unit, Class, StringVariableReader", argument.TokenId);
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (!Unsafe.IsNullRef(ref track))
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Unit:
                                argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Unit;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Class:
                                argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Class;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Race:
                                argument.ReferenceId = result.RaceSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Race;
                                argument.HasReference = true;
                                break;
                            default:
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("setPM", 2, "Race, Unit, Class, StringVariableReader", argument.TokenId);
                                argument.HasReference = false;
                                break;
                        }
                    }
                    else
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("setPM", 2, "Race, Unit, Class, StringVariableReader", argument.TokenId);
                    }
                }

                break;
            case ActionKind.addMoney:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("addMoney", 1, "Unit, Power, StringVariableReader", argument.TokenId);
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("addMoney", 1, "Unit, Power, StringVariableReader", argument.TokenId);
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (!Unsafe.IsNullRef(ref track))
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Unit:
                                argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Unit;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Power:
                                argument.ReferenceId = result.PowerSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Power;
                                argument.HasReference = true;
                                break;
                            default:
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("addMoney", 1, "Unit, Power, StringVariableReader", argument.TokenId);
                                argument.HasReference = false;
                                break;
                        }
                    }
                    else
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("addMoney", 1, "Unit, Power, StringVariableReader", argument.TokenId);
                    }
                }

                argument = ref arguments[1];
                if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = result.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                break;
            case ActionKind.pushGain:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("pushGain", 1, "Power, Spot, StringVariableReader", argument.TokenId);
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("pushGain", 1, "Power, Spot, StringVariableReader", argument.TokenId);
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (!Unsafe.IsNullRef(ref track))
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Power:
                                argument.ReferenceId = result.PowerSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Power;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Spot:
                                argument.ReferenceId = result.SpotSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Spot;
                                argument.HasReference = true;
                                break;
                            default:
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("pushGain", 1, "Power, Spot, StringVariableReader", argument.TokenId);
                                argument.HasReference = false;
                                break;
                        }
                    }
                    else
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("pushGain", 1, "Power, Spot, StringVariableReader", argument.TokenId);
                    }
                }

                argument = ref arguments[1];
                argument.ReferenceKind = ReferenceKind.NumberVariableWriter;
                argument.ReferenceId = result.NumberVariableWriterSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                argument.HasReference = true;

                break;
            case ActionKind.setMoney:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("setMoney", 1, "Unit, Power, StringVariableReader", argument.TokenId);
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("setMoney", 1, "Unit, Power, StringVariableReader", argument.TokenId);
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (!Unsafe.IsNullRef(ref track))
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Unit:
                                argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Unit;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Power:
                                argument.ReferenceId = result.PowerSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Power;
                                argument.HasReference = true;
                                break;
                            default:
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("setMoney", 1, "Unit, Power, StringVariableReader", argument.TokenId);
                                argument.HasReference = false;
                                break;
                        }
                    }
                    else
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("setMoney", 1, "Unit, Power, StringVariableReader", argument.TokenId);
                    }
                }

                argument = ref arguments[1];
                if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = result.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                break;
            case ActionKind.formTroop:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("formTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("formTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (!Unsafe.IsNullRef(ref track))
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Unit:
                                argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Unit;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Class:
                                argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Class;
                                argument.HasReference = true;
                                break;
                            default:
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("formTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                                argument.HasReference = false;
                                break;
                        }
                    }
                    else
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("formTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                    }
                }

                argument = ref arguments[1];
                if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = result.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                break;
            case ActionKind.pushForce:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("pushForce", 1, "Unit, Power, StringVariableReader", argument.TokenId);
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("pushForce", 1, "Unit, Power, StringVariableReader", argument.TokenId);
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (!Unsafe.IsNullRef(ref track))
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Unit:
                                argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Unit;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Power:
                                argument.ReferenceId = result.PowerSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Power;
                                argument.HasReference = true;
                                break;
                            default:
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("pushForce", 1, "Unit, Power, StringVariableReader", argument.TokenId);
                                argument.HasReference = false;
                                break;
                        }
                    }
                    else
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("pushForce", 1, "Unit, Power, StringVariableReader", argument.TokenId);
                    }
                }

                argument = ref arguments[1];
                argument.ReferenceKind = ReferenceKind.NumberVariableWriter;
                argument.ReferenceId = result.NumberVariableWriterSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                argument.HasReference = true;

                break;
            case ActionKind.pushMoney:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("pushMoney", 1, "Unit, Power, StringVariableReader", argument.TokenId);
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("pushMoney", 1, "Unit, Power, StringVariableReader", argument.TokenId);
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (!Unsafe.IsNullRef(ref track))
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Unit:
                                argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Unit;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Power:
                                argument.ReferenceId = result.PowerSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Power;
                                argument.HasReference = true;
                                break;
                            default:
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("pushMoney", 1, "Unit, Power, StringVariableReader", argument.TokenId);
                                argument.HasReference = false;
                                break;
                        }
                    }
                    else
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("pushMoney", 1, "Unit, Power, StringVariableReader", argument.TokenId);
                    }
                }

                argument = ref arguments[1];
                argument.ReferenceKind = ReferenceKind.NumberVariableWriter;
                argument.ReferenceId = result.NumberVariableWriterSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                argument.HasReference = true;

                break;
            case ActionKind.pushTrust:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("pushTrust", 1, "Unit, Power, StringVariableReader", argument.TokenId);
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("pushTrust", 1, "Unit, Power, StringVariableReader", argument.TokenId);
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (!Unsafe.IsNullRef(ref track))
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Unit:
                                argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Unit;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Power:
                                argument.ReferenceId = result.PowerSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Power;
                                argument.HasReference = true;
                                break;
                            default:
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("pushTrust", 1, "Unit, Power, StringVariableReader", argument.TokenId);
                                argument.HasReference = false;
                                break;
                        }
                    }
                    else
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("pushTrust", 1, "Unit, Power, StringVariableReader", argument.TokenId);
                    }
                }

                argument = ref arguments[1];
                argument.ReferenceKind = ReferenceKind.NumberVariableWriter;
                argument.ReferenceId = result.NumberVariableWriterSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                argument.HasReference = true;

                break;
            case ActionKind.speedTroop:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("speedTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("speedTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (!Unsafe.IsNullRef(ref track))
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Unit:
                                argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Unit;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Class:
                                argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Class;
                                argument.HasReference = true;
                                break;
                            default:
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("speedTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                                argument.HasReference = false;
                                break;
                        }
                    }
                    else
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("speedTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                    }
                }

                argument = ref arguments[1];
                if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = result.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                break;
            case ActionKind.removeSkill:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("removeSkill", 1, "Unit", argument.TokenId);
                }
                else if (span[0] == '@')
                {
                    if (span.Length != 1)
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                    argument.ReferenceKind = ReferenceKind.Unit;
                    argument.HasReference = true;
                }

                argument = ref arguments[1];
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("removeSkill", 2, "Skill, Skillset, StringVariableReader", argument.TokenId);
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("removeSkill", 2, "Skill, Skillset, StringVariableReader", argument.TokenId);
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_SkillSkillset.TryGet(span);
                    if (Unsafe.IsNullRef(ref track))
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("removeSkill", 2, "Skill, Skillset, StringVariableReader", argument.TokenId);
                    }
                    else
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Skill:
                                argument.ReferenceId = result.SkillSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Skill;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Skillset:
                                argument.ReferenceId = result.SkillsetSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Skillset;
                                argument.HasReference = true;
                                break;
                            default:
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("removeSkill", 2, "Skill, Skillset, StringVariableReader", argument.TokenId);
                                argument.HasReference = false;
                                break;
                        }
                    }
                }

                break;
            case ActionKind.storeTodoUnit:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("storeTodoUnit", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("storeTodoUnit", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (!Unsafe.IsNullRef(ref track))
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Unit:
                                argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Unit;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Class:
                                argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Class;
                                argument.HasReference = true;
                                break;
                            default:
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("storeTodoUnit", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                                argument.HasReference = false;
                                break;
                        }
                    }
                    else
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("storeTodoUnit", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                    }
                }

                argument = ref arguments[1];
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("storeTodoUnit", 2, "StringVariableWriter", argument.TokenId);
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("storeTodoUnit", 2, "StringVariableWriter", argument.TokenId);
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableWriterSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.HasReference = true;
                    }
                    argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                }
                else
                {
                    if (DiagnosticSeverity.Warning <= RequiredSeverity)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("storeTodoUnit", 2, "StringVariableWriter", argument.TokenId);
                    }
                    argument.ReferenceId = result.StringVariableWriterSet.GetOrAdd(span, argument.TokenId);
                    argument.HasReference = true;
                    argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                }

                break;
            case ActionKind.storeAliveUnit:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("storeAliveUnit", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("storeAliveUnit", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (!Unsafe.IsNullRef(ref track))
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Unit:
                                argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Unit;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Class:
                                argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Class;
                                argument.HasReference = true;
                                break;
                            default:
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("storeAliveUnit", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                                argument.HasReference = false;
                                break;
                        }
                    }
                    else
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("storeAliveUnit", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                    }
                }

                argument = ref arguments[1];
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("storeAliveUnit", 2, "StringVariableWriter", argument.TokenId);
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("storeAliveUnit", 2, "StringVariableWriter", argument.TokenId);
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableWriterSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.HasReference = true;
                    }
                    argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                }
                else
                {
                    if (DiagnosticSeverity.Warning <= RequiredSeverity)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("storeAliveUnit", 2, "StringVariableWriter", argument.TokenId);
                    }
                    argument.ReferenceId = result.StringVariableWriterSet.GetOrAdd(span, argument.TokenId);
                    argument.HasReference = true;
                    argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                }

                break;
            case ActionKind.changePowerFlag:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("changePowerFlag", 1, "Power", argument.TokenId);
                }
                else if (span[0] == '@')
                {
                    if (span.Length != 1)
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    argument.ReferenceId = result.PowerSet.GetOrAdd(span, argument.TokenId);
                    argument.ReferenceKind = ReferenceKind.Power;
                    argument.HasReference = true;
                }

                // ERROR 0

                break;
            case ActionKind.choice:
                argument.ReferenceKind = ReferenceKind.NumberVariableWriter;
                argument.ReferenceId = result.NumberVariableWriterSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                argument.HasReference = true;

                argument = ref arguments[1];
                AddReferenceAndValidate_CompoundText(ref result, ref argument);

                for (int i = 2; i < arguments.Length; ++i)
                {
                    argument = ref arguments[i];
                    AddReferenceAndValidate_CompoundText(ref result, ref argument);

                }
                break;
            case ActionKind.addFriend:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("addFriend", 1, "Unit", argument.TokenId);
                }
                else if (span[0] == '@')
                {
                    if (span.Length != 1)
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                    argument.ReferenceKind = ReferenceKind.Unit;
                    argument.HasReference = true;
                }

                argument = ref arguments[1];
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("addFriend", 2, "Race, Unit, Class, StringVariableReader", argument.TokenId);
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("addFriend", 2, "Race, Unit, Class, StringVariableReader", argument.TokenId);
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (!Unsafe.IsNullRef(ref track))
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Unit:
                                argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Unit;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Class:
                                argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Class;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Race:
                                argument.ReferenceId = result.RaceSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Race;
                                argument.HasReference = true;
                                break;
                            default:
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("addFriend", 2, "Race, Unit, Class, StringVariableReader", argument.TokenId);
                                argument.HasReference = false;
                                break;
                        }
                    }
                    else
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("addFriend", 2, "Race, Unit, Class, StringVariableReader", argument.TokenId);
                    }
                }

                for (int i = 2; i < arguments.Length; ++i)
                {
                    argument = ref arguments[i];
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("addFriend", i + 1, "Race, Unit, Class, StringVariableReader", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length == 1)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("addFriend", i + 1, "Race, Unit, Class, StringVariableReader", argument.TokenId);
                        }
                        else
                        {
                            argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                        if (!Unsafe.IsNullRef(ref track))
                        {
                            switch (track.Kind)
                            {
                                case ReferenceKind.Unit:
                                    argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                    argument.ReferenceKind = ReferenceKind.Unit;
                                    argument.HasReference = true;
                                    break;
                                case ReferenceKind.Class:
                                    argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                    argument.ReferenceKind = ReferenceKind.Class;
                                    argument.HasReference = true;
                                    break;
                                case ReferenceKind.Race:
                                    argument.ReferenceId = result.RaceSet.GetOrAdd(span, argument.TokenId);
                                    argument.ReferenceKind = ReferenceKind.Race;
                                    argument.HasReference = true;
                                    break;
                                default:
                                    result.ErrorAdd_UnexpectedArgumentReferenceKind("addFriend", i + 1, "Race, Unit, Class, StringVariableReader", argument.TokenId);
                                    argument.HasReference = false;
                                    break;
                            }
                        }
                        else
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("addFriend", i + 1, "Race, Unit, Class, StringVariableReader", argument.TokenId);
                        }
                    }

                }
                break;
            case ActionKind.eraseUnit2:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("eraseUnit2", 1, "Power, Spot, StringVariableReader", argument.TokenId);
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("eraseUnit2", 1, "Power, Spot, StringVariableReader", argument.TokenId);
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (!Unsafe.IsNullRef(ref track))
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Power:
                                argument.ReferenceId = result.PowerSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Power;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Spot:
                                argument.ReferenceId = result.SpotSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Spot;
                                argument.HasReference = true;
                                break;
                            default:
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("eraseUnit2", 1, "Power, Spot, StringVariableReader", argument.TokenId);
                                argument.HasReference = false;
                                break;
                        }
                    }
                    else
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("eraseUnit2", 1, "Power, Spot, StringVariableReader", argument.TokenId);
                    }
                }

                argument = ref arguments[1];
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("eraseUnit2", 2, "Unit", argument.TokenId);
                }
                else if (span[0] == '@')
                {
                    if (span.Length != 1)
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                    argument.ReferenceKind = ReferenceKind.Unit;
                    argument.HasReference = true;
                }

                for (int i = 2; i < arguments.Length; ++i)
                {
                    argument = ref arguments[i];
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("eraseUnit2", i + 1, "Unit", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Unit;
                        argument.HasReference = true;
                    }

                }
                break;
            case ActionKind.addPowerMerce:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("addPowerMerce", 1, "Power", argument.TokenId);
                }
                else if (span[0] == '@')
                {
                    if (span.Length != 1)
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    argument.ReferenceId = result.PowerSet.GetOrAdd(span, argument.TokenId);
                    argument.ReferenceKind = ReferenceKind.Power;
                    argument.HasReference = true;
                }

                argument = ref arguments[1];
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("addPowerMerce", 2, "Race, Unit, Class, StringVariableReader", argument.TokenId);
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("addPowerMerce", 2, "Race, Unit, Class, StringVariableReader", argument.TokenId);
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (!Unsafe.IsNullRef(ref track))
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Unit:
                                argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Unit;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Class:
                                argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Class;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Race:
                                argument.ReferenceId = result.RaceSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Race;
                                argument.HasReference = true;
                                break;
                            default:
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("addPowerMerce", 2, "Race, Unit, Class, StringVariableReader", argument.TokenId);
                                argument.HasReference = false;
                                break;
                        }
                    }
                    else
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("addPowerMerce", 2, "Race, Unit, Class, StringVariableReader", argument.TokenId);
                    }
                }

                for (int i = 2; i < arguments.Length; ++i)
                {
                    argument = ref arguments[i];
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("addPowerMerce", i + 1, "Race, Unit, Class, StringVariableReader", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length == 1)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("addPowerMerce", i + 1, "Race, Unit, Class, StringVariableReader", argument.TokenId);
                        }
                        else
                        {
                            argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                        if (!Unsafe.IsNullRef(ref track))
                        {
                            switch (track.Kind)
                            {
                                case ReferenceKind.Unit:
                                    argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                    argument.ReferenceKind = ReferenceKind.Unit;
                                    argument.HasReference = true;
                                    break;
                                case ReferenceKind.Class:
                                    argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                    argument.ReferenceKind = ReferenceKind.Class;
                                    argument.HasReference = true;
                                    break;
                                case ReferenceKind.Race:
                                    argument.ReferenceId = result.RaceSet.GetOrAdd(span, argument.TokenId);
                                    argument.ReferenceKind = ReferenceKind.Race;
                                    argument.HasReference = true;
                                    break;
                                default:
                                    result.ErrorAdd_UnexpectedArgumentReferenceKind("addPowerMerce", i + 1, "Race, Unit, Class, StringVariableReader", argument.TokenId);
                                    argument.HasReference = false;
                                    break;
                            }
                        }
                        else
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("addPowerMerce", i + 1, "Race, Unit, Class, StringVariableReader", argument.TokenId);
                        }
                    }

                }
                break;
            case ActionKind.addPowerStaff:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("addPowerStaff", 1, "Power", argument.TokenId);
                }
                else if (span[0] == '@')
                {
                    if (span.Length != 1)
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    argument.ReferenceId = result.PowerSet.GetOrAdd(span, argument.TokenId);
                    argument.ReferenceKind = ReferenceKind.Power;
                    argument.HasReference = true;
                }

                argument = ref arguments[1];
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("addPowerStaff", 2, "Race, Unit, Class, StringVariableReader", argument.TokenId);
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("addPowerStaff", 2, "Race, Unit, Class, StringVariableReader", argument.TokenId);
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (!Unsafe.IsNullRef(ref track))
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Unit:
                                argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Unit;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Class:
                                argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Class;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Race:
                                argument.ReferenceId = result.RaceSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Race;
                                argument.HasReference = true;
                                break;
                            default:
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("addPowerStaff", 2, "Race, Unit, Class, StringVariableReader", argument.TokenId);
                                argument.HasReference = false;
                                break;
                        }
                    }
                    else
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("addPowerStaff", 2, "Race, Unit, Class, StringVariableReader", argument.TokenId);
                    }
                }

                for (int i = 2; i < arguments.Length; ++i)
                {
                    argument = ref arguments[i];
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("addPowerStaff", i + 1, "Race, Unit, Class, StringVariableReader", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length == 1)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("addPowerStaff", i + 1, "Race, Unit, Class, StringVariableReader", argument.TokenId);
                        }
                        else
                        {
                            argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                        if (!Unsafe.IsNullRef(ref track))
                        {
                            switch (track.Kind)
                            {
                                case ReferenceKind.Unit:
                                    argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                    argument.ReferenceKind = ReferenceKind.Unit;
                                    argument.HasReference = true;
                                    break;
                                case ReferenceKind.Class:
                                    argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                    argument.ReferenceKind = ReferenceKind.Class;
                                    argument.HasReference = true;
                                    break;
                                case ReferenceKind.Race:
                                    argument.ReferenceId = result.RaceSet.GetOrAdd(span, argument.TokenId);
                                    argument.ReferenceKind = ReferenceKind.Race;
                                    argument.HasReference = true;
                                    break;
                                default:
                                    result.ErrorAdd_UnexpectedArgumentReferenceKind("addPowerStaff", i + 1, "Race, Unit, Class, StringVariableReader", argument.TokenId);
                                    argument.HasReference = false;
                                    break;
                            }
                        }
                        else
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("addPowerStaff", i + 1, "Race, Unit, Class, StringVariableReader", argument.TokenId);
                        }
                    }

                }
                break;
            case ActionKind.addPowerMerce2:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("addPowerMerce2", 1, "Power", argument.TokenId);
                }
                else if (span[0] == '@')
                {
                    if (span.Length != 1)
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    argument.ReferenceId = result.PowerSet.GetOrAdd(span, argument.TokenId);
                    argument.ReferenceKind = ReferenceKind.Power;
                    argument.HasReference = true;
                }

                argument = ref arguments[1];
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("addPowerMerce2", 2, "Race, Unit, Class, StringVariableReader", argument.TokenId);
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("addPowerMerce2", 2, "Race, Unit, Class, StringVariableReader", argument.TokenId);
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (!Unsafe.IsNullRef(ref track))
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Unit:
                                argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Unit;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Class:
                                argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Class;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Race:
                                argument.ReferenceId = result.RaceSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Race;
                                argument.HasReference = true;
                                break;
                            default:
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("addPowerMerce2", 2, "Race, Unit, Class, StringVariableReader", argument.TokenId);
                                argument.HasReference = false;
                                break;
                        }
                    }
                    else
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("addPowerMerce2", 2, "Race, Unit, Class, StringVariableReader", argument.TokenId);
                    }
                }

                for (int i = 2; i < arguments.Length; ++i)
                {
                    argument = ref arguments[i];
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("addPowerMerce2", i + 1, "Race, Unit, Class, StringVariableReader", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length == 1)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("addPowerMerce2", i + 1, "Race, Unit, Class, StringVariableReader", argument.TokenId);
                        }
                        else
                        {
                            argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                        if (!Unsafe.IsNullRef(ref track))
                        {
                            switch (track.Kind)
                            {
                                case ReferenceKind.Unit:
                                    argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                    argument.ReferenceKind = ReferenceKind.Unit;
                                    argument.HasReference = true;
                                    break;
                                case ReferenceKind.Class:
                                    argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                    argument.ReferenceKind = ReferenceKind.Class;
                                    argument.HasReference = true;
                                    break;
                                case ReferenceKind.Race:
                                    argument.ReferenceId = result.RaceSet.GetOrAdd(span, argument.TokenId);
                                    argument.ReferenceKind = ReferenceKind.Race;
                                    argument.HasReference = true;
                                    break;
                                default:
                                    result.ErrorAdd_UnexpectedArgumentReferenceKind("addPowerMerce2", i + 1, "Race, Unit, Class, StringVariableReader", argument.TokenId);
                                    argument.HasReference = false;
                                    break;
                            }
                        }
                        else
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("addPowerMerce2", i + 1, "Race, Unit, Class, StringVariableReader", argument.TokenId);
                        }
                    }

                }
                break;
            case ActionKind.addPowerStaff2:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("addPowerStaff2", 1, "Power", argument.TokenId);
                }
                else if (span[0] == '@')
                {
                    if (span.Length != 1)
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    argument.ReferenceId = result.PowerSet.GetOrAdd(span, argument.TokenId);
                    argument.ReferenceKind = ReferenceKind.Power;
                    argument.HasReference = true;
                }

                argument = ref arguments[1];
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("addPowerStaff2", 2, "Race, Unit, Class, StringVariableReader", argument.TokenId);
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("addPowerStaff2", 2, "Race, Unit, Class, StringVariableReader", argument.TokenId);
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (!Unsafe.IsNullRef(ref track))
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Unit:
                                argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Unit;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Class:
                                argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Class;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Race:
                                argument.ReferenceId = result.RaceSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Race;
                                argument.HasReference = true;
                                break;
                            default:
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("addPowerStaff2", 2, "Race, Unit, Class, StringVariableReader", argument.TokenId);
                                argument.HasReference = false;
                                break;
                        }
                    }
                    else
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("addPowerStaff2", 2, "Race, Unit, Class, StringVariableReader", argument.TokenId);
                    }
                }

                for (int i = 2; i < arguments.Length; ++i)
                {
                    argument = ref arguments[i];
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("addPowerStaff2", i + 1, "Race, Unit, Class, StringVariableReader", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length == 1)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("addPowerStaff2", i + 1, "Race, Unit, Class, StringVariableReader", argument.TokenId);
                        }
                        else
                        {
                            argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                        if (!Unsafe.IsNullRef(ref track))
                        {
                            switch (track.Kind)
                            {
                                case ReferenceKind.Unit:
                                    argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                    argument.ReferenceKind = ReferenceKind.Unit;
                                    argument.HasReference = true;
                                    break;
                                case ReferenceKind.Class:
                                    argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                    argument.ReferenceKind = ReferenceKind.Class;
                                    argument.HasReference = true;
                                    break;
                                case ReferenceKind.Race:
                                    argument.ReferenceId = result.RaceSet.GetOrAdd(span, argument.TokenId);
                                    argument.ReferenceKind = ReferenceKind.Race;
                                    argument.HasReference = true;
                                    break;
                                default:
                                    result.ErrorAdd_UnexpectedArgumentReferenceKind("addPowerStaff2", i + 1, "Race, Unit, Class, StringVariableReader", argument.TokenId);
                                    argument.HasReference = false;
                                    break;
                            }
                        }
                        else
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("addPowerStaff2", i + 1, "Race, Unit, Class, StringVariableReader", argument.TokenId);
                        }
                    }

                }
                break;
            case ActionKind.exit:
                if (arguments.Length <= 0)
                {
                    break;
                }
                if (argument.IsNumber)
                {
                    if (argument.Number != 0)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("exit", 1, "Number, CompoundText", argument.TokenId);                    }
                }
                else
                {
                    AddReferenceAndValidate_CompoundText(ref result, ref argument);
                }

                break;
            case ActionKind.scroll2:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("scroll2", 1, "Unit, Class, Spot, StringVariableReader", argument.TokenId);
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("scroll2", 1, "Unit, Class, Spot, StringVariableReader", argument.TokenId);
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (!Unsafe.IsNullRef(ref track))
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Unit:
                                argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Unit;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Class:
                                argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Class;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Spot:
                                argument.ReferenceId = result.SpotSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Spot;
                                argument.HasReference = true;
                                break;
                            default:
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("scroll2", 1, "Unit, Class, Spot, StringVariableReader", argument.TokenId);
                                argument.HasReference = false;
                                break;
                        }
                    }
                    else
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("scroll2", 1, "Unit, Class, Spot, StringVariableReader", argument.TokenId);
                    }
                }

                break;
            case ActionKind.ctrlTroop:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("ctrlTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("ctrlTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (!Unsafe.IsNullRef(ref track))
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Unit:
                                argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Unit;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Class:
                                argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Class;
                                argument.HasReference = true;
                                break;
                            default:
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("ctrlTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                                argument.HasReference = false;
                                break;
                        }
                    }
                    else
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("ctrlTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                    }
                }

                break;
            case ActionKind.freeTroop:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("freeTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("freeTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (!Unsafe.IsNullRef(ref track))
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Unit:
                                argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Unit;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Class:
                                argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Class;
                                argument.HasReference = true;
                                break;
                            default:
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("freeTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                                argument.HasReference = false;
                                break;
                        }
                    }
                    else
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("freeTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                    }
                }

                break;
            case ActionKind.haltTroop:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("haltTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("haltTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (!Unsafe.IsNullRef(ref track))
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Unit:
                                argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Unit;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Class:
                                argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Class;
                                argument.HasReference = true;
                                break;
                            default:
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("haltTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                                argument.HasReference = false;
                                break;
                        }
                    }
                    else
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("haltTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                    }
                }

                break;
            case ActionKind.eraseTroop:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("eraseTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("eraseTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (!Unsafe.IsNullRef(ref track))
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Unit:
                                argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Unit;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Class:
                                argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Class;
                                argument.HasReference = true;
                                break;
                            default:
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("eraseTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                                argument.HasReference = false;
                                break;
                        }
                    }
                    else
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("eraseTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                    }
                }

                break;
            case ActionKind.sleepTroop:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("sleepTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("sleepTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (!Unsafe.IsNullRef(ref track))
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Unit:
                                argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Unit;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Class:
                                argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Class;
                                argument.HasReference = true;
                                break;
                            default:
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("sleepTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                                argument.HasReference = false;
                                break;
                        }
                    }
                    else
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("sleepTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                    }
                }

                break;
            case ActionKind.activeTroop:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("activeTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("activeTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (!Unsafe.IsNullRef(ref track))
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Unit:
                                argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Unit;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Class:
                                argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Class;
                                argument.HasReference = true;
                                break;
                            default:
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("activeTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                                argument.HasReference = false;
                                break;
                        }
                    }
                    else
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("activeTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                    }
                }

                break;
            case ActionKind.removeTroop:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("removeTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("removeTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (!Unsafe.IsNullRef(ref track))
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Unit:
                                argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Unit;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Class:
                                argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Class;
                                argument.HasReference = true;
                                break;
                            default:
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("removeTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                                argument.HasReference = false;
                                break;
                        }
                    }
                    else
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("removeTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                    }
                }

                break;
            case ActionKind.unctrlTroop:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("unctrlTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("unctrlTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (!Unsafe.IsNullRef(ref track))
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Unit:
                                argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Unit;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Class:
                                argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Class;
                                argument.HasReference = true;
                                break;
                            default:
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("unctrlTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                                argument.HasReference = false;
                                break;
                        }
                    }
                    else
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("unctrlTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                    }
                }

                break;
            case ActionKind.retreatTroop:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("retreatTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("retreatTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (!Unsafe.IsNullRef(ref track))
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Unit:
                                argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Unit;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Class:
                                argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Class;
                                argument.HasReference = true;
                                break;
                            default:
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("retreatTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                                argument.HasReference = false;
                                break;
                        }
                    }
                    else
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("retreatTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                    }
                }

                break;
            case ActionKind.eraseUnitTroop:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("eraseUnitTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("eraseUnitTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (!Unsafe.IsNullRef(ref track))
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Unit:
                                argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Unit;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Class:
                                argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Class;
                                argument.HasReference = true;
                                break;
                            default:
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("eraseUnitTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                                argument.HasReference = false;
                                break;
                        }
                    }
                    else
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("eraseUnitTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                    }
                }

                break;
            case ActionKind.aimTroop:
                switch (arguments.Length)
                {
                    case 2:
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("aimTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length == 1)
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("aimTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                            }
                            else
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                            if (!Unsafe.IsNullRef(ref track))
                            {
                                switch (track.Kind)
                                {
                                    case ReferenceKind.Unit:
                                        argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Unit;
                                        argument.HasReference = true;
                                        break;
                                    case ReferenceKind.Class:
                                        argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Class;
                                        argument.HasReference = true;
                                        break;
                                    default:
                                        result.ErrorAdd_UnexpectedArgumentReferenceKind("aimTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                                        argument.HasReference = false;
                                        break;
                                }
                            }
                            else
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("aimTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                            }
                        }

                        argument = ref arguments[1];
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("aimTroop", 2, "Unit, Class, StringVariableReader", argument.TokenId);
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length == 1)
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("aimTroop", 2, "Unit, Class, StringVariableReader", argument.TokenId);
                            }
                            else
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                            if (!Unsafe.IsNullRef(ref track))
                            {
                                switch (track.Kind)
                                {
                                    case ReferenceKind.Unit:
                                        argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Unit;
                                        argument.HasReference = true;
                                        break;
                                    case ReferenceKind.Class:
                                        argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Class;
                                        argument.HasReference = true;
                                        break;
                                    default:
                                        result.ErrorAdd_UnexpectedArgumentReferenceKind("aimTroop", 2, "Unit, Class, StringVariableReader", argument.TokenId);
                                        argument.HasReference = false;
                                        break;
                                }
                            }
                            else
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("aimTroop", 2, "Unit, Class, StringVariableReader", argument.TokenId);
                            }
                        }

                        break;
                    case 3:
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("aimTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length == 1)
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("aimTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                            }
                            else
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                            if (!Unsafe.IsNullRef(ref track))
                            {
                                switch (track.Kind)
                                {
                                    case ReferenceKind.Unit:
                                        argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Unit;
                                        argument.HasReference = true;
                                        break;
                                    case ReferenceKind.Class:
                                        argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Class;
                                        argument.HasReference = true;
                                        break;
                                    default:
                                        result.ErrorAdd_UnexpectedArgumentReferenceKind("aimTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                                        argument.HasReference = false;
                                        break;
                                }
                            }
                            else
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("aimTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                            }
                        }

                        argument = ref arguments[1];
                        if (!argument.IsNumber)
                        {
                            argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                            argument.ReferenceId = result.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                            argument.HasReference = true;
                        }

                        argument = ref arguments[2];
                        if (!argument.IsNumber)
                        {
                            argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                            argument.ReferenceId = result.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                            argument.HasReference = true;
                        }

                        break;
                }
                break;
            case ActionKind.pushCon:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("pushCon", 1, "Spot", argument.TokenId);
                }
                else if (span[0] == '@')
                {
                    if (span.Length != 1)
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    argument.ReferenceId = result.SpotSet.GetOrAdd(span, argument.TokenId);
                    argument.ReferenceKind = ReferenceKind.Spot;
                    argument.HasReference = true;
                }

                argument = ref arguments[1];
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("pushCon", 2, "Unit, Class, StringVariableReader", argument.TokenId);
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("pushCon", 2, "Unit, Class, StringVariableReader", argument.TokenId);
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (!Unsafe.IsNullRef(ref track))
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Unit:
                                argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Unit;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Class:
                                argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Class;
                                argument.HasReference = true;
                                break;
                            default:
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("pushCon", 2, "Unit, Class, StringVariableReader", argument.TokenId);
                                argument.HasReference = false;
                                break;
                        }
                    }
                    else
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("pushCon", 2, "Unit, Class, StringVariableReader", argument.TokenId);
                    }
                }

                argument = ref arguments[2];
                argument.ReferenceKind = ReferenceKind.NumberVariableWriter;
                argument.ReferenceId = result.NumberVariableWriterSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                argument.HasReference = true;

                break;
            case ActionKind.addTroop:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("addTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("addTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (!Unsafe.IsNullRef(ref track))
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Unit:
                                argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Unit;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Class:
                                argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Class;
                                argument.HasReference = true;
                                break;
                            default:
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("addTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                                argument.HasReference = false;
                                break;
                        }
                    }
                    else
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("addTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                    }
                }

                argument = ref arguments[1];
                if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = result.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                argument = ref arguments[2];
                if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = result.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                argument = ref arguments[3];
                if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = result.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                // ERROR 1
                break;
            case ActionKind.stopTroop:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("stopTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("stopTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (!Unsafe.IsNullRef(ref track))
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Unit:
                                argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Unit;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Class:
                                argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Class;
                                argument.HasReference = true;
                                break;
                            default:
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("stopTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                                argument.HasReference = false;
                                break;
                        }
                    }
                    else
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("stopTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                    }
                }

                for (int i = 1; i < arguments.Length; ++i)
                {
                    argument = ref arguments[i];
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("stopTroop", i + 1, "Unit, Class, StringVariableReader", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length == 1)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("stopTroop", i + 1, "Unit, Class, StringVariableReader", argument.TokenId);
                        }
                        else
                        {
                            argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                        if (!Unsafe.IsNullRef(ref track))
                        {
                            switch (track.Kind)
                            {
                                case ReferenceKind.Unit:
                                    argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                    argument.ReferenceKind = ReferenceKind.Unit;
                                    argument.HasReference = true;
                                    break;
                                case ReferenceKind.Class:
                                    argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                    argument.ReferenceKind = ReferenceKind.Class;
                                    argument.HasReference = true;
                                    break;
                                default:
                                    result.ErrorAdd_UnexpectedArgumentReferenceKind("stopTroop", i + 1, "Unit, Class, StringVariableReader", argument.TokenId);
                                    argument.HasReference = false;
                                    break;
                            }
                        }
                        else
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("stopTroop", i + 1, "Unit, Class, StringVariableReader", argument.TokenId);
                        }
                    }

                }
                break;
            case ActionKind.eraseSkill:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("eraseSkill", 1, "Unit", argument.TokenId);
                }
                else if (span[0] == '@')
                {
                    if (span.Length != 1)
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                    argument.ReferenceKind = ReferenceKind.Unit;
                    argument.HasReference = true;
                }

                if (arguments.Length <= 1)
                {
                    break;
                }
                argument = ref arguments[1];
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("eraseSkill", 2, "Skill, Skillset, StringVariableReader", argument.TokenId);
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("eraseSkill", 2, "Skill, Skillset, StringVariableReader", argument.TokenId);
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_SkillSkillset.TryGet(span);
                    if (Unsafe.IsNullRef(ref track))
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("eraseSkill", 2, "Skill, Skillset, StringVariableReader", argument.TokenId);
                    }
                    else
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Skill:
                                argument.ReferenceId = result.SkillSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Skill;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Skillset:
                                argument.ReferenceId = result.SkillsetSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Skillset;
                                argument.HasReference = true;
                                break;
                            default:
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("eraseSkill", 2, "Skill, Skillset, StringVariableReader", argument.TokenId);
                                argument.HasReference = false;
                                break;
                        }
                    }
                }

                for (int i = 2; i < arguments.Length; ++i)
                {
                    argument = ref arguments[i];
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("eraseSkill", i + 1, "Skill, Skillset, StringVariableReader", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length == 1)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("eraseSkill", i + 1, "Skill, Skillset, StringVariableReader", argument.TokenId);
                        }
                        else
                        {
                            argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        ref var track = ref AmbiguousDictionary_SkillSkillset.TryGet(span);
                        if (Unsafe.IsNullRef(ref track))
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("eraseSkill", i + 1, "Skill, Skillset, StringVariableReader", argument.TokenId);
                        }
                        else
                        {
                            switch (track.Kind)
                            {
                                case ReferenceKind.Skill:
                                    argument.ReferenceId = result.SkillSet.GetOrAdd(span, argument.TokenId);
                                    argument.ReferenceKind = ReferenceKind.Skill;
                                    argument.HasReference = true;
                                    break;
                                case ReferenceKind.Skillset:
                                    argument.ReferenceId = result.SkillsetSet.GetOrAdd(span, argument.TokenId);
                                    argument.ReferenceKind = ReferenceKind.Skillset;
                                    argument.HasReference = true;
                                    break;
                                default:
                                    result.ErrorAdd_UnexpectedArgumentReferenceKind("eraseSkill", i + 1, "Skill, Skillset, StringVariableReader", argument.TokenId);
                                    argument.HasReference = false;
                                    break;
                            }
                        }
                    }

                }
                break;
            case ActionKind.eraseFriend:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("eraseFriend", 1, "Unit", argument.TokenId);
                }
                else if (span[0] == '@')
                {
                    if (span.Length != 1)
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                    argument.ReferenceKind = ReferenceKind.Unit;
                    argument.HasReference = true;
                }

                if (arguments.Length <= 1)
                {
                    break;
                }
                argument = ref arguments[1];
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("eraseFriend", 2, "Race, Unit, Class, StringVariableReader", argument.TokenId);
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("eraseFriend", 2, "Race, Unit, Class, StringVariableReader", argument.TokenId);
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (!Unsafe.IsNullRef(ref track))
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Unit:
                                argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Unit;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Class:
                                argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Class;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Race:
                                argument.ReferenceId = result.RaceSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Race;
                                argument.HasReference = true;
                                break;
                            default:
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("eraseFriend", 2, "Race, Unit, Class, StringVariableReader", argument.TokenId);
                                argument.HasReference = false;
                                break;
                        }
                    }
                    else
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("eraseFriend", 2, "Race, Unit, Class, StringVariableReader", argument.TokenId);
                    }
                }

                for (int i = 2; i < arguments.Length; ++i)
                {
                    argument = ref arguments[i];
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("eraseFriend", i + 1, "Race, Unit, Class, StringVariableReader", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length == 1)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("eraseFriend", i + 1, "Race, Unit, Class, StringVariableReader", argument.TokenId);
                        }
                        else
                        {
                            argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                        if (!Unsafe.IsNullRef(ref track))
                        {
                            switch (track.Kind)
                            {
                                case ReferenceKind.Unit:
                                    argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                    argument.ReferenceKind = ReferenceKind.Unit;
                                    argument.HasReference = true;
                                    break;
                                case ReferenceKind.Class:
                                    argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                    argument.ReferenceKind = ReferenceKind.Class;
                                    argument.HasReference = true;
                                    break;
                                case ReferenceKind.Race:
                                    argument.ReferenceId = result.RaceSet.GetOrAdd(span, argument.TokenId);
                                    argument.ReferenceKind = ReferenceKind.Race;
                                    argument.HasReference = true;
                                    break;
                                default:
                                    result.ErrorAdd_UnexpectedArgumentReferenceKind("eraseFriend", i + 1, "Race, Unit, Class, StringVariableReader", argument.TokenId);
                                    argument.HasReference = false;
                                    break;
                            }
                        }
                        else
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("eraseFriend", i + 1, "Race, Unit, Class, StringVariableReader", argument.TokenId);
                        }
                    }

                }
                break;
            case ActionKind.moveTroop:
                switch (arguments.Length)
                {
                    case 2:
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("moveTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length == 1)
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("moveTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                            }
                            else
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                            if (!Unsafe.IsNullRef(ref track))
                            {
                                switch (track.Kind)
                                {
                                    case ReferenceKind.Unit:
                                        argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Unit;
                                        argument.HasReference = true;
                                        break;
                                    case ReferenceKind.Class:
                                        argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Class;
                                        argument.HasReference = true;
                                        break;
                                    default:
                                        result.ErrorAdd_UnexpectedArgumentReferenceKind("moveTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                                        argument.HasReference = false;
                                        break;
                                }
                            }
                            else
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("moveTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                            }
                        }

                        argument = ref arguments[1];
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("moveTroop", 2, "Unit, Class, StringVariableReader", argument.TokenId);
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length == 1)
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("moveTroop", 2, "Unit, Class, StringVariableReader", argument.TokenId);
                            }
                            else
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                            if (!Unsafe.IsNullRef(ref track))
                            {
                                switch (track.Kind)
                                {
                                    case ReferenceKind.Unit:
                                        argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Unit;
                                        argument.HasReference = true;
                                        break;
                                    case ReferenceKind.Class:
                                        argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Class;
                                        argument.HasReference = true;
                                        break;
                                    default:
                                        result.ErrorAdd_UnexpectedArgumentReferenceKind("moveTroop", 2, "Unit, Class, StringVariableReader", argument.TokenId);
                                        argument.HasReference = false;
                                        break;
                                }
                            }
                            else
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("moveTroop", 2, "Unit, Class, StringVariableReader", argument.TokenId);
                            }
                        }

                        break;
                    case 3:
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("moveTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length == 1)
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("moveTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                            }
                            else
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                            if (!Unsafe.IsNullRef(ref track))
                            {
                                switch (track.Kind)
                                {
                                    case ReferenceKind.Unit:
                                        argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Unit;
                                        argument.HasReference = true;
                                        break;
                                    case ReferenceKind.Class:
                                        argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Class;
                                        argument.HasReference = true;
                                        break;
                                    default:
                                        result.ErrorAdd_UnexpectedArgumentReferenceKind("moveTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                                        argument.HasReference = false;
                                        break;
                                }
                            }
                            else
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("moveTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                            }
                        }

                        argument = ref arguments[1];
                        if (!argument.IsNumber)
                        {
                            argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                            argument.ReferenceId = result.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                            argument.HasReference = true;
                        }

                        argument = ref arguments[2];
                        if (!argument.IsNumber)
                        {
                            argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                            argument.ReferenceId = result.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                            argument.HasReference = true;
                        }

                        break;
                    case 4:
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("moveTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length == 1)
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("moveTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                            }
                            else
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                            if (!Unsafe.IsNullRef(ref track))
                            {
                                switch (track.Kind)
                                {
                                    case ReferenceKind.Unit:
                                        argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Unit;
                                        argument.HasReference = true;
                                        break;
                                    case ReferenceKind.Class:
                                        argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Class;
                                        argument.HasReference = true;
                                        break;
                                    default:
                                        result.ErrorAdd_UnexpectedArgumentReferenceKind("moveTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                                        argument.HasReference = false;
                                        break;
                                }
                            }
                            else
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("moveTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                            }
                        }

                        argument = ref arguments[1];
                        if (!argument.IsNumber)
                        {
                            argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                            argument.ReferenceId = result.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                            argument.HasReference = true;
                        }

                        argument = ref arguments[2];
                        if (!argument.IsNumber)
                        {
                            argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                            argument.ReferenceId = result.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                            argument.HasReference = true;
                        }

                        argument = ref arguments[3];
                        if (!argument.IsNumber)
                        {
                            argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                            argument.ReferenceId = result.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                            argument.HasReference = true;
                        }

                        break;
                }
                break;
            case ActionKind.moveTroopFix:
                switch (arguments.Length)
                {
                    case 2:
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("moveTroopFix", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length == 1)
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("moveTroopFix", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                            }
                            else
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                            if (!Unsafe.IsNullRef(ref track))
                            {
                                switch (track.Kind)
                                {
                                    case ReferenceKind.Unit:
                                        argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Unit;
                                        argument.HasReference = true;
                                        break;
                                    case ReferenceKind.Class:
                                        argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Class;
                                        argument.HasReference = true;
                                        break;
                                    default:
                                        result.ErrorAdd_UnexpectedArgumentReferenceKind("moveTroopFix", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                                        argument.HasReference = false;
                                        break;
                                }
                            }
                            else
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("moveTroopFix", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                            }
                        }

                        argument = ref arguments[1];
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("moveTroopFix", 2, "Unit, Class, StringVariableReader", argument.TokenId);
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length == 1)
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("moveTroopFix", 2, "Unit, Class, StringVariableReader", argument.TokenId);
                            }
                            else
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                            if (!Unsafe.IsNullRef(ref track))
                            {
                                switch (track.Kind)
                                {
                                    case ReferenceKind.Unit:
                                        argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Unit;
                                        argument.HasReference = true;
                                        break;
                                    case ReferenceKind.Class:
                                        argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Class;
                                        argument.HasReference = true;
                                        break;
                                    default:
                                        result.ErrorAdd_UnexpectedArgumentReferenceKind("moveTroopFix", 2, "Unit, Class, StringVariableReader", argument.TokenId);
                                        argument.HasReference = false;
                                        break;
                                }
                            }
                            else
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("moveTroopFix", 2, "Unit, Class, StringVariableReader", argument.TokenId);
                            }
                        }

                        break;
                    case 3:
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("moveTroopFix", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length == 1)
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("moveTroopFix", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                            }
                            else
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                            if (!Unsafe.IsNullRef(ref track))
                            {
                                switch (track.Kind)
                                {
                                    case ReferenceKind.Unit:
                                        argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Unit;
                                        argument.HasReference = true;
                                        break;
                                    case ReferenceKind.Class:
                                        argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Class;
                                        argument.HasReference = true;
                                        break;
                                    default:
                                        result.ErrorAdd_UnexpectedArgumentReferenceKind("moveTroopFix", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                                        argument.HasReference = false;
                                        break;
                                }
                            }
                            else
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("moveTroopFix", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                            }
                        }

                        argument = ref arguments[1];
                        if (!argument.IsNumber)
                        {
                            argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                            argument.ReferenceId = result.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                            argument.HasReference = true;
                        }

                        argument = ref arguments[2];
                        if (!argument.IsNumber)
                        {
                            argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                            argument.ReferenceId = result.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                            argument.HasReference = true;
                        }

                        break;
                    case 4:
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("moveTroopFix", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length == 1)
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("moveTroopFix", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                            }
                            else
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                            if (!Unsafe.IsNullRef(ref track))
                            {
                                switch (track.Kind)
                                {
                                    case ReferenceKind.Unit:
                                        argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Unit;
                                        argument.HasReference = true;
                                        break;
                                    case ReferenceKind.Class:
                                        argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Class;
                                        argument.HasReference = true;
                                        break;
                                    default:
                                        result.ErrorAdd_UnexpectedArgumentReferenceKind("moveTroopFix", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                                        argument.HasReference = false;
                                        break;
                                }
                            }
                            else
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("moveTroopFix", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                            }
                        }

                        argument = ref arguments[1];
                        if (!argument.IsNumber)
                        {
                            argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                            argument.ReferenceId = result.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                            argument.HasReference = true;
                        }

                        argument = ref arguments[2];
                        if (!argument.IsNumber)
                        {
                            argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                            argument.ReferenceId = result.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                            argument.HasReference = true;
                        }

                        argument = ref arguments[3];
                        if (!argument.IsNumber)
                        {
                            argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                            argument.ReferenceId = result.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                            argument.HasReference = true;
                        }

                        break;
                }
                break;
            case ActionKind.smoveTroop:
                switch (arguments.Length)
                {
                    case 2:
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("smoveTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length == 1)
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("smoveTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                            }
                            else
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                            if (!Unsafe.IsNullRef(ref track))
                            {
                                switch (track.Kind)
                                {
                                    case ReferenceKind.Unit:
                                        argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Unit;
                                        argument.HasReference = true;
                                        break;
                                    case ReferenceKind.Class:
                                        argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Class;
                                        argument.HasReference = true;
                                        break;
                                    default:
                                        result.ErrorAdd_UnexpectedArgumentReferenceKind("smoveTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                                        argument.HasReference = false;
                                        break;
                                }
                            }
                            else
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("smoveTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                            }
                        }

                        argument = ref arguments[1];
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("smoveTroop", 2, "Unit, Class, StringVariableReader", argument.TokenId);
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length == 1)
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("smoveTroop", 2, "Unit, Class, StringVariableReader", argument.TokenId);
                            }
                            else
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                            if (!Unsafe.IsNullRef(ref track))
                            {
                                switch (track.Kind)
                                {
                                    case ReferenceKind.Unit:
                                        argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Unit;
                                        argument.HasReference = true;
                                        break;
                                    case ReferenceKind.Class:
                                        argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Class;
                                        argument.HasReference = true;
                                        break;
                                    default:
                                        result.ErrorAdd_UnexpectedArgumentReferenceKind("smoveTroop", 2, "Unit, Class, StringVariableReader", argument.TokenId);
                                        argument.HasReference = false;
                                        break;
                                }
                            }
                            else
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("smoveTroop", 2, "Unit, Class, StringVariableReader", argument.TokenId);
                            }
                        }

                        break;
                    case 3:
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("smoveTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length == 1)
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("smoveTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                            }
                            else
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                            if (!Unsafe.IsNullRef(ref track))
                            {
                                switch (track.Kind)
                                {
                                    case ReferenceKind.Unit:
                                        argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Unit;
                                        argument.HasReference = true;
                                        break;
                                    case ReferenceKind.Class:
                                        argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Class;
                                        argument.HasReference = true;
                                        break;
                                    default:
                                        result.ErrorAdd_UnexpectedArgumentReferenceKind("smoveTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                                        argument.HasReference = false;
                                        break;
                                }
                            }
                            else
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("smoveTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                            }
                        }

                        argument = ref arguments[1];
                        if (!argument.IsNumber)
                        {
                            argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                            argument.ReferenceId = result.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                            argument.HasReference = true;
                        }

                        argument = ref arguments[2];
                        if (!argument.IsNumber)
                        {
                            argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                            argument.ReferenceId = result.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                            argument.HasReference = true;
                        }

                        break;
                    case 4:
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("smoveTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length == 1)
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("smoveTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                            }
                            else
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                            if (!Unsafe.IsNullRef(ref track))
                            {
                                switch (track.Kind)
                                {
                                    case ReferenceKind.Unit:
                                        argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Unit;
                                        argument.HasReference = true;
                                        break;
                                    case ReferenceKind.Class:
                                        argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Class;
                                        argument.HasReference = true;
                                        break;
                                    default:
                                        result.ErrorAdd_UnexpectedArgumentReferenceKind("smoveTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                                        argument.HasReference = false;
                                        break;
                                }
                            }
                            else
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("smoveTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                            }
                        }

                        argument = ref arguments[1];
                        if (!argument.IsNumber)
                        {
                            argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                            argument.ReferenceId = result.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                            argument.HasReference = true;
                        }

                        argument = ref arguments[2];
                        if (!argument.IsNumber)
                        {
                            argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                            argument.ReferenceId = result.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                            argument.HasReference = true;
                        }

                        argument = ref arguments[3];
                        if (!argument.IsNumber)
                        {
                            argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                            argument.ReferenceId = result.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                            argument.HasReference = true;
                        }

                        break;
                }
                break;
            case ActionKind.smoveTroopFix:
                switch (arguments.Length)
                {
                    case 2:
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("smoveTroopFix", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length == 1)
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("smoveTroopFix", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                            }
                            else
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                            if (!Unsafe.IsNullRef(ref track))
                            {
                                switch (track.Kind)
                                {
                                    case ReferenceKind.Unit:
                                        argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Unit;
                                        argument.HasReference = true;
                                        break;
                                    case ReferenceKind.Class:
                                        argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Class;
                                        argument.HasReference = true;
                                        break;
                                    default:
                                        result.ErrorAdd_UnexpectedArgumentReferenceKind("smoveTroopFix", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                                        argument.HasReference = false;
                                        break;
                                }
                            }
                            else
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("smoveTroopFix", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                            }
                        }

                        argument = ref arguments[1];
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("smoveTroopFix", 2, "Unit, Class, StringVariableReader", argument.TokenId);
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length == 1)
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("smoveTroopFix", 2, "Unit, Class, StringVariableReader", argument.TokenId);
                            }
                            else
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                            if (!Unsafe.IsNullRef(ref track))
                            {
                                switch (track.Kind)
                                {
                                    case ReferenceKind.Unit:
                                        argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Unit;
                                        argument.HasReference = true;
                                        break;
                                    case ReferenceKind.Class:
                                        argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Class;
                                        argument.HasReference = true;
                                        break;
                                    default:
                                        result.ErrorAdd_UnexpectedArgumentReferenceKind("smoveTroopFix", 2, "Unit, Class, StringVariableReader", argument.TokenId);
                                        argument.HasReference = false;
                                        break;
                                }
                            }
                            else
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("smoveTroopFix", 2, "Unit, Class, StringVariableReader", argument.TokenId);
                            }
                        }

                        break;
                    case 3:
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("smoveTroopFix", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length == 1)
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("smoveTroopFix", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                            }
                            else
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                            if (!Unsafe.IsNullRef(ref track))
                            {
                                switch (track.Kind)
                                {
                                    case ReferenceKind.Unit:
                                        argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Unit;
                                        argument.HasReference = true;
                                        break;
                                    case ReferenceKind.Class:
                                        argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Class;
                                        argument.HasReference = true;
                                        break;
                                    default:
                                        result.ErrorAdd_UnexpectedArgumentReferenceKind("smoveTroopFix", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                                        argument.HasReference = false;
                                        break;
                                }
                            }
                            else
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("smoveTroopFix", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                            }
                        }

                        argument = ref arguments[1];
                        if (!argument.IsNumber)
                        {
                            argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                            argument.ReferenceId = result.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                            argument.HasReference = true;
                        }

                        argument = ref arguments[2];
                        if (!argument.IsNumber)
                        {
                            argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                            argument.ReferenceId = result.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                            argument.HasReference = true;
                        }

                        break;
                    case 4:
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("smoveTroopFix", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length == 1)
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("smoveTroopFix", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                            }
                            else
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                            if (!Unsafe.IsNullRef(ref track))
                            {
                                switch (track.Kind)
                                {
                                    case ReferenceKind.Unit:
                                        argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Unit;
                                        argument.HasReference = true;
                                        break;
                                    case ReferenceKind.Class:
                                        argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Class;
                                        argument.HasReference = true;
                                        break;
                                    default:
                                        result.ErrorAdd_UnexpectedArgumentReferenceKind("smoveTroopFix", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                                        argument.HasReference = false;
                                        break;
                                }
                            }
                            else
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("smoveTroopFix", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                            }
                        }

                        argument = ref arguments[1];
                        if (!argument.IsNumber)
                        {
                            argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                            argument.ReferenceId = result.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                            argument.HasReference = true;
                        }

                        argument = ref arguments[2];
                        if (!argument.IsNumber)
                        {
                            argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                            argument.ReferenceId = result.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                            argument.HasReference = true;
                        }

                        argument = ref arguments[3];
                        if (!argument.IsNumber)
                        {
                            argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                            argument.ReferenceId = result.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                            argument.HasReference = true;
                        }

                        break;
                }
                break;
            case ActionKind.spotmark:
                if (arguments.Length <= 0)
                {
                    break;
                }
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("spotmark", 1, "Unit, Power, Spot, StringVariableReader", argument.TokenId);
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("spotmark", 1, "Unit, Power, Spot, StringVariableReader", argument.TokenId);
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (!Unsafe.IsNullRef(ref track))
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Unit:
                                argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Unit;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Power:
                                argument.ReferenceId = result.PowerSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Power;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Spot:
                                argument.ReferenceId = result.SpotSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Spot;
                                argument.HasReference = true;
                                break;
                            default:
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("spotmark", 1, "Unit, Power, Spot, StringVariableReader", argument.TokenId);
                                argument.HasReference = false;
                                break;
                        }
                    }
                    else
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("spotmark", 1, "Unit, Power, Spot, StringVariableReader", argument.TokenId);
                    }
                }

                if (arguments.Length <= 1)
                {
                    break;
                }
                argument = ref arguments[1];
                if (!argument.IsNumber)
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("spotmark", 2, "Number", argument.TokenId);
                }

                break;
            case ActionKind.shiftTroop:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("shiftTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("shiftTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (!Unsafe.IsNullRef(ref track))
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Unit:
                                argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Unit;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Class:
                                argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Class;
                                argument.HasReference = true;
                                break;
                            default:
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("shiftTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                                argument.HasReference = false;
                                break;
                        }
                    }
                    else
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("shiftTroop", 1, "Unit, Class, StringVariableReader", argument.TokenId);
                    }
                }

                argument = ref arguments[1];
                if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = result.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                argument = ref arguments[2];
                if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = result.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                if (arguments.Length <= 3)
                {
                    break;
                }
                argument = ref arguments[3];
                if (!argument.IsNumber && (argument.HasReference = PerResultValidator.IsBoolean(result.GetSpan(argument.TokenId), out argument.ReferenceId)))
                {
                    argument.ReferenceKind = ReferenceKind.Boolean;
                }
                else
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("shiftTroop", 4, "Boolean", argument.TokenId);
                }

                break;
        }
    }

    private void AddReferenceAndValidate(ref Result result, ref PowerNode node)
    {
        if (node.staff.Value is { HasValue: true, Value.Count: > 0 })
        {
            foreach (ref var value in node.staff.Value.Value.AsSpan())
            {
                SpecialTreatment_power_staff(ref result, ref node, ref value);
            }
        }
        if (node.staff.VariantArray is { Length: > 0 })
        {
            foreach (var element in node.staff.VariantArray)
            {
                if (element is not { HasValue: true, Value.Count: > 0 })
                {
                    continue;
                }
                foreach (ref var value in element.Value.AsSpan())
                {
                    SpecialTreatment_power_staff(ref result, ref node, ref value);
                }
            }
        }
        if (node.merce.Value is { HasValue: true, Value.Count: > 0 })
        {
            foreach (ref var value in node.merce.Value.Value.AsSpan())
            {
                SpecialTreatment_power_merce(ref result, ref node, ref value);
            }
        }
        if (node.merce.VariantArray is { Length: > 0 })
        {
            foreach (var element in node.merce.VariantArray)
            {
                if (element is not { HasValue: true, Value.Count: > 0 })
                {
                    continue;
                }
                foreach (ref var value in element.Value.AsSpan())
                {
                    SpecialTreatment_power_merce(ref result, ref node, ref value);
                }
            }
        }
    }

    private void AddReferenceAndValidate(ref Result result, ref ClassNode node)
    {
        if (node.member.Value is { HasValue: true, Value.Count: > 0 })
        {
            foreach (ref var value in node.member.Value.Value.AsSpan())
            {
                SpecialTreatment_class_member(ref result, ref node, ref value);
            }
        }
        if (node.member.VariantArray is { Length: > 0 })
        {
            foreach (var element in node.member.VariantArray)
            {
                if (element is not { HasValue: true, Value.Count: > 0 })
                {
                    continue;
                }
                foreach (ref var value in element.Value.AsSpan())
                {
                    SpecialTreatment_class_member(ref result, ref node, ref value);
                }
            }
        }
        if (node.friend.Value is { HasValue: true, Value.Count: > 0 })
        {
            foreach (ref var value in node.friend.Value.Value.AsSpan())
            {
                SpecialTreatment_class_friend(ref result, ref node, ref value);
            }
        }
        if (node.friend.VariantArray is { Length: > 0 })
        {
            foreach (var element in node.friend.VariantArray)
            {
                if (element is not { HasValue: true, Value.Count: > 0 })
                {
                    continue;
                }
                foreach (ref var value in element.Value.AsSpan())
                {
                    SpecialTreatment_class_friend(ref result, ref node, ref value);
                }
            }
        }
        if (node.merce.Value is { HasValue: true, Value.Count: > 0 })
        {
            foreach (ref var value in node.merce.Value.Value.AsSpan())
            {
                SpecialTreatment_class_merce(ref result, ref node, ref value);
            }
        }
        if (node.merce.VariantArray is { Length: > 0 })
        {
            foreach (var element in node.merce.VariantArray)
            {
                if (element is not { HasValue: true, Value.Count: > 0 })
                {
                    continue;
                }
                foreach (ref var value in element.Value.AsSpan())
                {
                    SpecialTreatment_class_merce(ref result, ref node, ref value);
                }
            }
        }
        if (node.skill.Value is { HasValue: true, Value.Count: > 0 })
        {
            foreach (ref var value in node.skill.Value.Value.AsSpan())
            {
                SpecialTreatment_class_skill(ref result, ref node, ref value);
            }
        }
        if (node.skill.VariantArray is { Length: > 0 })
        {
            foreach (var element in node.skill.VariantArray)
            {
                if (element is not { HasValue: true, Value.Count: > 0 })
                {
                    continue;
                }
                foreach (ref var value in element.Value.AsSpan())
                {
                    SpecialTreatment_class_skill(ref result, ref node, ref value);
                }
            }
        }
        if (node.skill2.Value is { HasValue: true, Value.Count: > 0 })
        {
            foreach (ref var value in node.skill2.Value.Value.AsSpan())
            {
                SpecialTreatment_class_skill2(ref result, ref node, ref value);
            }
        }
        if (node.skill2.VariantArray is { Length: > 0 })
        {
            foreach (var element in node.skill2.VariantArray)
            {
                if (element is not { HasValue: true, Value.Count: > 0 })
                {
                    continue;
                }
                foreach (ref var value in element.Value.AsSpan())
                {
                    SpecialTreatment_class_skill2(ref result, ref node, ref value);
                }
            }
        }
        if (node.learn.Value is { HasValue: true, Value.Count: > 0 })
        {
            foreach (ref var value in node.learn.Value.Value.AsSpan())
            {
                SpecialTreatment_class_learn(ref result, ref node, ref value);
            }
        }
        if (node.learn.VariantArray is { Length: > 0 })
        {
            foreach (var element in node.learn.VariantArray)
            {
                if (element is not { HasValue: true, Value.Count: > 0 })
                {
                    continue;
                }
                foreach (ref var value in element.Value.AsSpan())
                {
                    SpecialTreatment_class_learn(ref result, ref node, ref value);
                }
            }
        }
        if (node.delskill.Value is { HasValue: true, Value.Count: > 0 })
        {
            foreach (ref var value in node.delskill.Value.Value.AsSpan())
            {
                SpecialTreatment_class_delskill(ref result, ref node, ref value);
            }
        }
        if (node.delskill.VariantArray is { Length: > 0 })
        {
            foreach (var element in node.delskill.VariantArray)
            {
                if (element is not { HasValue: true, Value.Count: > 0 })
                {
                    continue;
                }
                foreach (ref var value in element.Value.AsSpan())
                {
                    SpecialTreatment_class_delskill(ref result, ref node, ref value);
                }
            }
        }
        if (node.delskill2.Value is { HasValue: true, Value.Count: > 0 })
        {
            foreach (ref var value in node.delskill2.Value.Value.AsSpan())
            {
                SpecialTreatment_class_delskill2(ref result, ref node, ref value);
            }
        }
        if (node.delskill2.VariantArray is { Length: > 0 })
        {
            foreach (var element in node.delskill2.VariantArray)
            {
                if (element is not { HasValue: true, Value.Count: > 0 })
                {
                    continue;
                }
                foreach (ref var value in element.Value.AsSpan())
                {
                    SpecialTreatment_class_delskill2(ref result, ref node, ref value);
                }
            }
        }
        if (node.friend_ex.Value is { HasValue: true, Value.Count: > 0 })
        {
            foreach (ref var value in node.friend_ex.Value.Value.AsSpan())
            {
                SpecialTreatment_class_friend_ex(ref result, ref node, ref value);
            }
        }
        if (node.friend_ex.VariantArray is { Length: > 0 })
        {
            foreach (var element in node.friend_ex.VariantArray)
            {
                if (element is not { HasValue: true, Value.Count: > 0 })
                {
                    continue;
                }
                foreach (ref var value in element.Value.AsSpan())
                {
                    SpecialTreatment_class_friend_ex(ref result, ref node, ref value);
                }
            }
        }
    }

    private void AddReferenceAndValidate(ref Result result, ref DungeonNode node)
    {
        if (node.monster.Value is { HasValue: true, Value.Count: > 0 })
        {
            foreach (ref var value in node.monster.Value.Value.AsSpan())
            {
                SpecialTreatment_dungeon_monster(ref result, ref node, ref value);
            }
        }
        if (node.monster.VariantArray is { Length: > 0 })
        {
            foreach (var element in node.monster.VariantArray)
            {
                if (element is not { HasValue: true, Value.Count: > 0 })
                {
                    continue;
                }
                foreach (ref var value in element.Value.AsSpan())
                {
                    SpecialTreatment_dungeon_monster(ref result, ref node, ref value);
                }
            }
        }
    }

    private void AddReferenceAndValidate(ref Result result, ref FieldNode node)
    {
    }

    private void AddReferenceAndValidate(ref Result result, ref MovetypeNode node)
    {
    }

    private void AddReferenceAndValidate(ref Result result, ref ObjectNode node)
    {
    }

    private void AddReferenceAndValidate(ref Result result, ref RaceNode node)
    {
    }

    private void AddReferenceAndValidate(ref Result result, ref SkillNode node)
    {
        if (node.image is { HasValue: true })
        {
            SpecialTreatment_skill_image(ref result, ref node, ref node.image.Value);
        }
        if (node.yorozu is { HasValue: true, Value.Count: > 0 })
        {
            foreach (ref var value in node.yorozu.Value.AsSpan())
            {
                SpecialTreatment_skill_yorozu(ref result, ref node, ref value);
            }
        }
        if (node.attr is { HasValue: true })
        {
            SpecialTreatment_skill_attr(ref result, ref node, ref node.attr.Value);
        }
        if (node.add is { HasValue: true })
        {
            SpecialTreatment_skill_add(ref result, ref node, ref node.add.Value);
        }
        if (node.add2 is { HasValue: true, Value.Count: > 0 })
        {
            foreach (ref var value in node.add2.Value.AsSpan())
            {
                SpecialTreatment_skill_add2(ref result, ref node, ref value);
            }
        }
        if (node.homing is { HasValue: true })
        {
            SpecialTreatment_skill_homing(ref result, ref node, ref node.homing.Value);
        }
        if (node.offset is { HasValue: true, Value.Count: > 0 })
        {
            foreach (ref var value in node.offset.Value.AsSpan())
            {
                SpecialTreatment_skill_offset(ref result, ref node, ref value);
            }
        }
        if (node.friend is { HasValue: true, Value.Count: > 0 })
        {
            foreach (ref var value in node.friend.Value.AsSpan())
            {
                SpecialTreatment_skill_friend(ref result, ref node, ref value);
            }
        }
    }

    private void AddReferenceAndValidate(ref Result result, ref SkillsetNode node)
    {
    }

    private void AddReferenceAndValidate(ref Result result, ref SpotNode node)
    {
        if (node.merce.Value is { HasValue: true, Value.Count: > 0 })
        {
            foreach (ref var value in node.merce.Value.Value.AsSpan())
            {
                SpecialTreatment_spot_merce(ref result, ref node, ref value);
            }
        }
        if (node.merce.VariantArray is { Length: > 0 })
        {
            foreach (var element in node.merce.VariantArray)
            {
                if (element is not { HasValue: true, Value.Count: > 0 })
                {
                    continue;
                }
                foreach (ref var value in element.Value.AsSpan())
                {
                    SpecialTreatment_spot_merce(ref result, ref node, ref value);
                }
            }
        }
        if (node.monster.Value is { HasValue: true, Value.Count: > 0 })
        {
            foreach (ref var value in node.monster.Value.Value.AsSpan())
            {
                SpecialTreatment_spot_monster(ref result, ref node, ref value);
            }
        }
        if (node.monster.VariantArray is { Length: > 0 })
        {
            foreach (var element in node.monster.VariantArray)
            {
                if (element is not { HasValue: true, Value.Count: > 0 })
                {
                    continue;
                }
                foreach (ref var value in element.Value.AsSpan())
                {
                    SpecialTreatment_spot_monster(ref result, ref node, ref value);
                }
            }
        }
        if (node.member.Value is { HasValue: true, Value.Count: > 0 })
        {
            foreach (ref var value in node.member.Value.Value.AsSpan())
            {
                SpecialTreatment_spot_member(ref result, ref node, ref value);
            }
        }
        if (node.member.VariantArray is { Length: > 0 })
        {
            foreach (var element in node.member.VariantArray)
            {
                if (element is not { HasValue: true, Value.Count: > 0 })
                {
                    continue;
                }
                foreach (ref var value in element.Value.AsSpan())
                {
                    SpecialTreatment_spot_member(ref result, ref node, ref value);
                }
            }
        }
    }

    private void AddReferenceAndValidate(ref Result result, ref UnitNode node)
    {
        if (node.member.Value is { HasValue: true, Value.Count: > 0 })
        {
            foreach (ref var value in node.member.Value.Value.AsSpan())
            {
                SpecialTreatment_unit_member(ref result, ref node, ref value);
            }
        }
        if (node.member.VariantArray is { Length: > 0 })
        {
            foreach (var element in node.member.VariantArray)
            {
                if (element is not { HasValue: true, Value.Count: > 0 })
                {
                    continue;
                }
                foreach (ref var value in element.Value.AsSpan())
                {
                    SpecialTreatment_unit_member(ref result, ref node, ref value);
                }
            }
        }
        if (node.friend.Value is { HasValue: true, Value.Count: > 0 })
        {
            foreach (ref var value in node.friend.Value.Value.AsSpan())
            {
                SpecialTreatment_unit_friend(ref result, ref node, ref value);
            }
        }
        if (node.friend.VariantArray is { Length: > 0 })
        {
            foreach (var element in node.friend.VariantArray)
            {
                if (element is not { HasValue: true, Value.Count: > 0 })
                {
                    continue;
                }
                foreach (ref var value in element.Value.AsSpan())
                {
                    SpecialTreatment_unit_friend(ref result, ref node, ref value);
                }
            }
        }
        if (node.merce.Value is { HasValue: true, Value.Count: > 0 })
        {
            foreach (ref var value in node.merce.Value.Value.AsSpan())
            {
                SpecialTreatment_unit_merce(ref result, ref node, ref value);
            }
        }
        if (node.merce.VariantArray is { Length: > 0 })
        {
            foreach (var element in node.merce.VariantArray)
            {
                if (element is not { HasValue: true, Value.Count: > 0 })
                {
                    continue;
                }
                foreach (ref var value in element.Value.AsSpan())
                {
                    SpecialTreatment_unit_merce(ref result, ref node, ref value);
                }
            }
        }
        if (node.skill.Value is { HasValue: true, Value.Count: > 0 })
        {
            foreach (ref var value in node.skill.Value.Value.AsSpan())
            {
                SpecialTreatment_unit_skill(ref result, ref node, ref value);
            }
        }
        if (node.skill.VariantArray is { Length: > 0 })
        {
            foreach (var element in node.skill.VariantArray)
            {
                if (element is not { HasValue: true, Value.Count: > 0 })
                {
                    continue;
                }
                foreach (ref var value in element.Value.AsSpan())
                {
                    SpecialTreatment_unit_skill(ref result, ref node, ref value);
                }
            }
        }
        if (node.skill2.Value is { HasValue: true, Value.Count: > 0 })
        {
            foreach (ref var value in node.skill2.Value.Value.AsSpan())
            {
                SpecialTreatment_unit_skill2(ref result, ref node, ref value);
            }
        }
        if (node.skill2.VariantArray is { Length: > 0 })
        {
            foreach (var element in node.skill2.VariantArray)
            {
                if (element is not { HasValue: true, Value.Count: > 0 })
                {
                    continue;
                }
                foreach (ref var value in element.Value.AsSpan())
                {
                    SpecialTreatment_unit_skill2(ref result, ref node, ref value);
                }
            }
        }
        if (node.learn.Value is { HasValue: true, Value.Count: > 0 })
        {
            foreach (ref var value in node.learn.Value.Value.AsSpan())
            {
                SpecialTreatment_unit_learn(ref result, ref node, ref value);
            }
        }
        if (node.learn.VariantArray is { Length: > 0 })
        {
            foreach (var element in node.learn.VariantArray)
            {
                if (element is not { HasValue: true, Value.Count: > 0 })
                {
                    continue;
                }
                foreach (ref var value in element.Value.AsSpan())
                {
                    SpecialTreatment_unit_learn(ref result, ref node, ref value);
                }
            }
        }
        if (node.delskill.Value is { HasValue: true, Value.Count: > 0 })
        {
            foreach (ref var value in node.delskill.Value.Value.AsSpan())
            {
                SpecialTreatment_unit_delskill(ref result, ref node, ref value);
            }
        }
        if (node.delskill.VariantArray is { Length: > 0 })
        {
            foreach (var element in node.delskill.VariantArray)
            {
                if (element is not { HasValue: true, Value.Count: > 0 })
                {
                    continue;
                }
                foreach (ref var value in element.Value.AsSpan())
                {
                    SpecialTreatment_unit_delskill(ref result, ref node, ref value);
                }
            }
        }
        if (node.delskill2.Value is { HasValue: true, Value.Count: > 0 })
        {
            foreach (ref var value in node.delskill2.Value.Value.AsSpan())
            {
                SpecialTreatment_unit_delskill2(ref result, ref node, ref value);
            }
        }
        if (node.delskill2.VariantArray is { Length: > 0 })
        {
            foreach (var element in node.delskill2.VariantArray)
            {
                if (element is not { HasValue: true, Value.Count: > 0 })
                {
                    continue;
                }
                foreach (ref var value in element.Value.AsSpan())
                {
                    SpecialTreatment_unit_delskill2(ref result, ref node, ref value);
                }
            }
        }
        if (node.leader_skill.Value is { HasValue: true, Value.Count: > 0 })
        {
            foreach (ref var value in node.leader_skill.Value.Value.AsSpan())
            {
                SpecialTreatment_unit_leader_skill(ref result, ref node, ref value);
            }
        }
        if (node.leader_skill.VariantArray is { Length: > 0 })
        {
            foreach (var element in node.leader_skill.VariantArray)
            {
                if (element is not { HasValue: true, Value.Count: > 0 })
                {
                    continue;
                }
                foreach (ref var value in element.Value.AsSpan())
                {
                    SpecialTreatment_unit_leader_skill(ref result, ref node, ref value);
                }
            }
        }
        if (node.assist_skill.Value is { HasValue: true, Value.Count: > 0 })
        {
            foreach (ref var value in node.assist_skill.Value.Value.AsSpan())
            {
                SpecialTreatment_unit_assist_skill(ref result, ref node, ref value);
            }
        }
        if (node.assist_skill.VariantArray is { Length: > 0 })
        {
            foreach (var element in node.assist_skill.VariantArray)
            {
                if (element is not { HasValue: true, Value.Count: > 0 })
                {
                    continue;
                }
                foreach (ref var value in element.Value.AsSpan())
                {
                    SpecialTreatment_unit_assist_skill(ref result, ref node, ref value);
                }
            }
        }
        if (node.staff.Value is { HasValue: true, Value.Count: > 0 })
        {
            foreach (ref var value in node.staff.Value.Value.AsSpan())
            {
                SpecialTreatment_unit_staff(ref result, ref node, ref value);
            }
        }
        if (node.staff.VariantArray is { Length: > 0 })
        {
            foreach (var element in node.staff.VariantArray)
            {
                if (element is not { HasValue: true, Value.Count: > 0 })
                {
                    continue;
                }
                foreach (ref var value in element.Value.AsSpan())
                {
                    SpecialTreatment_unit_staff(ref result, ref node, ref value);
                }
            }
        }
        if (node.castle_guard.Value is { HasValue: true, Value.Count: > 0 })
        {
            foreach (ref var value in node.castle_guard.Value.Value.AsSpan())
            {
                SpecialTreatment_unit_castle_guard(ref result, ref node, ref value);
            }
        }
        if (node.castle_guard.VariantArray is { Length: > 0 })
        {
            foreach (var element in node.castle_guard.VariantArray)
            {
                if (element is not { HasValue: true, Value.Count: > 0 })
                {
                    continue;
                }
                foreach (ref var value in element.Value.AsSpan())
                {
                    SpecialTreatment_unit_castle_guard(ref result, ref node, ref value);
                }
            }
        }
    }

    private void AddReferenceAndValidate(ref Result result, ref VoiceNode node)
    {
    }

    private void AddReferenceAndValidate(ref Result result, ref ScenarioNode node)
    {
        foreach (var statement in node.Statements.AsSpan())
		{
            if (statement is not null)
            {
			    AddReferenceAndValidate_Statement(ref result, statement);
            }
		}
    }

    private void AddReferenceAndValidate(ref Result result, ref EventNode node)
    {
        foreach (var statement in node.Statements.AsSpan())
		{
            if (statement is not null)
            {
			    AddReferenceAndValidate_Statement(ref result, statement);
            }
		}
    }

    private void AddReferenceAndValidate(ref Result result, ref StoryNode node)
    {
        foreach (var statement in node.Statements.AsSpan())
		{
            if (statement is not null)
            {
			    AddReferenceAndValidate_Statement(ref result, statement);
            }
		}
    }

    private void SpecialTreatment_power_staff(ref Result result, ref PowerNode node, ref Pair_NullableString_NullableInt value)
    {
        if (!value.HasText)
        {
            return;
        }
        var span = result.GetSpan(value.Text);
        if (value.TrailingTokenCount != 0)
        {
            result.ErrorAdd_UnexpectedElementReferenceKind("Power", "staff", "Race, Unit, Class", value.Text);
            return;
        }
        ref var reference = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
        if (Unsafe.IsNullRef(ref reference))
        {
            result.ErrorAdd_UnexpectedElementReferenceKind("Power", "staff", "Race, Unit, Class", value.Text);
            return;
        }
        switch (reference.Kind)
        {
            case ReferenceKind.Unit:
                value.ReferenceId = result.UnitSet.GetOrAdd(span, value.Text);
                value.ReferenceKind = ReferenceKind.Unit;
                value.HasReference = true;
                break;
            case ReferenceKind.Class:
                value.ReferenceId = result.ClassSet.GetOrAdd(span, value.Text);
                value.ReferenceKind = ReferenceKind.Class;
                value.HasReference = true;
                break;
            case ReferenceKind.Race:
                value.ReferenceId = result.RaceSet.GetOrAdd(span, value.Text);
                value.ReferenceKind = ReferenceKind.Race;
                value.HasReference = true;
                break;
            default:
                result.ErrorAdd_UnexpectedElementReferenceKind("Power", "staff", "Race, Unit, Class", value.Text);
                break;
        }
    }

    private void SpecialTreatment_power_merce(ref Result result, ref PowerNode node, ref Pair_NullableString_NullableInt value)
    {
        if (!value.HasText)
        {
            return;
        }
        var span = result.GetSpan(value.Text);
        if (value.TrailingTokenCount != 0)
        {
            result.ErrorAdd_UnexpectedElementReferenceKind("Power", "merce", "Race, Unit, Class", value.Text);
            return;
        }
        ref var reference = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
        if (Unsafe.IsNullRef(ref reference))
        {
            result.ErrorAdd_UnexpectedElementReferenceKind("Power", "merce", "Race, Unit, Class", value.Text);
            return;
        }
        switch (reference.Kind)
        {
            case ReferenceKind.Unit:
                value.ReferenceId = result.UnitSet.GetOrAdd(span, value.Text);
                value.ReferenceKind = ReferenceKind.Unit;
                value.HasReference = true;
                break;
            case ReferenceKind.Class:
                value.ReferenceId = result.ClassSet.GetOrAdd(span, value.Text);
                value.ReferenceKind = ReferenceKind.Class;
                value.HasReference = true;
                break;
            case ReferenceKind.Race:
                value.ReferenceId = result.RaceSet.GetOrAdd(span, value.Text);
                value.ReferenceKind = ReferenceKind.Race;
                value.HasReference = true;
                break;
            default:
                result.ErrorAdd_UnexpectedElementReferenceKind("Power", "merce", "Race, Unit, Class", value.Text);
                break;
        }
    }

    private void SpecialTreatment_class_member(ref Result result, ref ClassNode node, ref Pair_NullableString_NullableInt value)
    {
        if (!value.HasText)
        {
            return;
        }
        var span = result.GetSpan(value.Text);
        if (value.TrailingTokenCount != 0)
        {
            result.ErrorAdd_UnexpectedElementReferenceKind("Class", "member", "Unit, Class", value.Text);
            return;
        }
        ref var reference = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
        if (Unsafe.IsNullRef(ref reference))
        {
            result.ErrorAdd_UnexpectedElementReferenceKind("Class", "member", "Unit, Class", value.Text);
            return;
        }
        switch (reference.Kind)
        {
            case ReferenceKind.Unit:
                value.ReferenceId = result.UnitSet.GetOrAdd(span, value.Text);
                value.ReferenceKind = ReferenceKind.Unit;
                value.HasReference = true;
                break;
            case ReferenceKind.Class:
                value.ReferenceId = result.ClassSet.GetOrAdd(span, value.Text);
                value.ReferenceKind = ReferenceKind.Class;
                value.HasReference = true;
                break;
            default:
                result.ErrorAdd_UnexpectedElementReferenceKind("Class", "member", "Unit, Class", value.Text);
                break;
        }
    }

    private void SpecialTreatment_class_merce(ref Result result, ref ClassNode node, ref Pair_NullableString_NullableInt value)
    {
        if (!value.HasText)
        {
            return;
        }
        var span = result.GetSpan(value.Text);
        if (value.TrailingTokenCount != 0)
        {
            result.ErrorAdd_UnexpectedElementReferenceKind("Class", "merce", "Unit, Class", value.Text);
            return;
        }
        ref var reference = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
        if (Unsafe.IsNullRef(ref reference))
        {
            result.ErrorAdd_UnexpectedElementReferenceKind("Class", "merce", "Unit, Class", value.Text);
            return;
        }
        switch (reference.Kind)
        {
            case ReferenceKind.Unit:
                value.ReferenceId = result.UnitSet.GetOrAdd(span, value.Text);
                value.ReferenceKind = ReferenceKind.Unit;
                value.HasReference = true;
                break;
            case ReferenceKind.Class:
                value.ReferenceId = result.ClassSet.GetOrAdd(span, value.Text);
                value.ReferenceKind = ReferenceKind.Class;
                value.HasReference = true;
                break;
            default:
                result.ErrorAdd_UnexpectedElementReferenceKind("Class", "merce", "Unit, Class", value.Text);
                break;
        }
    }

    private void SpecialTreatment_class_skill(ref Result result, ref ClassNode node, ref Pair_NullableString_NullableInt value)
    {
        if (!value.HasText)
        {
            return;
        }
        var span = result.GetSpan(value.Text);
        if (value.TrailingTokenCount != 0)
        {
            result.ErrorAdd_UnexpectedElementReferenceKind("Class", "skill", "Skill, Skillset", value.Text);
            return;
        }
        ref var reference = ref AmbiguousDictionary_SkillSkillset.TryGet(span);
        if (Unsafe.IsNullRef(ref reference))
        {
            result.ErrorAdd_UnexpectedElementReferenceKind("Class", "skill", "Skill, Skillset", value.Text);
            return;
        }
        switch (reference.Kind)
        {
           case ReferenceKind.Skill:
               value.ReferenceId = result.SkillSet.GetOrAdd(span, value.Text);
               value.ReferenceKind = ReferenceKind.Skill;
               value.HasReference = true;
               break;
            case ReferenceKind.Skillset:
                value.ReferenceId = result.SkillsetSet.GetOrAdd(span, value.Text);
                value.ReferenceKind = ReferenceKind.Skillset;
                value.HasReference = true;
                break;
            default:
                result.ErrorAdd_UnexpectedElementReferenceKind("Class", "skill", "Skill, Skillset", value.Text);
                break;
        }
    }

    private void SpecialTreatment_class_skill2(ref Result result, ref ClassNode node, ref Pair_NullableString_NullableInt value)
    {
        if (!value.HasText)
        {
            return;
        }
        var span = result.GetSpan(value.Text);
        if (value.TrailingTokenCount != 0)
        {
            result.ErrorAdd_UnexpectedElementReferenceKind("Class", "skill2", "Skill, Skillset", value.Text);
            return;
        }
        ref var reference = ref AmbiguousDictionary_SkillSkillset.TryGet(span);
        if (Unsafe.IsNullRef(ref reference))
        {
            result.ErrorAdd_UnexpectedElementReferenceKind("Class", "skill2", "Skill, Skillset", value.Text);
            return;
        }
        switch (reference.Kind)
        {
           case ReferenceKind.Skill:
               value.ReferenceId = result.SkillSet.GetOrAdd(span, value.Text);
               value.ReferenceKind = ReferenceKind.Skill;
               value.HasReference = true;
               break;
            case ReferenceKind.Skillset:
                value.ReferenceId = result.SkillsetSet.GetOrAdd(span, value.Text);
                value.ReferenceKind = ReferenceKind.Skillset;
                value.HasReference = true;
                break;
            default:
                result.ErrorAdd_UnexpectedElementReferenceKind("Class", "skill2", "Skill, Skillset", value.Text);
                break;
        }
    }

    private void SpecialTreatment_class_learn(ref Result result, ref ClassNode node, ref Pair_NullableString_NullableInt value)
    {
        if (!value.HasText)
        {
            return;
        }
        var span = result.GetSpan(value.Text);
        if (value.TrailingTokenCount != 0)
        {
            result.ErrorAdd_UnexpectedElementReferenceKind("Class", "learn", "Skill, Skillset", value.Text);
            return;
        }
        ref var reference = ref AmbiguousDictionary_SkillSkillset.TryGet(span);
        if (Unsafe.IsNullRef(ref reference))
        {
            result.ErrorAdd_UnexpectedElementReferenceKind("Class", "learn", "Skill, Skillset", value.Text);
            return;
        }
        switch (reference.Kind)
        {
           case ReferenceKind.Skill:
               value.ReferenceId = result.SkillSet.GetOrAdd(span, value.Text);
               value.ReferenceKind = ReferenceKind.Skill;
               value.HasReference = true;
               break;
            case ReferenceKind.Skillset:
                value.ReferenceId = result.SkillsetSet.GetOrAdd(span, value.Text);
                value.ReferenceKind = ReferenceKind.Skillset;
                value.HasReference = true;
                break;
            default:
                result.ErrorAdd_UnexpectedElementReferenceKind("Class", "learn", "Skill, Skillset", value.Text);
                break;
        }
    }

    private void SpecialTreatment_class_delskill(ref Result result, ref ClassNode node, ref Pair_NullableString_NullableInt value)
    {
        if (!value.HasText)
        {
            return;
        }
        var span = result.GetSpan(value.Text);
        if (value.TrailingTokenCount != 0)
        {
            result.ErrorAdd_UnexpectedElementReferenceKind("Class", "delskill", "Skill, Skillset", value.Text);
            return;
        }
        ref var reference = ref AmbiguousDictionary_SkillSkillset.TryGet(span);
        if (Unsafe.IsNullRef(ref reference))
        {
            result.ErrorAdd_UnexpectedElementReferenceKind("Class", "delskill", "Skill, Skillset", value.Text);
            return;
        }
        switch (reference.Kind)
        {
           case ReferenceKind.Skill:
               value.ReferenceId = result.SkillSet.GetOrAdd(span, value.Text);
               value.ReferenceKind = ReferenceKind.Skill;
               value.HasReference = true;
               break;
            case ReferenceKind.Skillset:
                value.ReferenceId = result.SkillsetSet.GetOrAdd(span, value.Text);
                value.ReferenceKind = ReferenceKind.Skillset;
                value.HasReference = true;
                break;
            default:
                result.ErrorAdd_UnexpectedElementReferenceKind("Class", "delskill", "Skill, Skillset", value.Text);
                break;
        }
    }

    private void SpecialTreatment_class_delskill2(ref Result result, ref ClassNode node, ref Pair_NullableString_NullableInt value)
    {
        if (!value.HasText)
        {
            return;
        }
        var span = result.GetSpan(value.Text);
        if (value.TrailingTokenCount != 0)
        {
            result.ErrorAdd_UnexpectedElementReferenceKind("Class", "delskill2", "Skill, Skillset", value.Text);
            return;
        }
        ref var reference = ref AmbiguousDictionary_SkillSkillset.TryGet(span);
        if (Unsafe.IsNullRef(ref reference))
        {
            result.ErrorAdd_UnexpectedElementReferenceKind("Class", "delskill2", "Skill, Skillset", value.Text);
            return;
        }
        switch (reference.Kind)
        {
           case ReferenceKind.Skill:
               value.ReferenceId = result.SkillSet.GetOrAdd(span, value.Text);
               value.ReferenceKind = ReferenceKind.Skill;
               value.HasReference = true;
               break;
            case ReferenceKind.Skillset:
                value.ReferenceId = result.SkillsetSet.GetOrAdd(span, value.Text);
                value.ReferenceKind = ReferenceKind.Skillset;
                value.HasReference = true;
                break;
            default:
                result.ErrorAdd_UnexpectedElementReferenceKind("Class", "delskill2", "Skill, Skillset", value.Text);
                break;
        }
    }

    private void SpecialTreatment_class_friend_ex(ref Result result, ref ClassNode node, ref Pair_NullableString_NullableInt value)
    {
        if (!value.HasText)
        {
            return;
        }
        var span = result.GetSpan(value.Text);
        if (value.TrailingTokenCount != 0)
        {
            result.ErrorAdd_UnexpectedElementReferenceKind("Class", "friend_ex", "Race, Unit, Class", value.Text);
            return;
        }
        ref var reference = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
        if (Unsafe.IsNullRef(ref reference))
        {
            result.ErrorAdd_UnexpectedElementReferenceKind("Class", "friend_ex", "Race, Unit, Class", value.Text);
            return;
        }
        switch (reference.Kind)
        {
            case ReferenceKind.Unit:
                value.ReferenceId = result.UnitSet.GetOrAdd(span, value.Text);
                value.ReferenceKind = ReferenceKind.Unit;
                value.HasReference = true;
                break;
            case ReferenceKind.Class:
                value.ReferenceId = result.ClassSet.GetOrAdd(span, value.Text);
                value.ReferenceKind = ReferenceKind.Class;
                value.HasReference = true;
                break;
            case ReferenceKind.Race:
                value.ReferenceId = result.RaceSet.GetOrAdd(span, value.Text);
                value.ReferenceKind = ReferenceKind.Race;
                value.HasReference = true;
                break;
            default:
                result.ErrorAdd_UnexpectedElementReferenceKind("Class", "friend_ex", "Race, Unit, Class", value.Text);
                break;
        }
    }

    private void SpecialTreatment_dungeon_monster(ref Result result, ref DungeonNode node, ref Pair_NullableString_NullableInt value)
    {
        if (!value.HasText)
        {
            return;
        }
        var span = result.GetSpan(value.Text);
        if (value.TrailingTokenCount != 0)
        {
            result.ErrorAdd_UnexpectedElementReferenceKind("Dungeon", "monster", "Unit, Class", value.Text);
            return;
        }
        ref var reference = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
        if (Unsafe.IsNullRef(ref reference))
        {
            result.ErrorAdd_UnexpectedElementReferenceKind("Dungeon", "monster", "Unit, Class", value.Text);
            return;
        }
        switch (reference.Kind)
        {
            case ReferenceKind.Unit:
                value.ReferenceId = result.UnitSet.GetOrAdd(span, value.Text);
                value.ReferenceKind = ReferenceKind.Unit;
                value.HasReference = true;
                break;
            case ReferenceKind.Class:
                value.ReferenceId = result.ClassSet.GetOrAdd(span, value.Text);
                value.ReferenceKind = ReferenceKind.Class;
                value.HasReference = true;
                break;
            default:
                result.ErrorAdd_UnexpectedElementReferenceKind("Dungeon", "monster", "Unit, Class", value.Text);
                break;
        }
    }

    private void SpecialTreatment_skill_friend(ref Result result, ref SkillNode node, ref Pair_NullableString_NullableInt value)
    {
        if (!value.HasText)
        {
            return;
        }
        var span = result.GetSpan(value.Text);
        if (value.TrailingTokenCount != 0)
        {
            result.ErrorAdd_UnexpectedElementReferenceKind("Skill", "friend", "Unit, Class", value.Text);
            return;
        }
        ref var reference = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
        if (Unsafe.IsNullRef(ref reference))
        {
            result.ErrorAdd_UnexpectedElementReferenceKind("Skill", "friend", "Unit, Class", value.Text);
            return;
        }
        switch (reference.Kind)
        {
            case ReferenceKind.Unit:
                value.ReferenceId = result.UnitSet.GetOrAdd(span, value.Text);
                value.ReferenceKind = ReferenceKind.Unit;
                value.HasReference = true;
                break;
            case ReferenceKind.Class:
                value.ReferenceId = result.ClassSet.GetOrAdd(span, value.Text);
                value.ReferenceKind = ReferenceKind.Class;
                value.HasReference = true;
                break;
            default:
                result.ErrorAdd_UnexpectedElementReferenceKind("Skill", "friend", "Unit, Class", value.Text);
                break;
        }
    }

    private void SpecialTreatment_spot_merce(ref Result result, ref SpotNode node, ref Pair_NullableString_NullableInt value)
    {
        if (!value.HasText)
        {
            return;
        }
        var span = result.GetSpan(value.Text);
        if (value.TrailingTokenCount != 0)
        {
            result.ErrorAdd_UnexpectedElementReferenceKind("Spot", "merce", "Unit, Class", value.Text);
            return;
        }
        ref var reference = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
        if (Unsafe.IsNullRef(ref reference))
        {
            result.ErrorAdd_UnexpectedElementReferenceKind("Spot", "merce", "Unit, Class", value.Text);
            return;
        }
        switch (reference.Kind)
        {
            case ReferenceKind.Unit:
                value.ReferenceId = result.UnitSet.GetOrAdd(span, value.Text);
                value.ReferenceKind = ReferenceKind.Unit;
                value.HasReference = true;
                break;
            case ReferenceKind.Class:
                value.ReferenceId = result.ClassSet.GetOrAdd(span, value.Text);
                value.ReferenceKind = ReferenceKind.Class;
                value.HasReference = true;
                break;
            default:
                result.ErrorAdd_UnexpectedElementReferenceKind("Spot", "merce", "Unit, Class", value.Text);
                break;
        }
    }

    private void SpecialTreatment_spot_monster(ref Result result, ref SpotNode node, ref Pair_NullableString_NullableInt value)
    {
        if (!value.HasText)
        {
            return;
        }
        var span = result.GetSpan(value.Text);
        if (value.TrailingTokenCount != 0)
        {
            result.ErrorAdd_UnexpectedElementReferenceKind("Spot", "monster", "Unit, Class", value.Text);
            return;
        }
        ref var reference = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
        if (Unsafe.IsNullRef(ref reference))
        {
            result.ErrorAdd_UnexpectedElementReferenceKind("Spot", "monster", "Unit, Class", value.Text);
            return;
        }
        switch (reference.Kind)
        {
            case ReferenceKind.Unit:
                value.ReferenceId = result.UnitSet.GetOrAdd(span, value.Text);
                value.ReferenceKind = ReferenceKind.Unit;
                value.HasReference = true;
                break;
            case ReferenceKind.Class:
                value.ReferenceId = result.ClassSet.GetOrAdd(span, value.Text);
                value.ReferenceKind = ReferenceKind.Class;
                value.HasReference = true;
                break;
            default:
                result.ErrorAdd_UnexpectedElementReferenceKind("Spot", "monster", "Unit, Class", value.Text);
                break;
        }
    }

    private void SpecialTreatment_spot_member(ref Result result, ref SpotNode node, ref Pair_NullableString_NullableInt value)
    {
        if (!value.HasText)
        {
            return;
        }
        var span = result.GetSpan(value.Text);
        if (value.TrailingTokenCount != 0)
        {
            result.ErrorAdd_UnexpectedElementReferenceKind("Spot", "member", "Unit, Class", value.Text);
            return;
        }
        ref var reference = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
        if (Unsafe.IsNullRef(ref reference))
        {
            result.ErrorAdd_UnexpectedElementReferenceKind("Spot", "member", "Unit, Class", value.Text);
            return;
        }
        switch (reference.Kind)
        {
            case ReferenceKind.Unit:
                value.ReferenceId = result.UnitSet.GetOrAdd(span, value.Text);
                value.ReferenceKind = ReferenceKind.Unit;
                value.HasReference = true;
                break;
            case ReferenceKind.Class:
                value.ReferenceId = result.ClassSet.GetOrAdd(span, value.Text);
                value.ReferenceKind = ReferenceKind.Class;
                value.HasReference = true;
                break;
            default:
                result.ErrorAdd_UnexpectedElementReferenceKind("Spot", "member", "Unit, Class", value.Text);
                break;
        }
    }

    private void SpecialTreatment_unit_member(ref Result result, ref UnitNode node, ref Pair_NullableString_NullableInt value)
    {
        if (!value.HasText)
        {
            return;
        }
        var span = result.GetSpan(value.Text);
        if (value.TrailingTokenCount != 0)
        {
            result.ErrorAdd_UnexpectedElementReferenceKind("Unit", "member", "Unit, Class", value.Text);
            return;
        }
        ref var reference = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
        if (Unsafe.IsNullRef(ref reference))
        {
            result.ErrorAdd_UnexpectedElementReferenceKind("Unit", "member", "Unit, Class", value.Text);
            return;
        }
        switch (reference.Kind)
        {
            case ReferenceKind.Unit:
                value.ReferenceId = result.UnitSet.GetOrAdd(span, value.Text);
                value.ReferenceKind = ReferenceKind.Unit;
                value.HasReference = true;
                break;
            case ReferenceKind.Class:
                value.ReferenceId = result.ClassSet.GetOrAdd(span, value.Text);
                value.ReferenceKind = ReferenceKind.Class;
                value.HasReference = true;
                break;
            default:
                result.ErrorAdd_UnexpectedElementReferenceKind("Unit", "member", "Unit, Class", value.Text);
                break;
        }
    }

    private void SpecialTreatment_unit_merce(ref Result result, ref UnitNode node, ref Pair_NullableString_NullableInt value)
    {
        if (!value.HasText)
        {
            return;
        }
        var span = result.GetSpan(value.Text);
        if (value.TrailingTokenCount != 0)
        {
            result.ErrorAdd_UnexpectedElementReferenceKind("Unit", "merce", "Unit, Class", value.Text);
            return;
        }
        ref var reference = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
        if (Unsafe.IsNullRef(ref reference))
        {
            result.ErrorAdd_UnexpectedElementReferenceKind("Unit", "merce", "Unit, Class", value.Text);
            return;
        }
        switch (reference.Kind)
        {
            case ReferenceKind.Unit:
                value.ReferenceId = result.UnitSet.GetOrAdd(span, value.Text);
                value.ReferenceKind = ReferenceKind.Unit;
                value.HasReference = true;
                break;
            case ReferenceKind.Class:
                value.ReferenceId = result.ClassSet.GetOrAdd(span, value.Text);
                value.ReferenceKind = ReferenceKind.Class;
                value.HasReference = true;
                break;
            default:
                result.ErrorAdd_UnexpectedElementReferenceKind("Unit", "merce", "Unit, Class", value.Text);
                break;
        }
    }

    private void SpecialTreatment_unit_skill(ref Result result, ref UnitNode node, ref Pair_NullableString_NullableInt value)
    {
        if (!value.HasText)
        {
            return;
        }
        var span = result.GetSpan(value.Text);
        if (value.TrailingTokenCount != 0)
        {
            result.ErrorAdd_UnexpectedElementReferenceKind("Unit", "skill", "Skill, Skillset", value.Text);
            return;
        }
        ref var reference = ref AmbiguousDictionary_SkillSkillset.TryGet(span);
        if (Unsafe.IsNullRef(ref reference))
        {
            result.ErrorAdd_UnexpectedElementReferenceKind("Unit", "skill", "Skill, Skillset", value.Text);
            return;
        }
        switch (reference.Kind)
        {
           case ReferenceKind.Skill:
               value.ReferenceId = result.SkillSet.GetOrAdd(span, value.Text);
               value.ReferenceKind = ReferenceKind.Skill;
               value.HasReference = true;
               break;
            case ReferenceKind.Skillset:
                value.ReferenceId = result.SkillsetSet.GetOrAdd(span, value.Text);
                value.ReferenceKind = ReferenceKind.Skillset;
                value.HasReference = true;
                break;
            default:
                result.ErrorAdd_UnexpectedElementReferenceKind("Unit", "skill", "Skill, Skillset", value.Text);
                break;
        }
    }

    private void SpecialTreatment_unit_skill2(ref Result result, ref UnitNode node, ref Pair_NullableString_NullableInt value)
    {
        if (!value.HasText)
        {
            return;
        }
        var span = result.GetSpan(value.Text);
        if (value.TrailingTokenCount != 0)
        {
            result.ErrorAdd_UnexpectedElementReferenceKind("Unit", "skill2", "Skill, Skillset", value.Text);
            return;
        }
        ref var reference = ref AmbiguousDictionary_SkillSkillset.TryGet(span);
        if (Unsafe.IsNullRef(ref reference))
        {
            result.ErrorAdd_UnexpectedElementReferenceKind("Unit", "skill2", "Skill, Skillset", value.Text);
            return;
        }
        switch (reference.Kind)
        {
           case ReferenceKind.Skill:
               value.ReferenceId = result.SkillSet.GetOrAdd(span, value.Text);
               value.ReferenceKind = ReferenceKind.Skill;
               value.HasReference = true;
               break;
            case ReferenceKind.Skillset:
                value.ReferenceId = result.SkillsetSet.GetOrAdd(span, value.Text);
                value.ReferenceKind = ReferenceKind.Skillset;
                value.HasReference = true;
                break;
            default:
                result.ErrorAdd_UnexpectedElementReferenceKind("Unit", "skill2", "Skill, Skillset", value.Text);
                break;
        }
    }

    private void SpecialTreatment_unit_learn(ref Result result, ref UnitNode node, ref Pair_NullableString_NullableInt value)
    {
        if (!value.HasText)
        {
            return;
        }
        var span = result.GetSpan(value.Text);
        if (value.TrailingTokenCount != 0)
        {
            result.ErrorAdd_UnexpectedElementReferenceKind("Unit", "learn", "Skill, Skillset", value.Text);
            return;
        }
        ref var reference = ref AmbiguousDictionary_SkillSkillset.TryGet(span);
        if (Unsafe.IsNullRef(ref reference))
        {
            result.ErrorAdd_UnexpectedElementReferenceKind("Unit", "learn", "Skill, Skillset", value.Text);
            return;
        }
        switch (reference.Kind)
        {
           case ReferenceKind.Skill:
               value.ReferenceId = result.SkillSet.GetOrAdd(span, value.Text);
               value.ReferenceKind = ReferenceKind.Skill;
               value.HasReference = true;
               break;
            case ReferenceKind.Skillset:
                value.ReferenceId = result.SkillsetSet.GetOrAdd(span, value.Text);
                value.ReferenceKind = ReferenceKind.Skillset;
                value.HasReference = true;
                break;
            default:
                result.ErrorAdd_UnexpectedElementReferenceKind("Unit", "learn", "Skill, Skillset", value.Text);
                break;
        }
    }

    private void SpecialTreatment_unit_delskill(ref Result result, ref UnitNode node, ref Pair_NullableString_NullableInt value)
    {
        if (!value.HasText)
        {
            return;
        }
        var span = result.GetSpan(value.Text);
        if (value.TrailingTokenCount != 0)
        {
            result.ErrorAdd_UnexpectedElementReferenceKind("Unit", "delskill", "Skill, Skillset", value.Text);
            return;
        }
        ref var reference = ref AmbiguousDictionary_SkillSkillset.TryGet(span);
        if (Unsafe.IsNullRef(ref reference))
        {
            result.ErrorAdd_UnexpectedElementReferenceKind("Unit", "delskill", "Skill, Skillset", value.Text);
            return;
        }
        switch (reference.Kind)
        {
           case ReferenceKind.Skill:
               value.ReferenceId = result.SkillSet.GetOrAdd(span, value.Text);
               value.ReferenceKind = ReferenceKind.Skill;
               value.HasReference = true;
               break;
            case ReferenceKind.Skillset:
                value.ReferenceId = result.SkillsetSet.GetOrAdd(span, value.Text);
                value.ReferenceKind = ReferenceKind.Skillset;
                value.HasReference = true;
                break;
            default:
                result.ErrorAdd_UnexpectedElementReferenceKind("Unit", "delskill", "Skill, Skillset", value.Text);
                break;
        }
    }

    private void SpecialTreatment_unit_delskill2(ref Result result, ref UnitNode node, ref Pair_NullableString_NullableInt value)
    {
        if (!value.HasText)
        {
            return;
        }
        var span = result.GetSpan(value.Text);
        if (value.TrailingTokenCount != 0)
        {
            result.ErrorAdd_UnexpectedElementReferenceKind("Unit", "delskill2", "Skill, Skillset", value.Text);
            return;
        }
        ref var reference = ref AmbiguousDictionary_SkillSkillset.TryGet(span);
        if (Unsafe.IsNullRef(ref reference))
        {
            result.ErrorAdd_UnexpectedElementReferenceKind("Unit", "delskill2", "Skill, Skillset", value.Text);
            return;
        }
        switch (reference.Kind)
        {
           case ReferenceKind.Skill:
               value.ReferenceId = result.SkillSet.GetOrAdd(span, value.Text);
               value.ReferenceKind = ReferenceKind.Skill;
               value.HasReference = true;
               break;
            case ReferenceKind.Skillset:
                value.ReferenceId = result.SkillsetSet.GetOrAdd(span, value.Text);
                value.ReferenceKind = ReferenceKind.Skillset;
                value.HasReference = true;
                break;
            default:
                result.ErrorAdd_UnexpectedElementReferenceKind("Unit", "delskill2", "Skill, Skillset", value.Text);
                break;
        }
    }

    private void SpecialTreatment_unit_leader_skill(ref Result result, ref UnitNode node, ref Pair_NullableString_NullableInt value)
    {
        if (!value.HasText)
        {
            return;
        }
        var span = result.GetSpan(value.Text);
        if (value.TrailingTokenCount != 0)
        {
            result.ErrorAdd_UnexpectedElementReferenceKind("Unit", "leader_skill", "Skill, Skillset", value.Text);
            return;
        }
        ref var reference = ref AmbiguousDictionary_SkillSkillset.TryGet(span);
        if (Unsafe.IsNullRef(ref reference))
        {
            result.ErrorAdd_UnexpectedElementReferenceKind("Unit", "leader_skill", "Skill, Skillset", value.Text);
            return;
        }
        switch (reference.Kind)
        {
           case ReferenceKind.Skill:
               value.ReferenceId = result.SkillSet.GetOrAdd(span, value.Text);
               value.ReferenceKind = ReferenceKind.Skill;
               value.HasReference = true;
               break;
            case ReferenceKind.Skillset:
                value.ReferenceId = result.SkillsetSet.GetOrAdd(span, value.Text);
                value.ReferenceKind = ReferenceKind.Skillset;
                value.HasReference = true;
                break;
            default:
                result.ErrorAdd_UnexpectedElementReferenceKind("Unit", "leader_skill", "Skill, Skillset", value.Text);
                break;
        }
    }

    private void SpecialTreatment_unit_assist_skill(ref Result result, ref UnitNode node, ref Pair_NullableString_NullableInt value)
    {
        if (!value.HasText)
        {
            return;
        }
        var span = result.GetSpan(value.Text);
        if (value.TrailingTokenCount != 0)
        {
            result.ErrorAdd_UnexpectedElementReferenceKind("Unit", "assist_skill", "Skill, Skillset", value.Text);
            return;
        }
        ref var reference = ref AmbiguousDictionary_SkillSkillset.TryGet(span);
        if (Unsafe.IsNullRef(ref reference))
        {
            result.ErrorAdd_UnexpectedElementReferenceKind("Unit", "assist_skill", "Skill, Skillset", value.Text);
            return;
        }
        switch (reference.Kind)
        {
           case ReferenceKind.Skill:
               value.ReferenceId = result.SkillSet.GetOrAdd(span, value.Text);
               value.ReferenceKind = ReferenceKind.Skill;
               value.HasReference = true;
               break;
            case ReferenceKind.Skillset:
                value.ReferenceId = result.SkillsetSet.GetOrAdd(span, value.Text);
                value.ReferenceKind = ReferenceKind.Skillset;
                value.HasReference = true;
                break;
            default:
                result.ErrorAdd_UnexpectedElementReferenceKind("Unit", "assist_skill", "Skill, Skillset", value.Text);
                break;
        }
    }

    private void SpecialTreatment_unit_staff(ref Result result, ref UnitNode node, ref Pair_NullableString_NullableInt value)
    {
        if (!value.HasText)
        {
            return;
        }
        var span = result.GetSpan(value.Text);
        if (value.TrailingTokenCount != 0)
        {
            result.ErrorAdd_UnexpectedElementReferenceKind("Unit", "staff", "Race, Class", value.Text);
            return;
        }
        ref var reference = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
        if (Unsafe.IsNullRef(ref reference))
        {
            result.ErrorAdd_UnexpectedElementReferenceKind("Unit", "staff", "Race, Class", value.Text);
            return;
        }
        switch (reference.Kind)
        {
            case ReferenceKind.Class:
                value.ReferenceId = result.ClassSet.GetOrAdd(span, value.Text);
                value.ReferenceKind = ReferenceKind.Class;
                value.HasReference = true;
                break;
            case ReferenceKind.Race:
                value.ReferenceId = result.RaceSet.GetOrAdd(span, value.Text);
                value.ReferenceKind = ReferenceKind.Race;
                value.HasReference = true;
                break;
            default:
                result.ErrorAdd_UnexpectedElementReferenceKind("Unit", "staff", "Race, Class", value.Text);
                break;
        }
    }

    private void SpecialTreatment_unit_castle_guard(ref Result result, ref UnitNode node, ref Pair_NullableString_NullableInt value)
    {
        if (!value.HasText)
        {
            return;
        }
        var span = result.GetSpan(value.Text);
        if (value.TrailingTokenCount != 0)
        {
            result.ErrorAdd_UnexpectedElementReferenceKind("Unit", "castle_guard", "Unit, Class", value.Text);
            return;
        }
        ref var reference = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
        if (Unsafe.IsNullRef(ref reference))
        {
            result.ErrorAdd_UnexpectedElementReferenceKind("Unit", "castle_guard", "Unit, Class", value.Text);
            return;
        }
        switch (reference.Kind)
        {
            case ReferenceKind.Unit:
                value.ReferenceId = result.UnitSet.GetOrAdd(span, value.Text);
                value.ReferenceKind = ReferenceKind.Unit;
                value.HasReference = true;
                break;
            case ReferenceKind.Class:
                value.ReferenceId = result.ClassSet.GetOrAdd(span, value.Text);
                value.ReferenceKind = ReferenceKind.Class;
                value.HasReference = true;
                break;
            default:
                result.ErrorAdd_UnexpectedElementReferenceKind("Unit", "castle_guard", "Unit, Class", value.Text);
                break;
        }
    }
}
