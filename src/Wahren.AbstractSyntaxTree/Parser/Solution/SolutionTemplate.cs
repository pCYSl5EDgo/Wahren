#nullable enable
// <auto-generated>
// THIS (.cs) FILE IS GENERATED BY T4. DO NOT CHANGE IT. CHANGE THE .tt FILE INSTEAD.
// </auto-generated>
using Wahren.AbstractSyntaxTree.Element.Statement;
using Wahren.AbstractSyntaxTree.Element.Statement.Expression;

namespace Wahren.AbstractSyntaxTree.Parser;

public interface ISolutionResolver
{    ref Result TryGetScenarioNode(uint queryFileId, ReadOnlySpan<char> name, out uint index);
    ref Result TryGetEventNode(uint queryFileId, ReadOnlySpan<char> name, out uint index);
    ref Result TryGetStoryNode(uint queryFileId, ReadOnlySpan<char> name, out uint index);
    ref Result TryGetMovetypeNode(uint queryFileId, ReadOnlySpan<char> name, out uint index);
    ref Result TryGetSkillNode(uint queryFileId, ReadOnlySpan<char> name, out uint index);
    ref Result TryGetSkillsetNode(uint queryFileId, ReadOnlySpan<char> name, out uint index);
    ref Result TryGetRaceNode(uint queryFileId, ReadOnlySpan<char> name, out uint index);
    ref Result TryGetUnitNode(uint queryFileId, ReadOnlySpan<char> name, out uint index);
    ref Result TryGetClassNode(uint queryFileId, ReadOnlySpan<char> name, out uint index);
    ref Result TryGetPowerNode(uint queryFileId, ReadOnlySpan<char> name, out uint index);
    ref Result TryGetSpotNode(uint queryFileId, ReadOnlySpan<char> name, out uint index);
    ref Result TryGetFieldNode(uint queryFileId, ReadOnlySpan<char> name, out uint index);
    ref Result TryGetObjectNode(uint queryFileId, ReadOnlySpan<char> name, out uint index);
    ref Result TryGetDungeonNode(uint queryFileId, ReadOnlySpan<char> name, out uint index);
    ref Result TryGetVoiceNode(uint queryFileId, ReadOnlySpan<char> name, out uint index);
}

public sealed class FailResolver : ISolutionResolver
{
    public static readonly FailResolver Default = new();
    public ref Result TryGetScenarioNode(uint queryFileId, ReadOnlySpan<char> name, out uint index)
    {
        index = 0;
        return ref Unsafe.NullRef<Result>();
    }
    public ref Result TryGetEventNode(uint queryFileId, ReadOnlySpan<char> name, out uint index)
    {
        index = 0;
        return ref Unsafe.NullRef<Result>();
    }
    public ref Result TryGetStoryNode(uint queryFileId, ReadOnlySpan<char> name, out uint index)
    {
        index = 0;
        return ref Unsafe.NullRef<Result>();
    }
    public ref Result TryGetMovetypeNode(uint queryFileId, ReadOnlySpan<char> name, out uint index)
    {
        index = 0;
        return ref Unsafe.NullRef<Result>();
    }
    public ref Result TryGetSkillNode(uint queryFileId, ReadOnlySpan<char> name, out uint index)
    {
        index = 0;
        return ref Unsafe.NullRef<Result>();
    }
    public ref Result TryGetSkillsetNode(uint queryFileId, ReadOnlySpan<char> name, out uint index)
    {
        index = 0;
        return ref Unsafe.NullRef<Result>();
    }
    public ref Result TryGetRaceNode(uint queryFileId, ReadOnlySpan<char> name, out uint index)
    {
        index = 0;
        return ref Unsafe.NullRef<Result>();
    }
    public ref Result TryGetUnitNode(uint queryFileId, ReadOnlySpan<char> name, out uint index)
    {
        index = 0;
        return ref Unsafe.NullRef<Result>();
    }
    public ref Result TryGetClassNode(uint queryFileId, ReadOnlySpan<char> name, out uint index)
    {
        index = 0;
        return ref Unsafe.NullRef<Result>();
    }
    public ref Result TryGetPowerNode(uint queryFileId, ReadOnlySpan<char> name, out uint index)
    {
        index = 0;
        return ref Unsafe.NullRef<Result>();
    }
    public ref Result TryGetSpotNode(uint queryFileId, ReadOnlySpan<char> name, out uint index)
    {
        index = 0;
        return ref Unsafe.NullRef<Result>();
    }
    public ref Result TryGetFieldNode(uint queryFileId, ReadOnlySpan<char> name, out uint index)
    {
        index = 0;
        return ref Unsafe.NullRef<Result>();
    }
    public ref Result TryGetObjectNode(uint queryFileId, ReadOnlySpan<char> name, out uint index)
    {
        index = 0;
        return ref Unsafe.NullRef<Result>();
    }
    public ref Result TryGetDungeonNode(uint queryFileId, ReadOnlySpan<char> name, out uint index)
    {
        index = 0;
        return ref Unsafe.NullRef<Result>();
    }
    public ref Result TryGetVoiceNode(uint queryFileId, ReadOnlySpan<char> name, out uint index)
    {
        index = 0;
        return ref Unsafe.NullRef<Result>();
    }
}

public sealed partial class Solution : ISolutionResolver
{
	public ref Result TryGetScenarioNode(uint queryFileId, ReadOnlySpan<char> name, out uint index)
    {
        ref var pair = ref Scenario.TryGetTrack(name, queryFileId);
        if (!Unsafe.IsNullRef(ref pair))
        {
            index = pair.Id;
            return ref Files[pair.FileId];
        }
        
        var files = Files.AsSpan();
        for (int i = 0; i < files.Length; ++i)
        {
            ref var file = ref files[i];
            ref var list = ref file.ScenarioNodeList;
            uint end = (uint)list.Count;
            if (end == 0)
            {
                continue;
            }

            for (index = 0; index != end; ++index)
            {
                ref var node = ref list[index];
                if (name.SequenceEqual(file.GetSpan(node.Name)))
                {
                    Scenario.TryRegisterTrack(name, ((uint)i, index), queryFileId);
                    return ref file;
                }
            }
        }

        index = 0;
        return ref Unsafe.NullRef<Result>();
    }

	public ref Result TryGetEventNode(uint queryFileId, ReadOnlySpan<char> name, out uint index)
    {
        ref var pair = ref Event.TryGetTrack(name, queryFileId);
        if (!Unsafe.IsNullRef(ref pair))
        {
            index = pair.Id;
            return ref Files[pair.FileId];
        }
        
        var files = Files.AsSpan();
        for (int i = 0; i < files.Length; ++i)
        {
            ref var file = ref files[i];
            ref var list = ref file.EventNodeList;
            uint end = (uint)list.Count;
            if (end == 0)
            {
                continue;
            }

            for (index = 0; index != end; ++index)
            {
                ref var node = ref list[index];
                if (name.SequenceEqual(file.GetSpan(node.Name)))
                {
                    Event.TryRegisterTrack(name, ((uint)i, index), queryFileId);
                    return ref file;
                }
            }
        }

        index = 0;
        return ref Unsafe.NullRef<Result>();
    }

	public ref Result TryGetStoryNode(uint queryFileId, ReadOnlySpan<char> name, out uint index)
    {
        ref var pair = ref Story.TryGetTrack(name, queryFileId);
        if (!Unsafe.IsNullRef(ref pair))
        {
            index = pair.Id;
            return ref Files[pair.FileId];
        }
        
        var files = Files.AsSpan();
        for (int i = 0; i < files.Length; ++i)
        {
            ref var file = ref files[i];
            ref var list = ref file.StoryNodeList;
            uint end = (uint)list.Count;
            if (end == 0)
            {
                continue;
            }

            for (index = 0; index != end; ++index)
            {
                ref var node = ref list[index];
                if (name.SequenceEqual(file.GetSpan(node.Name)))
                {
                    Story.TryRegisterTrack(name, ((uint)i, index), queryFileId);
                    return ref file;
                }
            }
        }

        index = 0;
        return ref Unsafe.NullRef<Result>();
    }

	public ref Result TryGetMovetypeNode(uint queryFileId, ReadOnlySpan<char> name, out uint index)
    {
        ref var pair = ref Movetype.TryGetTrack(name, queryFileId);
        if (!Unsafe.IsNullRef(ref pair))
        {
            index = pair.Id;
            return ref Files[pair.FileId];
        }
        
        var files = Files.AsSpan();
        for (int i = 0; i < files.Length; ++i)
        {
            ref var file = ref files[i];
            ref var list = ref file.MovetypeNodeList;
            uint end = (uint)list.Count;
            if (end == 0)
            {
                continue;
            }

            for (index = 0; index != end; ++index)
            {
                ref var node = ref list[index];
                if (name.SequenceEqual(file.GetSpan(node.Name)))
                {
                    Movetype.TryRegisterTrack(name, ((uint)i, index), queryFileId);
                    return ref file;
                }
            }
        }

        index = 0;
        return ref Unsafe.NullRef<Result>();
    }

	public ref Result TryGetSkillNode(uint queryFileId, ReadOnlySpan<char> name, out uint index)
    {
        ref var pair = ref Skill.TryGetTrack(name, queryFileId);
        if (!Unsafe.IsNullRef(ref pair))
        {
            index = pair.Id;
            return ref Files[pair.FileId];
        }
        
        var files = Files.AsSpan();
        for (int i = 0; i < files.Length; ++i)
        {
            ref var file = ref files[i];
            ref var list = ref file.SkillNodeList;
            uint end = (uint)list.Count;
            if (end == 0)
            {
                continue;
            }

            for (index = 0; index != end; ++index)
            {
                ref var node = ref list[index];
                if (name.SequenceEqual(file.GetSpan(node.Name)))
                {
                    Skill.TryRegisterTrack(name, ((uint)i, index), queryFileId);
                    return ref file;
                }
            }
        }

        index = 0;
        return ref Unsafe.NullRef<Result>();
    }

	public ref Result TryGetSkillsetNode(uint queryFileId, ReadOnlySpan<char> name, out uint index)
    {
        ref var pair = ref Skillset.TryGetTrack(name, queryFileId);
        if (!Unsafe.IsNullRef(ref pair))
        {
            index = pair.Id;
            return ref Files[pair.FileId];
        }
        
        var files = Files.AsSpan();
        for (int i = 0; i < files.Length; ++i)
        {
            ref var file = ref files[i];
            ref var list = ref file.SkillsetNodeList;
            uint end = (uint)list.Count;
            if (end == 0)
            {
                continue;
            }

            for (index = 0; index != end; ++index)
            {
                ref var node = ref list[index];
                if (name.SequenceEqual(file.GetSpan(node.Name)))
                {
                    Skillset.TryRegisterTrack(name, ((uint)i, index), queryFileId);
                    return ref file;
                }
            }
        }

        index = 0;
        return ref Unsafe.NullRef<Result>();
    }

	public ref Result TryGetRaceNode(uint queryFileId, ReadOnlySpan<char> name, out uint index)
    {
        ref var pair = ref Race.TryGetTrack(name, queryFileId);
        if (!Unsafe.IsNullRef(ref pair))
        {
            index = pair.Id;
            return ref Files[pair.FileId];
        }
        
        var files = Files.AsSpan();
        for (int i = 0; i < files.Length; ++i)
        {
            ref var file = ref files[i];
            ref var list = ref file.RaceNodeList;
            uint end = (uint)list.Count;
            if (end == 0)
            {
                continue;
            }

            for (index = 0; index != end; ++index)
            {
                ref var node = ref list[index];
                if (name.SequenceEqual(file.GetSpan(node.Name)))
                {
                    Race.TryRegisterTrack(name, ((uint)i, index), queryFileId);
                    return ref file;
                }
            }
        }

        index = 0;
        return ref Unsafe.NullRef<Result>();
    }

	public ref Result TryGetUnitNode(uint queryFileId, ReadOnlySpan<char> name, out uint index)
    {
        ref var pair = ref Unit.TryGetTrack(name, queryFileId);
        if (!Unsafe.IsNullRef(ref pair))
        {
            index = pair.Id;
            return ref Files[pair.FileId];
        }
        
        var files = Files.AsSpan();
        for (int i = 0; i < files.Length; ++i)
        {
            ref var file = ref files[i];
            ref var list = ref file.UnitNodeList;
            uint end = (uint)list.Count;
            if (end == 0)
            {
                continue;
            }

            for (index = 0; index != end; ++index)
            {
                ref var node = ref list[index];
                if (name.SequenceEqual(file.GetSpan(node.Name)))
                {
                    Unit.TryRegisterTrack(name, ((uint)i, index), queryFileId);
                    return ref file;
                }
            }
        }

        index = 0;
        return ref Unsafe.NullRef<Result>();
    }

	public ref Result TryGetClassNode(uint queryFileId, ReadOnlySpan<char> name, out uint index)
    {
        ref var pair = ref Class.TryGetTrack(name, queryFileId);
        if (!Unsafe.IsNullRef(ref pair))
        {
            index = pair.Id;
            return ref Files[pair.FileId];
        }
        
        var files = Files.AsSpan();
        for (int i = 0; i < files.Length; ++i)
        {
            ref var file = ref files[i];
            ref var list = ref file.ClassNodeList;
            uint end = (uint)list.Count;
            if (end == 0)
            {
                continue;
            }

            for (index = 0; index != end; ++index)
            {
                ref var node = ref list[index];
                if (name.SequenceEqual(file.GetSpan(node.Name)))
                {
                    Class.TryRegisterTrack(name, ((uint)i, index), queryFileId);
                    return ref file;
                }
            }
        }

        index = 0;
        return ref Unsafe.NullRef<Result>();
    }

	public ref Result TryGetPowerNode(uint queryFileId, ReadOnlySpan<char> name, out uint index)
    {
        ref var pair = ref Power.TryGetTrack(name, queryFileId);
        if (!Unsafe.IsNullRef(ref pair))
        {
            index = pair.Id;
            return ref Files[pair.FileId];
        }
        
        var files = Files.AsSpan();
        for (int i = 0; i < files.Length; ++i)
        {
            ref var file = ref files[i];
            ref var list = ref file.PowerNodeList;
            uint end = (uint)list.Count;
            if (end == 0)
            {
                continue;
            }

            for (index = 0; index != end; ++index)
            {
                ref var node = ref list[index];
                if (name.SequenceEqual(file.GetSpan(node.Name)))
                {
                    Power.TryRegisterTrack(name, ((uint)i, index), queryFileId);
                    return ref file;
                }
            }
        }

        index = 0;
        return ref Unsafe.NullRef<Result>();
    }

	public ref Result TryGetSpotNode(uint queryFileId, ReadOnlySpan<char> name, out uint index)
    {
        ref var pair = ref Spot.TryGetTrack(name, queryFileId);
        if (!Unsafe.IsNullRef(ref pair))
        {
            index = pair.Id;
            return ref Files[pair.FileId];
        }
        
        var files = Files.AsSpan();
        for (int i = 0; i < files.Length; ++i)
        {
            ref var file = ref files[i];
            ref var list = ref file.SpotNodeList;
            uint end = (uint)list.Count;
            if (end == 0)
            {
                continue;
            }

            for (index = 0; index != end; ++index)
            {
                ref var node = ref list[index];
                if (name.SequenceEqual(file.GetSpan(node.Name)))
                {
                    Spot.TryRegisterTrack(name, ((uint)i, index), queryFileId);
                    return ref file;
                }
            }
        }

        index = 0;
        return ref Unsafe.NullRef<Result>();
    }

	public ref Result TryGetFieldNode(uint queryFileId, ReadOnlySpan<char> name, out uint index)
    {
        ref var pair = ref Field.TryGetTrack(name, queryFileId);
        if (!Unsafe.IsNullRef(ref pair))
        {
            index = pair.Id;
            return ref Files[pair.FileId];
        }
        
        var files = Files.AsSpan();
        for (int i = 0; i < files.Length; ++i)
        {
            ref var file = ref files[i];
            ref var list = ref file.FieldNodeList;
            uint end = (uint)list.Count;
            if (end == 0)
            {
                continue;
            }

            for (index = 0; index != end; ++index)
            {
                ref var node = ref list[index];
                if (name.SequenceEqual(file.GetSpan(node.Name)))
                {
                    Field.TryRegisterTrack(name, ((uint)i, index), queryFileId);
                    return ref file;
                }
            }
        }

        index = 0;
        return ref Unsafe.NullRef<Result>();
    }

	public ref Result TryGetObjectNode(uint queryFileId, ReadOnlySpan<char> name, out uint index)
    {
        ref var pair = ref Object.TryGetTrack(name, queryFileId);
        if (!Unsafe.IsNullRef(ref pair))
        {
            index = pair.Id;
            return ref Files[pair.FileId];
        }
        
        var files = Files.AsSpan();
        for (int i = 0; i < files.Length; ++i)
        {
            ref var file = ref files[i];
            ref var list = ref file.ObjectNodeList;
            uint end = (uint)list.Count;
            if (end == 0)
            {
                continue;
            }

            for (index = 0; index != end; ++index)
            {
                ref var node = ref list[index];
                if (name.SequenceEqual(file.GetSpan(node.Name)))
                {
                    Object.TryRegisterTrack(name, ((uint)i, index), queryFileId);
                    return ref file;
                }
            }
        }

        index = 0;
        return ref Unsafe.NullRef<Result>();
    }

	public ref Result TryGetDungeonNode(uint queryFileId, ReadOnlySpan<char> name, out uint index)
    {
        ref var pair = ref Dungeon.TryGetTrack(name, queryFileId);
        if (!Unsafe.IsNullRef(ref pair))
        {
            index = pair.Id;
            return ref Files[pair.FileId];
        }
        
        var files = Files.AsSpan();
        for (int i = 0; i < files.Length; ++i)
        {
            ref var file = ref files[i];
            ref var list = ref file.DungeonNodeList;
            uint end = (uint)list.Count;
            if (end == 0)
            {
                continue;
            }

            for (index = 0; index != end; ++index)
            {
                ref var node = ref list[index];
                if (name.SequenceEqual(file.GetSpan(node.Name)))
                {
                    Dungeon.TryRegisterTrack(name, ((uint)i, index), queryFileId);
                    return ref file;
                }
            }
        }

        index = 0;
        return ref Unsafe.NullRef<Result>();
    }

	public ref Result TryGetVoiceNode(uint queryFileId, ReadOnlySpan<char> name, out uint index)
    {
        ref var pair = ref Voice.TryGetTrack(name, queryFileId);
        if (!Unsafe.IsNullRef(ref pair))
        {
            index = pair.Id;
            return ref Files[pair.FileId];
        }
        
        var files = Files.AsSpan();
        for (int i = 0; i < files.Length; ++i)
        {
            ref var file = ref files[i];
            ref var list = ref file.VoiceNodeList;
            uint end = (uint)list.Count;
            if (end == 0)
            {
                continue;
            }

            for (index = 0; index != end; ++index)
            {
                ref var node = ref list[index];
                if (name.SequenceEqual(file.GetSpan(node.Name)))
                {
                    Voice.TryRegisterTrack(name, ((uint)i, index), queryFileId);
                    return ref file;
                }
            }
        }

        index = 0;
        return ref Unsafe.NullRef<Result>();
    }

    public bool CheckExistance()
    {
        System.Text.StringBuilder? builder = null;
        var fileSpan = Files.AsSpan();
        var success = true;

        for (uint fileIndex = 0; fileIndex < fileSpan.Length; ++fileIndex)
        {
            ref var file = ref fileSpan[(int)fileIndex];
            ref var set = ref file.ScenarioSet;
            for (uint i = 10, end = set.Count; i != end ; i++)
            {
                var name = set[i];
                if (!Unsafe.IsNullRef(ref TryGetScenarioNode(fileIndex, name, out _)))
                {
                    continue;
                }

                success = false;
                builder ??= new();
                builder.Clear();
                builder.Append($"scenario '{name}' is not found in this solution.");
                foreach (var tokenId in set.References[i].AsSpan())
                {
                    ref var position = ref file.TokenList[tokenId].Range.StartInclusive;
                    builder.Append($"\n  {file.FilePath}({position.Line + 1}, {position.Offset + 1})");
                }
                SolutionErrorList.Add(new(builder.ToString()));
            }
        }

        for (uint fileIndex = 0; fileIndex < fileSpan.Length; ++fileIndex)
        {
            ref var file = ref fileSpan[(int)fileIndex];
            ref var set = ref file.EventSet;
            for (uint i = 0, end = set.Count; i != end ; i++)
            {
                var name = set[i];
                if (!Unsafe.IsNullRef(ref TryGetEventNode(fileIndex, name, out _)))
                {
                    continue;
                }

                success = false;
                builder ??= new();
                builder.Clear();
                builder.Append($"event '{name}' is not found in this solution.");
                foreach (var tokenId in set.References[i].AsSpan())
                {
                    ref var position = ref file.TokenList[tokenId].Range.StartInclusive;
                    builder.Append($"\n  {file.FilePath}({position.Line + 1}, {position.Offset + 1})");
                }
                SolutionErrorList.Add(new(builder.ToString()));
            }
        }

        for (uint fileIndex = 0; fileIndex < fileSpan.Length; ++fileIndex)
        {
            ref var file = ref fileSpan[(int)fileIndex];
            ref var set = ref file.StorySet;
            for (uint i = 0, end = set.Count; i != end ; i++)
            {
                var name = set[i];
                if (!Unsafe.IsNullRef(ref TryGetStoryNode(fileIndex, name, out _)))
                {
                    continue;
                }

                success = false;
                builder ??= new();
                builder.Clear();
                builder.Append($"story '{name}' is not found in this solution.");
                foreach (var tokenId in set.References[i].AsSpan())
                {
                    ref var position = ref file.TokenList[tokenId].Range.StartInclusive;
                    builder.Append($"\n  {file.FilePath}({position.Line + 1}, {position.Offset + 1})");
                }
                SolutionErrorList.Add(new(builder.ToString()));
            }
        }

        for (uint fileIndex = 0; fileIndex < fileSpan.Length; ++fileIndex)
        {
            ref var file = ref fileSpan[(int)fileIndex];
            ref var set = ref file.MovetypeSet;
            for (uint i = 0, end = set.Count; i != end ; i++)
            {
                var name = set[i];
                if (!Unsafe.IsNullRef(ref TryGetMovetypeNode(fileIndex, name, out _)))
                {
                    continue;
                }

                success = false;
                builder ??= new();
                builder.Clear();
                builder.Append($"movetype '{name}' is not found in this solution.");
                foreach (var tokenId in set.References[i].AsSpan())
                {
                    ref var position = ref file.TokenList[tokenId].Range.StartInclusive;
                    builder.Append($"\n  {file.FilePath}({position.Line + 1}, {position.Offset + 1})");
                }
                SolutionErrorList.Add(new(builder.ToString()));
            }
        }

        for (uint fileIndex = 0; fileIndex < fileSpan.Length; ++fileIndex)
        {
            ref var file = ref fileSpan[(int)fileIndex];
            ref var set = ref file.SkillSet;
            for (uint i = 0, end = set.Count; i != end ; i++)
            {
                var name = set[i];
                if (!Unsafe.IsNullRef(ref TryGetSkillNode(fileIndex, name, out _)))
                {
                    continue;
                }

                success = false;
                builder ??= new();
                builder.Clear();
                builder.Append($"skill '{name}' is not found in this solution.");
                foreach (var tokenId in set.References[i].AsSpan())
                {
                    ref var position = ref file.TokenList[tokenId].Range.StartInclusive;
                    builder.Append($"\n  {file.FilePath}({position.Line + 1}, {position.Offset + 1})");
                }
                SolutionErrorList.Add(new(builder.ToString()));
            }
        }

        for (uint fileIndex = 0; fileIndex < fileSpan.Length; ++fileIndex)
        {
            ref var file = ref fileSpan[(int)fileIndex];
            ref var set = ref file.SkillsetSet;
            for (uint i = 0, end = set.Count; i != end ; i++)
            {
                var name = set[i];
                if (!Unsafe.IsNullRef(ref TryGetSkillsetNode(fileIndex, name, out _)))
                {
                    continue;
                }

                success = false;
                builder ??= new();
                builder.Clear();
                builder.Append($"skillset '{name}' is not found in this solution.");
                foreach (var tokenId in set.References[i].AsSpan())
                {
                    ref var position = ref file.TokenList[tokenId].Range.StartInclusive;
                    builder.Append($"\n  {file.FilePath}({position.Line + 1}, {position.Offset + 1})");
                }
                SolutionErrorList.Add(new(builder.ToString()));
            }
        }

        for (uint fileIndex = 0; fileIndex < fileSpan.Length; ++fileIndex)
        {
            ref var file = ref fileSpan[(int)fileIndex];
            ref var set = ref file.RaceSet;
            for (uint i = 0, end = set.Count; i != end ; i++)
            {
                var name = set[i];
                if (!Unsafe.IsNullRef(ref TryGetRaceNode(fileIndex, name, out _)))
                {
                    continue;
                }

                success = false;
                builder ??= new();
                builder.Clear();
                builder.Append($"race '{name}' is not found in this solution.");
                foreach (var tokenId in set.References[i].AsSpan())
                {
                    ref var position = ref file.TokenList[tokenId].Range.StartInclusive;
                    builder.Append($"\n  {file.FilePath}({position.Line + 1}, {position.Offset + 1})");
                }
                SolutionErrorList.Add(new(builder.ToString()));
            }
        }

        for (uint fileIndex = 0; fileIndex < fileSpan.Length; ++fileIndex)
        {
            ref var file = ref fileSpan[(int)fileIndex];
            ref var set = ref file.UnitSet;
            for (uint i = 0, end = set.Count; i != end ; i++)
            {
                var name = set[i];
                if (!Unsafe.IsNullRef(ref TryGetUnitNode(fileIndex, name, out _)))
                {
                    continue;
                }

                success = false;
                builder ??= new();
                builder.Clear();
                builder.Append($"unit '{name}' is not found in this solution.");
                foreach (var tokenId in set.References[i].AsSpan())
                {
                    ref var position = ref file.TokenList[tokenId].Range.StartInclusive;
                    builder.Append($"\n  {file.FilePath}({position.Line + 1}, {position.Offset + 1})");
                }
                SolutionErrorList.Add(new(builder.ToString()));
            }
        }

        for (uint fileIndex = 0; fileIndex < fileSpan.Length; ++fileIndex)
        {
            ref var file = ref fileSpan[(int)fileIndex];
            ref var set = ref file.ClassSet;
            for (uint i = 0, end = set.Count; i != end ; i++)
            {
                var name = set[i];
                if (!Unsafe.IsNullRef(ref TryGetClassNode(fileIndex, name, out _)))
                {
                    continue;
                }

                success = false;
                builder ??= new();
                builder.Clear();
                builder.Append($"class '{name}' is not found in this solution.");
                foreach (var tokenId in set.References[i].AsSpan())
                {
                    ref var position = ref file.TokenList[tokenId].Range.StartInclusive;
                    builder.Append($"\n  {file.FilePath}({position.Line + 1}, {position.Offset + 1})");
                }
                SolutionErrorList.Add(new(builder.ToString()));
            }
        }

        for (uint fileIndex = 0; fileIndex < fileSpan.Length; ++fileIndex)
        {
            ref var file = ref fileSpan[(int)fileIndex];
            ref var set = ref file.PowerSet;
            for (uint i = 0, end = set.Count; i != end ; i++)
            {
                var name = set[i];
                if (!Unsafe.IsNullRef(ref TryGetPowerNode(fileIndex, name, out _)))
                {
                    continue;
                }

                success = false;
                builder ??= new();
                builder.Clear();
                builder.Append($"power '{name}' is not found in this solution.");
                foreach (var tokenId in set.References[i].AsSpan())
                {
                    ref var position = ref file.TokenList[tokenId].Range.StartInclusive;
                    builder.Append($"\n  {file.FilePath}({position.Line + 1}, {position.Offset + 1})");
                }
                SolutionErrorList.Add(new(builder.ToString()));
            }
        }

        for (uint fileIndex = 0; fileIndex < fileSpan.Length; ++fileIndex)
        {
            ref var file = ref fileSpan[(int)fileIndex];
            ref var set = ref file.SpotSet;
            for (uint i = 0, end = set.Count; i != end ; i++)
            {
                var name = set[i];
                if (!Unsafe.IsNullRef(ref TryGetSpotNode(fileIndex, name, out _)))
                {
                    continue;
                }

                success = false;
                builder ??= new();
                builder.Clear();
                builder.Append($"spot '{name}' is not found in this solution.");
                foreach (var tokenId in set.References[i].AsSpan())
                {
                    ref var position = ref file.TokenList[tokenId].Range.StartInclusive;
                    builder.Append($"\n  {file.FilePath}({position.Line + 1}, {position.Offset + 1})");
                }
                SolutionErrorList.Add(new(builder.ToString()));
            }
        }

        for (uint fileIndex = 0; fileIndex < fileSpan.Length; ++fileIndex)
        {
            ref var file = ref fileSpan[(int)fileIndex];
            ref var set = ref file.FieldSet;
            for (uint i = 0, end = set.Count; i != end ; i++)
            {
                var name = set[i];
                if (!Unsafe.IsNullRef(ref TryGetFieldNode(fileIndex, name, out _)))
                {
                    continue;
                }

                success = false;
                builder ??= new();
                builder.Clear();
                builder.Append($"field '{name}' is not found in this solution.");
                foreach (var tokenId in set.References[i].AsSpan())
                {
                    ref var position = ref file.TokenList[tokenId].Range.StartInclusive;
                    builder.Append($"\n  {file.FilePath}({position.Line + 1}, {position.Offset + 1})");
                }
                SolutionErrorList.Add(new(builder.ToString()));
            }
        }

        for (uint fileIndex = 0; fileIndex < fileSpan.Length; ++fileIndex)
        {
            ref var file = ref fileSpan[(int)fileIndex];
            ref var set = ref file.ObjectSet;
            for (uint i = 0, end = set.Count; i != end ; i++)
            {
                var name = set[i];
                if (!Unsafe.IsNullRef(ref TryGetObjectNode(fileIndex, name, out _)))
                {
                    continue;
                }

                success = false;
                builder ??= new();
                builder.Clear();
                builder.Append($"object '{name}' is not found in this solution.");
                foreach (var tokenId in set.References[i].AsSpan())
                {
                    ref var position = ref file.TokenList[tokenId].Range.StartInclusive;
                    builder.Append($"\n  {file.FilePath}({position.Line + 1}, {position.Offset + 1})");
                }
                SolutionErrorList.Add(new(builder.ToString()));
            }
        }

        for (uint fileIndex = 0; fileIndex < fileSpan.Length; ++fileIndex)
        {
            ref var file = ref fileSpan[(int)fileIndex];
            ref var set = ref file.DungeonSet;
            for (uint i = 0, end = set.Count; i != end ; i++)
            {
                var name = set[i];
                if (!Unsafe.IsNullRef(ref TryGetDungeonNode(fileIndex, name, out _)))
                {
                    continue;
                }

                success = false;
                builder ??= new();
                builder.Clear();
                builder.Append($"dungeon '{name}' is not found in this solution.");
                foreach (var tokenId in set.References[i].AsSpan())
                {
                    ref var position = ref file.TokenList[tokenId].Range.StartInclusive;
                    builder.Append($"\n  {file.FilePath}({position.Line + 1}, {position.Offset + 1})");
                }
                SolutionErrorList.Add(new(builder.ToString()));
            }
        }

        for (uint fileIndex = 0; fileIndex < fileSpan.Length; ++fileIndex)
        {
            ref var file = ref fileSpan[(int)fileIndex];
            ref var set = ref file.VoiceSet;
            for (uint i = 0, end = set.Count; i != end ; i++)
            {
                var name = set[i];
                if (!Unsafe.IsNullRef(ref TryGetVoiceNode(fileIndex, name, out _)))
                {
                    continue;
                }

                success = false;
                builder ??= new();
                builder.Clear();
                builder.Append($"voice '{name}' is not found in this solution.");
                foreach (var tokenId in set.References[i].AsSpan())
                {
                    ref var position = ref file.TokenList[tokenId].Range.StartInclusive;
                    builder.Append($"\n  {file.FilePath}({position.Line + 1}, {position.Offset + 1})");
                }
                SolutionErrorList.Add(new(builder.ToString()));
            }
        }

        for (uint fileIndex = 0; fileIndex < fileSpan.Length; ++fileIndex)
        {
            ref var file = ref fileSpan[(int)fileIndex];
            ref var set = ref file.AttributeTypeSet;
            for (uint i = 12, end = set.Count; i != end ; i++)
            {
                var name = set[i];
                if (ContainsAttributeType(name))
                {
                    continue;
                }

                success = false;
                builder ??= new();
                builder.Clear();
                builder.Append($"attribute type '{name}' is not found in this solution.");
                foreach (var tokenId in set.References[i].AsSpan())
                {
                    ref var position = ref file.TokenList[tokenId].Range.StartInclusive;
                    builder.Append($"\n  {file.FilePath}({position.Line + 1}, {position.Offset + 1})");
                }
                SolutionErrorList.Add(new(builder.ToString()));
            }
        }

        return success;
    }

    private void AddReferenceAndValidate(ref Result result, CallFunctionExpression call)
    {
        var arguments = call.Arguments.AsSpan();
        if (arguments.IsEmpty)
        {
            return;
        }

        ref var argument = ref arguments[0];
        ReadOnlySpan<char> span;
        switch (call.Kind)
        {
            case FunctionKind.isSelect:
                result.ErrorList.Add(new($"Unknown action 'isSelect'.", result.TokenList[call.TokenId].Range));
                break;
            case FunctionKind.isWhoDead:
                result.ErrorList.Add(new($"Unknown action 'isWhoDead'.", result.TokenList[call.TokenId].Range));
                break;
            case FunctionKind.isGameOver:
                result.ErrorList.Add(new($"Unknown action 'isGameOver'.", result.TokenList[call.TokenId].Range));
                break;
            case FunctionKind.inPower:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorList.Add(new($"0-th argument is empty. String Variable is required by action 'inPower'.", result.TokenList[argument.TokenId].Range));
                }
                else if (span[0] == '@')
                {
                    if (span.Length != 1)
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    argument.ReferenceId = result.PowerSet.GetOrAdd(span, argument.TokenId);
                    argument.ReferenceKind = ReferenceKind.Power;
                    argument.HasReference = true;
                }

                argument = ref arguments[1];
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorList.Add(new($"1-th argument is empty.Unit, Spot, StringVariableReader is required by action 'inPower'.", result.TokenList[argument.TokenId].Range));
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorList.Add(new($"1-th argument is empty string '@'. Unit, Spot, StringVariableReader is required by action 'inPower'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (Unsafe.IsNullRef(ref track))
                    {
                        result.ErrorList.Add(new($"1-th argument {span} is not Unit, Spot, StringVariableReader required by action 'inPower'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Unit:
                                argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Unit;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Spot:
                                argument.ReferenceId = result.SpotSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Spot;
                                argument.HasReference = true;
                                break;
                          default:
                              result.ErrorList.Add(new($"1-th argument {span} is not Unit, Spot, StringVariableReader required by action 'inPower'.", result.TokenList[argument.TokenId].Range));
                              argument.HasReference = false;
                              break;
                        }
                    }
                }

                for (int i = 2; i < arguments.Length; ++i)
                {
                    argument = ref arguments[i];
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorList.Add(new($"{i}-th argument is empty.Unit, Spot, StringVariableReader is required by action 'inPower'.", result.TokenList[argument.TokenId].Range));
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length == 1)
                        {
                            result.ErrorList.Add(new($"{i}-th argument is empty string '@'. Unit, Spot, StringVariableReader is required by action 'inPower'.", result.TokenList[argument.TokenId].Range));
                        }
                        else
                        {
                            argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                        if (Unsafe.IsNullRef(ref track))
                        {
                            result.ErrorList.Add(new($"{i}-th argument {span} is not Unit, Spot, StringVariableReader required by action 'inPower'.", result.TokenList[argument.TokenId].Range));
                        }
                        else
                        {
                            switch (track.Kind)
                            {
                                case ReferenceKind.Unit:
                                    argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                    argument.ReferenceKind = ReferenceKind.Unit;
                                    argument.HasReference = true;
                                    break;
                                case ReferenceKind.Spot:
                                    argument.ReferenceId = result.SpotSet.GetOrAdd(span, argument.TokenId);
                                    argument.ReferenceKind = ReferenceKind.Spot;
                                    argument.HasReference = true;
                                    break;
                              default:
                                  result.ErrorList.Add(new($"{i}-th argument {span} is not Unit, Spot, StringVariableReader required by action 'inPower'.", result.TokenList[argument.TokenId].Range));
                                  argument.HasReference = false;
                                  break;
                            }
                        }
                    }

                }
                break;
            case FunctionKind.isPlayer:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorList.Add(new($"0-th argument is empty.Unit, Power, StringVariableReader is required by action 'isPlayer'.", result.TokenList[argument.TokenId].Range));
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorList.Add(new($"0-th argument is empty string '@'. Unit, Power, StringVariableReader is required by action 'isPlayer'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (Unsafe.IsNullRef(ref track))
                    {
                        result.ErrorList.Add(new($"0-th argument {span} is not Unit, Power, StringVariableReader required by action 'isPlayer'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Unit:
                                argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Unit;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Power:
                                argument.ReferenceId = result.PowerSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Power;
                                argument.HasReference = true;
                                break;
                          default:
                              result.ErrorList.Add(new($"0-th argument {span} is not Unit, Power, StringVariableReader required by action 'isPlayer'.", result.TokenList[argument.TokenId].Range));
                              argument.HasReference = false;
                              break;
                        }
                    }
                }

                break;
            case FunctionKind.countUnit:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorList.Add(new($"0-th argument is empty.Unit, Power, StringVariableReader is required by action 'countUnit'.", result.TokenList[argument.TokenId].Range));
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorList.Add(new($"0-th argument is empty string '@'. Unit, Power, StringVariableReader is required by action 'countUnit'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (Unsafe.IsNullRef(ref track))
                    {
                        result.ErrorList.Add(new($"0-th argument {span} is not Unit, Power, StringVariableReader required by action 'countUnit'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Unit:
                                argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Unit;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Power:
                                argument.ReferenceId = result.PowerSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Power;
                                argument.HasReference = true;
                                break;
                          default:
                              result.ErrorList.Add(new($"0-th argument {span} is not Unit, Power, StringVariableReader required by action 'countUnit'.", result.TokenList[argument.TokenId].Range));
                              argument.HasReference = false;
                              break;
                        }
                    }
                }

                break;
            case FunctionKind.isEnemy:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorList.Add(new($"0-th argument is empty.Unit, Spot, StringVariableReader is required by action 'isEnemy'.", result.TokenList[argument.TokenId].Range));
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorList.Add(new($"0-th argument is empty string '@'. Unit, Spot, StringVariableReader is required by action 'isEnemy'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (Unsafe.IsNullRef(ref track))
                    {
                        result.ErrorList.Add(new($"0-th argument {span} is not Unit, Spot, StringVariableReader required by action 'isEnemy'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Unit:
                                argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Unit;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Spot:
                                argument.ReferenceId = result.SpotSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Spot;
                                argument.HasReference = true;
                                break;
                          default:
                              result.ErrorList.Add(new($"0-th argument {span} is not Unit, Spot, StringVariableReader required by action 'isEnemy'.", result.TokenList[argument.TokenId].Range));
                              argument.HasReference = false;
                              break;
                        }
                    }
                }

                argument = ref arguments[1];
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorList.Add(new($"1-th argument is empty.Unit, Spot, StringVariableReader is required by action 'isEnemy'.", result.TokenList[argument.TokenId].Range));
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorList.Add(new($"1-th argument is empty string '@'. Unit, Spot, StringVariableReader is required by action 'isEnemy'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (Unsafe.IsNullRef(ref track))
                    {
                        result.ErrorList.Add(new($"1-th argument {span} is not Unit, Spot, StringVariableReader required by action 'isEnemy'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Unit:
                                argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Unit;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Spot:
                                argument.ReferenceId = result.SpotSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Spot;
                                argument.HasReference = true;
                                break;
                          default:
                              result.ErrorList.Add(new($"1-th argument {span} is not Unit, Spot, StringVariableReader required by action 'isEnemy'.", result.TokenList[argument.TokenId].Range));
                              argument.HasReference = false;
                              break;
                        }
                    }
                }

                break;
            case FunctionKind.isFriend:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorList.Add(new($"0-th argument is empty.Unit, Spot, StringVariableReader is required by action 'isFriend'.", result.TokenList[argument.TokenId].Range));
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorList.Add(new($"0-th argument is empty string '@'. Unit, Spot, StringVariableReader is required by action 'isFriend'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (Unsafe.IsNullRef(ref track))
                    {
                        result.ErrorList.Add(new($"0-th argument {span} is not Unit, Spot, StringVariableReader required by action 'isFriend'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Unit:
                                argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Unit;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Spot:
                                argument.ReferenceId = result.SpotSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Spot;
                                argument.HasReference = true;
                                break;
                          default:
                              result.ErrorList.Add(new($"0-th argument {span} is not Unit, Spot, StringVariableReader required by action 'isFriend'.", result.TokenList[argument.TokenId].Range));
                              argument.HasReference = false;
                              break;
                        }
                    }
                }

                argument = ref arguments[1];
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorList.Add(new($"1-th argument is empty.Unit, Spot, StringVariableReader is required by action 'isFriend'.", result.TokenList[argument.TokenId].Range));
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorList.Add(new($"1-th argument is empty string '@'. Unit, Spot, StringVariableReader is required by action 'isFriend'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (Unsafe.IsNullRef(ref track))
                    {
                        result.ErrorList.Add(new($"1-th argument {span} is not Unit, Spot, StringVariableReader required by action 'isFriend'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Unit:
                                argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Unit;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Spot:
                                argument.ReferenceId = result.SpotSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Spot;
                                argument.HasReference = true;
                                break;
                          default:
                              result.ErrorList.Add(new($"1-th argument {span} is not Unit, Spot, StringVariableReader required by action 'isFriend'.", result.TokenList[argument.TokenId].Range));
                              argument.HasReference = false;
                              break;
                        }
                    }
                }

                break;
            case FunctionKind.isNpc:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorList.Add(new($"0-th argument is empty.Unit, Power, StringVariableReader is required by action 'isNpc'.", result.TokenList[argument.TokenId].Range));
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorList.Add(new($"0-th argument is empty string '@'. Unit, Power, StringVariableReader is required by action 'isNpc'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (Unsafe.IsNullRef(ref track))
                    {
                        result.ErrorList.Add(new($"0-th argument {span} is not Unit, Power, StringVariableReader required by action 'isNpc'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Unit:
                                argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Unit;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Power:
                                argument.ReferenceId = result.PowerSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Power;
                                argument.HasReference = true;
                                break;
                          default:
                              result.ErrorList.Add(new($"0-th argument {span} is not Unit, Power, StringVariableReader required by action 'isNpc'.", result.TokenList[argument.TokenId].Range));
                              argument.HasReference = false;
                              break;
                        }
                    }
                }

                for (int i = 1; i < arguments.Length; ++i)
                {
                    argument = ref arguments[i];
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorList.Add(new($"{i}-th argument is empty.Unit, Power, StringVariableReader is required by action 'isNpc'.", result.TokenList[argument.TokenId].Range));
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length == 1)
                        {
                            result.ErrorList.Add(new($"{i}-th argument is empty string '@'. Unit, Power, StringVariableReader is required by action 'isNpc'.", result.TokenList[argument.TokenId].Range));
                        }
                        else
                        {
                            argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                        if (Unsafe.IsNullRef(ref track))
                        {
                            result.ErrorList.Add(new($"{i}-th argument {span} is not Unit, Power, StringVariableReader required by action 'isNpc'.", result.TokenList[argument.TokenId].Range));
                        }
                        else
                        {
                            switch (track.Kind)
                            {
                                case ReferenceKind.Unit:
                                    argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                    argument.ReferenceKind = ReferenceKind.Unit;
                                    argument.HasReference = true;
                                    break;
                                case ReferenceKind.Power:
                                    argument.ReferenceId = result.PowerSet.GetOrAdd(span, argument.TokenId);
                                    argument.ReferenceKind = ReferenceKind.Power;
                                    argument.HasReference = true;
                                    break;
                              default:
                                  result.ErrorList.Add(new($"{i}-th argument {span} is not Unit, Power, StringVariableReader required by action 'isNpc'.", result.TokenList[argument.TokenId].Range));
                                  argument.HasReference = false;
                                  break;
                            }
                        }
                    }

                }
                break;
            case FunctionKind.isAlive:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorList.Add(new($"0-th argument is empty.Unit, Power, StringVariableReader is required by action 'isAlive'.", result.TokenList[argument.TokenId].Range));
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorList.Add(new($"0-th argument is empty string '@'. Unit, Power, StringVariableReader is required by action 'isAlive'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (Unsafe.IsNullRef(ref track))
                    {
                        result.ErrorList.Add(new($"0-th argument {span} is not Unit, Power, StringVariableReader required by action 'isAlive'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Unit:
                                argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Unit;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Power:
                                argument.ReferenceId = result.PowerSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Power;
                                argument.HasReference = true;
                                break;
                          default:
                              result.ErrorList.Add(new($"0-th argument {span} is not Unit, Power, StringVariableReader required by action 'isAlive'.", result.TokenList[argument.TokenId].Range));
                              argument.HasReference = false;
                              break;
                        }
                    }
                }

                for (int i = 1; i < arguments.Length; ++i)
                {
                    argument = ref arguments[i];
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorList.Add(new($"{i}-th argument is empty.Unit, Power, StringVariableReader is required by action 'isAlive'.", result.TokenList[argument.TokenId].Range));
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length == 1)
                        {
                            result.ErrorList.Add(new($"{i}-th argument is empty string '@'. Unit, Power, StringVariableReader is required by action 'isAlive'.", result.TokenList[argument.TokenId].Range));
                        }
                        else
                        {
                            argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                        if (Unsafe.IsNullRef(ref track))
                        {
                            result.ErrorList.Add(new($"{i}-th argument {span} is not Unit, Power, StringVariableReader required by action 'isAlive'.", result.TokenList[argument.TokenId].Range));
                        }
                        else
                        {
                            switch (track.Kind)
                            {
                                case ReferenceKind.Unit:
                                    argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                    argument.ReferenceKind = ReferenceKind.Unit;
                                    argument.HasReference = true;
                                    break;
                                case ReferenceKind.Power:
                                    argument.ReferenceId = result.PowerSet.GetOrAdd(span, argument.TokenId);
                                    argument.ReferenceKind = ReferenceKind.Power;
                                    argument.HasReference = true;
                                    break;
                              default:
                                  result.ErrorList.Add(new($"{i}-th argument {span} is not Unit, Power, StringVariableReader required by action 'isAlive'.", result.TokenList[argument.TokenId].Range));
                                  argument.HasReference = false;
                                  break;
                            }
                        }
                    }

                }
                break;
            case FunctionKind.inBattle:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorList.Add(new($"0-th argument is empty.Unit, Power, StringVariableReader is required by action 'inBattle'.", result.TokenList[argument.TokenId].Range));
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorList.Add(new($"0-th argument is empty string '@'. Unit, Power, StringVariableReader is required by action 'inBattle'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (Unsafe.IsNullRef(ref track))
                    {
                        result.ErrorList.Add(new($"0-th argument {span} is not Unit, Power, StringVariableReader required by action 'inBattle'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Unit:
                                argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Unit;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Power:
                                argument.ReferenceId = result.PowerSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Power;
                                argument.HasReference = true;
                                break;
                          default:
                              result.ErrorList.Add(new($"0-th argument {span} is not Unit, Power, StringVariableReader required by action 'inBattle'.", result.TokenList[argument.TokenId].Range));
                              argument.HasReference = false;
                              break;
                        }
                    }
                }

                for (int i = 1; i < arguments.Length; ++i)
                {
                    argument = ref arguments[i];
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorList.Add(new($"{i}-th argument is empty.Unit, Power, StringVariableReader is required by action 'inBattle'.", result.TokenList[argument.TokenId].Range));
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length == 1)
                        {
                            result.ErrorList.Add(new($"{i}-th argument is empty string '@'. Unit, Power, StringVariableReader is required by action 'inBattle'.", result.TokenList[argument.TokenId].Range));
                        }
                        else
                        {
                            argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                        if (Unsafe.IsNullRef(ref track))
                        {
                            result.ErrorList.Add(new($"{i}-th argument {span} is not Unit, Power, StringVariableReader required by action 'inBattle'.", result.TokenList[argument.TokenId].Range));
                        }
                        else
                        {
                            switch (track.Kind)
                            {
                                case ReferenceKind.Unit:
                                    argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                    argument.ReferenceKind = ReferenceKind.Unit;
                                    argument.HasReference = true;
                                    break;
                                case ReferenceKind.Power:
                                    argument.ReferenceId = result.PowerSet.GetOrAdd(span, argument.TokenId);
                                    argument.ReferenceKind = ReferenceKind.Power;
                                    argument.HasReference = true;
                                    break;
                              default:
                                  result.ErrorList.Add(new($"{i}-th argument {span} is not Unit, Power, StringVariableReader required by action 'inBattle'.", result.TokenList[argument.TokenId].Range));
                                  argument.HasReference = false;
                                  break;
                            }
                        }
                    }

                }
                break;
            case FunctionKind.isJoin:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorList.Add(new($"0-th argument is empty.Power, Spot, StringVariableReader is required by action 'isJoin'.", result.TokenList[argument.TokenId].Range));
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorList.Add(new($"0-th argument is empty string '@'. Power, Spot, StringVariableReader is required by action 'isJoin'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (Unsafe.IsNullRef(ref track))
                    {
                        result.ErrorList.Add(new($"0-th argument {span} is not Power, Spot, StringVariableReader required by action 'isJoin'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Power:
                                argument.ReferenceId = result.PowerSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Power;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Spot:
                                argument.ReferenceId = result.SpotSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Spot;
                                argument.HasReference = true;
                                break;
                          default:
                              result.ErrorList.Add(new($"0-th argument {span} is not Power, Spot, StringVariableReader required by action 'isJoin'.", result.TokenList[argument.TokenId].Range));
                              argument.HasReference = false;
                              break;
                        }
                    }
                }

                argument = ref arguments[1];
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorList.Add(new($"1-th argument is empty.Power, Spot, StringVariableReader is required by action 'isJoin'.", result.TokenList[argument.TokenId].Range));
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorList.Add(new($"1-th argument is empty string '@'. Power, Spot, StringVariableReader is required by action 'isJoin'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (Unsafe.IsNullRef(ref track))
                    {
                        result.ErrorList.Add(new($"1-th argument {span} is not Power, Spot, StringVariableReader required by action 'isJoin'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Power:
                                argument.ReferenceId = result.PowerSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Power;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Spot:
                                argument.ReferenceId = result.SpotSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Spot;
                                argument.HasReference = true;
                                break;
                          default:
                              result.ErrorList.Add(new($"1-th argument {span} is not Power, Spot, StringVariableReader required by action 'isJoin'.", result.TokenList[argument.TokenId].Range));
                              argument.HasReference = false;
                              break;
                        }
                    }
                }

                if (arguments.Length <= 2)
                {
                    break;
                }
                argument = ref arguments[2];
                if (!argument.IsNumber && (argument.HasReference = NodeValidator.IsBoolean(result.GetSpan(argument.TokenId), out argument.ReferenceId)))
                {
                    argument.ReferenceKind = ReferenceKind.Boolean;
                }
                else
                {
                    result.ErrorList.Add(new($"The 2-th argument of action 'isJoin' must be Boolean.", result.TokenList[argument.TokenId].Range));
                }

                break;
            case FunctionKind.getDistance:
                switch (arguments.Length)
                {
                    case 2:
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorList.Add(new($"0-th argument is empty.Unit, Class, StringVariableReader is required by action 'getDistance'.", result.TokenList[argument.TokenId].Range));
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length == 1)
                            {
                                result.ErrorList.Add(new($"0-th argument is empty string '@'. Unit, Class, StringVariableReader is required by action 'getDistance'.", result.TokenList[argument.TokenId].Range));
                            }
                            else
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                            if (Unsafe.IsNullRef(ref track))
                            {
                                result.ErrorList.Add(new($"0-th argument {span} is not Unit, Class, StringVariableReader required by action 'getDistance'.", result.TokenList[argument.TokenId].Range));
                            }
                            else
                            {
                                switch (track.Kind)
                                {
                                    case ReferenceKind.Unit:
                                        argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Unit;
                                        argument.HasReference = true;
                                        break;
                                    case ReferenceKind.Class:
                                        argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Class;
                                        argument.HasReference = true;
                                        break;
                                  default:
                                      result.ErrorList.Add(new($"0-th argument {span} is not Unit, Class, StringVariableReader required by action 'getDistance'.", result.TokenList[argument.TokenId].Range));
                                      argument.HasReference = false;
                                      break;
                                }
                            }
                        }

                        argument = ref arguments[1];
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorList.Add(new($"1-th argument is empty.Unit, Class, StringVariableReader is required by action 'getDistance'.", result.TokenList[argument.TokenId].Range));
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length == 1)
                            {
                                result.ErrorList.Add(new($"1-th argument is empty string '@'. Unit, Class, StringVariableReader is required by action 'getDistance'.", result.TokenList[argument.TokenId].Range));
                            }
                            else
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                            if (Unsafe.IsNullRef(ref track))
                            {
                                result.ErrorList.Add(new($"1-th argument {span} is not Unit, Class, StringVariableReader required by action 'getDistance'.", result.TokenList[argument.TokenId].Range));
                            }
                            else
                            {
                                switch (track.Kind)
                                {
                                    case ReferenceKind.Unit:
                                        argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Unit;
                                        argument.HasReference = true;
                                        break;
                                    case ReferenceKind.Class:
                                        argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Class;
                                        argument.HasReference = true;
                                        break;
                                  default:
                                      result.ErrorList.Add(new($"1-th argument {span} is not Unit, Class, StringVariableReader required by action 'getDistance'.", result.TokenList[argument.TokenId].Range));
                                      argument.HasReference = false;
                                      break;
                                }
                            }
                        }

                        break;
                    case 3:
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorList.Add(new($"0-th argument is empty.Unit, Class, StringVariableReader is required by action 'getDistance'.", result.TokenList[argument.TokenId].Range));
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length == 1)
                            {
                                result.ErrorList.Add(new($"0-th argument is empty string '@'. Unit, Class, StringVariableReader is required by action 'getDistance'.", result.TokenList[argument.TokenId].Range));
                            }
                            else
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                            if (Unsafe.IsNullRef(ref track))
                            {
                                result.ErrorList.Add(new($"0-th argument {span} is not Unit, Class, StringVariableReader required by action 'getDistance'.", result.TokenList[argument.TokenId].Range));
                            }
                            else
                            {
                                switch (track.Kind)
                                {
                                    case ReferenceKind.Unit:
                                        argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Unit;
                                        argument.HasReference = true;
                                        break;
                                    case ReferenceKind.Class:
                                        argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Class;
                                        argument.HasReference = true;
                                        break;
                                  default:
                                      result.ErrorList.Add(new($"0-th argument {span} is not Unit, Class, StringVariableReader required by action 'getDistance'.", result.TokenList[argument.TokenId].Range));
                                      argument.HasReference = false;
                                      break;
                                }
                            }
                        }

                        argument = ref arguments[1];
                        if (!argument.IsNumber)
                        {
                            argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                            argument.ReferenceId = result.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                            argument.HasReference = true;
                        }

                        argument = ref arguments[2];
                        if (!argument.IsNumber)
                        {
                            argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                            argument.ReferenceId = result.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                            argument.HasReference = true;
                        }

                        break;
                }
                break;
            case FunctionKind.isPostIn:
                switch (arguments.Length)
                {
                    case 3:
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorList.Add(new($"0-th argument is empty.Unit, Class, StringVariableReader is required by action 'isPostIn'.", result.TokenList[argument.TokenId].Range));
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length == 1)
                            {
                                result.ErrorList.Add(new($"0-th argument is empty string '@'. Unit, Class, StringVariableReader is required by action 'isPostIn'.", result.TokenList[argument.TokenId].Range));
                            }
                            else
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                            if (Unsafe.IsNullRef(ref track))
                            {
                                result.ErrorList.Add(new($"0-th argument {span} is not Unit, Class, StringVariableReader required by action 'isPostIn'.", result.TokenList[argument.TokenId].Range));
                            }
                            else
                            {
                                switch (track.Kind)
                                {
                                    case ReferenceKind.Unit:
                                        argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Unit;
                                        argument.HasReference = true;
                                        break;
                                    case ReferenceKind.Class:
                                        argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Class;
                                        argument.HasReference = true;
                                        break;
                                  default:
                                      result.ErrorList.Add(new($"0-th argument {span} is not Unit, Class, StringVariableReader required by action 'isPostIn'.", result.TokenList[argument.TokenId].Range));
                                      argument.HasReference = false;
                                      break;
                                }
                            }
                        }

                        argument = ref arguments[1];
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorList.Add(new($"1-th argument is empty.Unit, Class, StringVariableReader is required by action 'isPostIn'.", result.TokenList[argument.TokenId].Range));
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length == 1)
                            {
                                result.ErrorList.Add(new($"1-th argument is empty string '@'. Unit, Class, StringVariableReader is required by action 'isPostIn'.", result.TokenList[argument.TokenId].Range));
                            }
                            else
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                            if (Unsafe.IsNullRef(ref track))
                            {
                                result.ErrorList.Add(new($"1-th argument {span} is not Unit, Class, StringVariableReader required by action 'isPostIn'.", result.TokenList[argument.TokenId].Range));
                            }
                            else
                            {
                                switch (track.Kind)
                                {
                                    case ReferenceKind.Unit:
                                        argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Unit;
                                        argument.HasReference = true;
                                        break;
                                    case ReferenceKind.Class:
                                        argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Class;
                                        argument.HasReference = true;
                                        break;
                                  default:
                                      result.ErrorList.Add(new($"1-th argument {span} is not Unit, Class, StringVariableReader required by action 'isPostIn'.", result.TokenList[argument.TokenId].Range));
                                      argument.HasReference = false;
                                      break;
                                }
                            }
                        }

                        argument = ref arguments[2];
                        if (!argument.IsNumber)
                        {
                            argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                            argument.ReferenceId = result.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                            argument.HasReference = true;
                        }

                        break;
                    case 4:
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorList.Add(new($"0-th argument is empty.Unit, Class, StringVariableReader is required by action 'isPostIn'.", result.TokenList[argument.TokenId].Range));
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length == 1)
                            {
                                result.ErrorList.Add(new($"0-th argument is empty string '@'. Unit, Class, StringVariableReader is required by action 'isPostIn'.", result.TokenList[argument.TokenId].Range));
                            }
                            else
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                            if (Unsafe.IsNullRef(ref track))
                            {
                                result.ErrorList.Add(new($"0-th argument {span} is not Unit, Class, StringVariableReader required by action 'isPostIn'.", result.TokenList[argument.TokenId].Range));
                            }
                            else
                            {
                                switch (track.Kind)
                                {
                                    case ReferenceKind.Unit:
                                        argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Unit;
                                        argument.HasReference = true;
                                        break;
                                    case ReferenceKind.Class:
                                        argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Class;
                                        argument.HasReference = true;
                                        break;
                                  default:
                                      result.ErrorList.Add(new($"0-th argument {span} is not Unit, Class, StringVariableReader required by action 'isPostIn'.", result.TokenList[argument.TokenId].Range));
                                      argument.HasReference = false;
                                      break;
                                }
                            }
                        }

                        argument = ref arguments[1];
                        if (!argument.IsNumber)
                        {
                            argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                            argument.ReferenceId = result.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                            argument.HasReference = true;
                        }

                        argument = ref arguments[2];
                        if (!argument.IsNumber)
                        {
                            argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                            argument.ReferenceId = result.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                            argument.HasReference = true;
                        }

                        argument = ref arguments[3];
                        if (!argument.IsNumber)
                        {
                            argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                            argument.ReferenceId = result.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                            argument.HasReference = true;
                        }

                        break;
                    case 5:
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorList.Add(new($"0-th argument is empty.Unit, Class, StringVariableReader is required by action 'isPostIn'.", result.TokenList[argument.TokenId].Range));
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length == 1)
                            {
                                result.ErrorList.Add(new($"0-th argument is empty string '@'. Unit, Class, StringVariableReader is required by action 'isPostIn'.", result.TokenList[argument.TokenId].Range));
                            }
                            else
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                            if (Unsafe.IsNullRef(ref track))
                            {
                                result.ErrorList.Add(new($"0-th argument {span} is not Unit, Class, StringVariableReader required by action 'isPostIn'.", result.TokenList[argument.TokenId].Range));
                            }
                            else
                            {
                                switch (track.Kind)
                                {
                                    case ReferenceKind.Unit:
                                        argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Unit;
                                        argument.HasReference = true;
                                        break;
                                    case ReferenceKind.Class:
                                        argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Class;
                                        argument.HasReference = true;
                                        break;
                                  default:
                                      result.ErrorList.Add(new($"0-th argument {span} is not Unit, Class, StringVariableReader required by action 'isPostIn'.", result.TokenList[argument.TokenId].Range));
                                      argument.HasReference = false;
                                      break;
                                }
                            }
                        }

                        argument = ref arguments[1];
                        if (!argument.IsNumber)
                        {
                            argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                            argument.ReferenceId = result.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                            argument.HasReference = true;
                        }

                        argument = ref arguments[2];
                        if (!argument.IsNumber)
                        {
                            argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                            argument.ReferenceId = result.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                            argument.HasReference = true;
                        }

                        argument = ref arguments[3];
                        if (!argument.IsNumber)
                        {
                            argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                            argument.ReferenceId = result.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                            argument.HasReference = true;
                        }

                        argument = ref arguments[4];
                        if (!argument.IsNumber)
                        {
                            argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                            argument.ReferenceId = result.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                            argument.HasReference = true;
                        }

                        break;
                }
                break;
        }
    }

    private void AddReferenceAndValidate(ref Result result, CallActionStatement call)
    {
        var arguments = call.Arguments.AsSpan();
        if (arguments.IsEmpty)
        {
            return;
        }

        ref var argument = ref arguments[0];
        ReadOnlySpan<char> span;
        switch (call.Kind)
        {
            case ActionKind.vc:
                result.ErrorList.Add(new($"Unknown action 'vc'.", result.TokenList[call.TokenId].Range));
                break;
            case ActionKind.play:
                result.ErrorList.Add(new($"Unknown action 'play'.", result.TokenList[call.TokenId].Range));
                break;
            case ActionKind.ppl1:
                result.ErrorList.Add(new($"Unknown action 'ppl1'.", result.TokenList[call.TokenId].Range));
                break;
            case ActionKind.citom:
                result.ErrorList.Add(new($"Unknown action 'citom'.", result.TokenList[call.TokenId].Range));
                break;
            case ActionKind.setbcg:
                result.ErrorList.Add(new($"Unknown action 'setbcg'.", result.TokenList[call.TokenId].Range));
                break;
            case ActionKind.levelup:
                result.ErrorList.Add(new($"Unknown action 'levelup'.", result.TokenList[call.TokenId].Range));
                break;
            case ActionKind.showCamp:
                result.ErrorList.Add(new($"Unknown action 'showCamp'.", result.TokenList[call.TokenId].Range));
                break;
            case ActionKind.pushDeath:
                result.ErrorList.Add(new($"Unknown action 'pushDeath'.", result.TokenList[call.TokenId].Range));
                break;
            case ActionKind.clickWait:
                result.ErrorList.Add(new($"Unknown action 'clickWait'.", result.TokenList[call.TokenId].Range));
                break;
            case ActionKind.worldskin:
                result.ErrorList.Add(new($"Unknown action 'worldskin'.", result.TokenList[call.TokenId].Range));
                break;
            case ActionKind.storeDeath:
                result.ErrorList.Add(new($"Unknown action 'storeDeath'.", result.TokenList[call.TokenId].Range));
                break;
            case ActionKind.darkness_off:
                result.ErrorList.Add(new($"Unknown action 'darkness_off'.", result.TokenList[call.TokenId].Range));
                break;
            case ActionKind.doGameEnding:
                result.ErrorList.Add(new($"Unknown action 'doGameEnding'.", result.TokenList[call.TokenId].Range));
                break;
            case ActionKind.setPowerHome:
                result.ErrorList.Add(new($"Unknown action 'setPowerHome'.", result.TokenList[call.TokenId].Range));
                break;
            case ActionKind.msg:
                switch (arguments.Length)
                {
                    case 1:
                        AddReferenceAndValidate_CompoundText(ref result, 0, ref argument);

                        break;
                    case 2:
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorList.Add(new($"0-th argument is empty.Unit, Text, StringVariableReader is required by action 'msg'.", result.TokenList[argument.TokenId].Range));
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length == 1)
                            {
                                result.ErrorList.Add(new($"0-th argument is empty string '@'. Unit, Text, StringVariableReader is required by action 'msg'.", result.TokenList[argument.TokenId].Range));
                            }
                            else
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                            if (Unsafe.IsNullRef(ref track))
                            {
                                result.ErrorList.Add(new($"0-th argument {span} is not Unit, Text, StringVariableReader required by action 'msg'.", result.TokenList[argument.TokenId].Range));
                            }
                            else
                            {
                                switch (track.Kind)
                                {
                                    case ReferenceKind.Unit:
                                        argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Unit;
                                        argument.HasReference = true;
                                        break;
                                  default:
                                      result.ErrorList.Add(new($"0-th argument {span} is not Unit, Text, StringVariableReader required by action 'msg'.", result.TokenList[argument.TokenId].Range));
                                      argument.HasReference = false;
                                      break;
                                }
                            }
                        }

                        argument = ref arguments[1];
                        AddReferenceAndValidate_CompoundText(ref result, 1, ref argument);

                        break;
                    case 3:
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorList.Add(new($"0-th argument is empty.Unit, Text, StringVariableReader is required by action 'msg'.", result.TokenList[argument.TokenId].Range));
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length == 1)
                            {
                                result.ErrorList.Add(new($"0-th argument is empty string '@'. Unit, Text, StringVariableReader is required by action 'msg'.", result.TokenList[argument.TokenId].Range));
                            }
                            else
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                            if (Unsafe.IsNullRef(ref track))
                            {
                                result.ErrorList.Add(new($"0-th argument {span} is not Unit, Text, StringVariableReader required by action 'msg'.", result.TokenList[argument.TokenId].Range));
                            }
                            else
                            {
                                switch (track.Kind)
                                {
                                    case ReferenceKind.Unit:
                                        argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Unit;
                                        argument.HasReference = true;
                                        break;
                                  default:
                                      result.ErrorList.Add(new($"0-th argument {span} is not Unit, Text, StringVariableReader required by action 'msg'.", result.TokenList[argument.TokenId].Range));
                                      argument.HasReference = false;
                                      break;
                                }
                            }
                        }

                        argument = ref arguments[1];
                        argument.ReferenceKind = ReferenceKind.face;
                        argument.ReferenceId = result.faceSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                        argument.HasReference = true;

                        argument = ref arguments[2];
                        AddReferenceAndValidate_CompoundText(ref result, 2, ref argument);

                        break;
                }
                break;
            case ActionKind.msg2:
                switch (arguments.Length)
                {
                    case 1:
                        AddReferenceAndValidate_CompoundText(ref result, 0, ref argument);

                        break;
                    case 2:
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorList.Add(new($"0-th argument is empty.Unit, Text, StringVariableReader is required by action 'msg2'.", result.TokenList[argument.TokenId].Range));
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length == 1)
                            {
                                result.ErrorList.Add(new($"0-th argument is empty string '@'. Unit, Text, StringVariableReader is required by action 'msg2'.", result.TokenList[argument.TokenId].Range));
                            }
                            else
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                            if (Unsafe.IsNullRef(ref track))
                            {
                                result.ErrorList.Add(new($"0-th argument {span} is not Unit, Text, StringVariableReader required by action 'msg2'.", result.TokenList[argument.TokenId].Range));
                            }
                            else
                            {
                                switch (track.Kind)
                                {
                                    case ReferenceKind.Unit:
                                        argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Unit;
                                        argument.HasReference = true;
                                        break;
                                  default:
                                      result.ErrorList.Add(new($"0-th argument {span} is not Unit, Text, StringVariableReader required by action 'msg2'.", result.TokenList[argument.TokenId].Range));
                                      argument.HasReference = false;
                                      break;
                                }
                            }
                        }

                        argument = ref arguments[1];
                        AddReferenceAndValidate_CompoundText(ref result, 1, ref argument);

                        break;
                    case 3:
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorList.Add(new($"0-th argument is empty.Unit, Text, StringVariableReader is required by action 'msg2'.", result.TokenList[argument.TokenId].Range));
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length == 1)
                            {
                                result.ErrorList.Add(new($"0-th argument is empty string '@'. Unit, Text, StringVariableReader is required by action 'msg2'.", result.TokenList[argument.TokenId].Range));
                            }
                            else
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                            if (Unsafe.IsNullRef(ref track))
                            {
                                result.ErrorList.Add(new($"0-th argument {span} is not Unit, Text, StringVariableReader required by action 'msg2'.", result.TokenList[argument.TokenId].Range));
                            }
                            else
                            {
                                switch (track.Kind)
                                {
                                    case ReferenceKind.Unit:
                                        argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Unit;
                                        argument.HasReference = true;
                                        break;
                                  default:
                                      result.ErrorList.Add(new($"0-th argument {span} is not Unit, Text, StringVariableReader required by action 'msg2'.", result.TokenList[argument.TokenId].Range));
                                      argument.HasReference = false;
                                      break;
                                }
                            }
                        }

                        argument = ref arguments[1];
                        argument.ReferenceKind = ReferenceKind.face;
                        argument.ReferenceId = result.faceSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                        argument.HasReference = true;

                        argument = ref arguments[2];
                        AddReferenceAndValidate_CompoundText(ref result, 2, ref argument);

                        break;
                }
                break;
            case ActionKind.talk:
                switch (arguments.Length)
                {
                    case 1:
                        AddReferenceAndValidate_CompoundText(ref result, 0, ref argument);

                        break;
                    case 2:
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorList.Add(new($"0-th argument is empty.Unit, Text, StringVariableReader is required by action 'talk'.", result.TokenList[argument.TokenId].Range));
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length == 1)
                            {
                                result.ErrorList.Add(new($"0-th argument is empty string '@'. Unit, Text, StringVariableReader is required by action 'talk'.", result.TokenList[argument.TokenId].Range));
                            }
                            else
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                            if (Unsafe.IsNullRef(ref track))
                            {
                                result.ErrorList.Add(new($"0-th argument {span} is not Unit, Text, StringVariableReader required by action 'talk'.", result.TokenList[argument.TokenId].Range));
                            }
                            else
                            {
                                switch (track.Kind)
                                {
                                    case ReferenceKind.Unit:
                                        argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Unit;
                                        argument.HasReference = true;
                                        break;
                                  default:
                                      result.ErrorList.Add(new($"0-th argument {span} is not Unit, Text, StringVariableReader required by action 'talk'.", result.TokenList[argument.TokenId].Range));
                                      argument.HasReference = false;
                                      break;
                                }
                            }
                        }

                        argument = ref arguments[1];
                        AddReferenceAndValidate_CompoundText(ref result, 1, ref argument);

                        break;
                    case 3:
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorList.Add(new($"0-th argument is empty.Unit, Text, StringVariableReader is required by action 'talk'.", result.TokenList[argument.TokenId].Range));
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length == 1)
                            {
                                result.ErrorList.Add(new($"0-th argument is empty string '@'. Unit, Text, StringVariableReader is required by action 'talk'.", result.TokenList[argument.TokenId].Range));
                            }
                            else
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                            if (Unsafe.IsNullRef(ref track))
                            {
                                result.ErrorList.Add(new($"0-th argument {span} is not Unit, Text, StringVariableReader required by action 'talk'.", result.TokenList[argument.TokenId].Range));
                            }
                            else
                            {
                                switch (track.Kind)
                                {
                                    case ReferenceKind.Unit:
                                        argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Unit;
                                        argument.HasReference = true;
                                        break;
                                  default:
                                      result.ErrorList.Add(new($"0-th argument {span} is not Unit, Text, StringVariableReader required by action 'talk'.", result.TokenList[argument.TokenId].Range));
                                      argument.HasReference = false;
                                      break;
                                }
                            }
                        }

                        argument = ref arguments[1];
                        argument.ReferenceKind = ReferenceKind.face;
                        argument.ReferenceId = result.faceSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                        argument.HasReference = true;

                        argument = ref arguments[2];
                        AddReferenceAndValidate_CompoundText(ref result, 2, ref argument);

                        break;
                }
                break;
            case ActionKind.talk2:
                switch (arguments.Length)
                {
                    case 1:
                        AddReferenceAndValidate_CompoundText(ref result, 0, ref argument);

                        break;
                    case 2:
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorList.Add(new($"0-th argument is empty.Unit, Text, StringVariableReader is required by action 'talk2'.", result.TokenList[argument.TokenId].Range));
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length == 1)
                            {
                                result.ErrorList.Add(new($"0-th argument is empty string '@'. Unit, Text, StringVariableReader is required by action 'talk2'.", result.TokenList[argument.TokenId].Range));
                            }
                            else
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                            if (Unsafe.IsNullRef(ref track))
                            {
                                result.ErrorList.Add(new($"0-th argument {span} is not Unit, Text, StringVariableReader required by action 'talk2'.", result.TokenList[argument.TokenId].Range));
                            }
                            else
                            {
                                switch (track.Kind)
                                {
                                    case ReferenceKind.Unit:
                                        argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Unit;
                                        argument.HasReference = true;
                                        break;
                                  default:
                                      result.ErrorList.Add(new($"0-th argument {span} is not Unit, Text, StringVariableReader required by action 'talk2'.", result.TokenList[argument.TokenId].Range));
                                      argument.HasReference = false;
                                      break;
                                }
                            }
                        }

                        argument = ref arguments[1];
                        AddReferenceAndValidate_CompoundText(ref result, 1, ref argument);

                        break;
                    case 3:
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorList.Add(new($"0-th argument is empty.Unit, Text, StringVariableReader is required by action 'talk2'.", result.TokenList[argument.TokenId].Range));
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length == 1)
                            {
                                result.ErrorList.Add(new($"0-th argument is empty string '@'. Unit, Text, StringVariableReader is required by action 'talk2'.", result.TokenList[argument.TokenId].Range));
                            }
                            else
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                            if (Unsafe.IsNullRef(ref track))
                            {
                                result.ErrorList.Add(new($"0-th argument {span} is not Unit, Text, StringVariableReader required by action 'talk2'.", result.TokenList[argument.TokenId].Range));
                            }
                            else
                            {
                                switch (track.Kind)
                                {
                                    case ReferenceKind.Unit:
                                        argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Unit;
                                        argument.HasReference = true;
                                        break;
                                  default:
                                      result.ErrorList.Add(new($"0-th argument {span} is not Unit, Text, StringVariableReader required by action 'talk2'.", result.TokenList[argument.TokenId].Range));
                                      argument.HasReference = false;
                                      break;
                                }
                            }
                        }

                        argument = ref arguments[1];
                        argument.ReferenceKind = ReferenceKind.face;
                        argument.ReferenceId = result.faceSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                        argument.HasReference = true;

                        argument = ref arguments[2];
                        AddReferenceAndValidate_CompoundText(ref result, 2, ref argument);

                        break;
                }
                break;
            case ActionKind.chat:
                switch (arguments.Length)
                {
                    case 1:
                        AddReferenceAndValidate_CompoundText(ref result, 0, ref argument);

                        break;
                    case 2:
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorList.Add(new($"0-th argument is empty.Unit, Text, StringVariableReader is required by action 'chat'.", result.TokenList[argument.TokenId].Range));
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length == 1)
                            {
                                result.ErrorList.Add(new($"0-th argument is empty string '@'. Unit, Text, StringVariableReader is required by action 'chat'.", result.TokenList[argument.TokenId].Range));
                            }
                            else
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                            if (Unsafe.IsNullRef(ref track))
                            {
                                result.ErrorList.Add(new($"0-th argument {span} is not Unit, Text, StringVariableReader required by action 'chat'.", result.TokenList[argument.TokenId].Range));
                            }
                            else
                            {
                                switch (track.Kind)
                                {
                                    case ReferenceKind.Unit:
                                        argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Unit;
                                        argument.HasReference = true;
                                        break;
                                  default:
                                      result.ErrorList.Add(new($"0-th argument {span} is not Unit, Text, StringVariableReader required by action 'chat'.", result.TokenList[argument.TokenId].Range));
                                      argument.HasReference = false;
                                      break;
                                }
                            }
                        }

                        argument = ref arguments[1];
                        AddReferenceAndValidate_CompoundText(ref result, 1, ref argument);

                        break;
                    case 3:
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorList.Add(new($"0-th argument is empty.Unit, Text, StringVariableReader is required by action 'chat'.", result.TokenList[argument.TokenId].Range));
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length == 1)
                            {
                                result.ErrorList.Add(new($"0-th argument is empty string '@'. Unit, Text, StringVariableReader is required by action 'chat'.", result.TokenList[argument.TokenId].Range));
                            }
                            else
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                            if (Unsafe.IsNullRef(ref track))
                            {
                                result.ErrorList.Add(new($"0-th argument {span} is not Unit, Text, StringVariableReader required by action 'chat'.", result.TokenList[argument.TokenId].Range));
                            }
                            else
                            {
                                switch (track.Kind)
                                {
                                    case ReferenceKind.Unit:
                                        argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Unit;
                                        argument.HasReference = true;
                                        break;
                                  default:
                                      result.ErrorList.Add(new($"0-th argument {span} is not Unit, Text, StringVariableReader required by action 'chat'.", result.TokenList[argument.TokenId].Range));
                                      argument.HasReference = false;
                                      break;
                                }
                            }
                        }

                        argument = ref arguments[1];
                        argument.ReferenceKind = ReferenceKind.face;
                        argument.ReferenceId = result.faceSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                        argument.HasReference = true;

                        argument = ref arguments[2];
                        AddReferenceAndValidate_CompoundText(ref result, 2, ref argument);

                        break;
                }
                break;
            case ActionKind.chat2:
                switch (arguments.Length)
                {
                    case 1:
                        AddReferenceAndValidate_CompoundText(ref result, 0, ref argument);

                        break;
                    case 2:
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorList.Add(new($"0-th argument is empty.Unit, Text, StringVariableReader is required by action 'chat2'.", result.TokenList[argument.TokenId].Range));
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length == 1)
                            {
                                result.ErrorList.Add(new($"0-th argument is empty string '@'. Unit, Text, StringVariableReader is required by action 'chat2'.", result.TokenList[argument.TokenId].Range));
                            }
                            else
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                            if (Unsafe.IsNullRef(ref track))
                            {
                                result.ErrorList.Add(new($"0-th argument {span} is not Unit, Text, StringVariableReader required by action 'chat2'.", result.TokenList[argument.TokenId].Range));
                            }
                            else
                            {
                                switch (track.Kind)
                                {
                                    case ReferenceKind.Unit:
                                        argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Unit;
                                        argument.HasReference = true;
                                        break;
                                  default:
                                      result.ErrorList.Add(new($"0-th argument {span} is not Unit, Text, StringVariableReader required by action 'chat2'.", result.TokenList[argument.TokenId].Range));
                                      argument.HasReference = false;
                                      break;
                                }
                            }
                        }

                        argument = ref arguments[1];
                        AddReferenceAndValidate_CompoundText(ref result, 1, ref argument);

                        break;
                    case 3:
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorList.Add(new($"0-th argument is empty.Unit, Text, StringVariableReader is required by action 'chat2'.", result.TokenList[argument.TokenId].Range));
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length == 1)
                            {
                                result.ErrorList.Add(new($"0-th argument is empty string '@'. Unit, Text, StringVariableReader is required by action 'chat2'.", result.TokenList[argument.TokenId].Range));
                            }
                            else
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                            if (Unsafe.IsNullRef(ref track))
                            {
                                result.ErrorList.Add(new($"0-th argument {span} is not Unit, Text, StringVariableReader required by action 'chat2'.", result.TokenList[argument.TokenId].Range));
                            }
                            else
                            {
                                switch (track.Kind)
                                {
                                    case ReferenceKind.Unit:
                                        argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Unit;
                                        argument.HasReference = true;
                                        break;
                                  default:
                                      result.ErrorList.Add(new($"0-th argument {span} is not Unit, Text, StringVariableReader required by action 'chat2'.", result.TokenList[argument.TokenId].Range));
                                      argument.HasReference = false;
                                      break;
                                }
                            }
                        }

                        argument = ref arguments[1];
                        argument.ReferenceKind = ReferenceKind.face;
                        argument.ReferenceId = result.faceSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                        argument.HasReference = true;

                        argument = ref arguments[2];
                        AddReferenceAndValidate_CompoundText(ref result, 2, ref argument);

                        break;
                }
                break;
            case ActionKind.changeMaster:
                switch (arguments.Length)
                {
                    case 1:
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorList.Add(new($"0-th argument is empty. String Variable is required by action 'changeMaster'.", result.TokenList[argument.TokenId].Range));
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length != 1)
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.Unit;
                            argument.HasReference = true;
                        }

                        break;
                    case 2:
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorList.Add(new($"0-th argument is empty.Unit, Power, StringVariableReader is required by action 'changeMaster'.", result.TokenList[argument.TokenId].Range));
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length == 1)
                            {
                                result.ErrorList.Add(new($"0-th argument is empty string '@'. Unit, Power, StringVariableReader is required by action 'changeMaster'.", result.TokenList[argument.TokenId].Range));
                            }
                            else
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                            if (Unsafe.IsNullRef(ref track))
                            {
                                result.ErrorList.Add(new($"0-th argument {span} is not Unit, Power, StringVariableReader required by action 'changeMaster'.", result.TokenList[argument.TokenId].Range));
                            }
                            else
                            {
                                switch (track.Kind)
                                {
                                    case ReferenceKind.Unit:
                                        argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Unit;
                                        argument.HasReference = true;
                                        break;
                                    case ReferenceKind.Power:
                                        argument.ReferenceId = result.PowerSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Power;
                                        argument.HasReference = true;
                                        break;
                                  default:
                                      result.ErrorList.Add(new($"0-th argument {span} is not Unit, Power, StringVariableReader required by action 'changeMaster'.", result.TokenList[argument.TokenId].Range));
                                      argument.HasReference = false;
                                      break;
                                }
                            }
                        }

                        argument = ref arguments[1];
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorList.Add(new($"1-th argument is empty. String Variable is required by action 'changeMaster'.", result.TokenList[argument.TokenId].Range));
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length != 1)
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.Unit;
                            argument.HasReference = true;
                        }

                        break;
                    case 3:
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorList.Add(new($"0-th argument is empty. String Variable is required by action 'changeMaster'.", result.TokenList[argument.TokenId].Range));
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length != 1)
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.Unit;
                            argument.HasReference = true;
                        }

                        argument = ref arguments[1];
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorList.Add(new($"1-th argument is empty. String Variable is required by action 'changeMaster'.", result.TokenList[argument.TokenId].Range));
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length != 1)
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.Unit;
                            argument.HasReference = true;
                        }

                        argument = ref arguments[2];
                        argument.ReferenceKind = ReferenceKind.flag;
                        argument.ReferenceId = result.flagSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                        argument.HasReference = true;

                        break;
                }
                break;
            case ActionKind.dialog:
                switch (arguments.Length)
                {
                    case 1:
                        AddReferenceAndValidate_CompoundText(ref result, 0, ref argument);

                        break;
                    case 2:
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorList.Add(new($"0-th argument is empty.Unit, Text, StringVariableReader is required by action 'dialog'.", result.TokenList[argument.TokenId].Range));
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length == 1)
                            {
                                result.ErrorList.Add(new($"0-th argument is empty string '@'. Unit, Text, StringVariableReader is required by action 'dialog'.", result.TokenList[argument.TokenId].Range));
                            }
                            else
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                            if (Unsafe.IsNullRef(ref track))
                            {
                                result.ErrorList.Add(new($"0-th argument {span} is not Unit, Text, StringVariableReader required by action 'dialog'.", result.TokenList[argument.TokenId].Range));
                            }
                            else
                            {
                                switch (track.Kind)
                                {
                                    case ReferenceKind.Unit:
                                        argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Unit;
                                        argument.HasReference = true;
                                        break;
                                  default:
                                      result.ErrorList.Add(new($"0-th argument {span} is not Unit, Text, StringVariableReader required by action 'dialog'.", result.TokenList[argument.TokenId].Range));
                                      argument.HasReference = false;
                                      break;
                                }
                            }
                        }

                        argument = ref arguments[1];
                        AddReferenceAndValidate_CompoundText(ref result, 1, ref argument);

                        break;
                }
                break;
            case ActionKind.dialogF:
                switch (arguments.Length)
                {
                    case 1:
                        AddReferenceAndValidate_CompoundText(ref result, 0, ref argument);

                        break;
                    case 2:
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorList.Add(new($"0-th argument is empty.Unit, Text, StringVariableReader is required by action 'dialogF'.", result.TokenList[argument.TokenId].Range));
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length == 1)
                            {
                                result.ErrorList.Add(new($"0-th argument is empty string '@'. Unit, Text, StringVariableReader is required by action 'dialogF'.", result.TokenList[argument.TokenId].Range));
                            }
                            else
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                            if (Unsafe.IsNullRef(ref track))
                            {
                                result.ErrorList.Add(new($"0-th argument {span} is not Unit, Text, StringVariableReader required by action 'dialogF'.", result.TokenList[argument.TokenId].Range));
                            }
                            else
                            {
                                switch (track.Kind)
                                {
                                    case ReferenceKind.Unit:
                                        argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Unit;
                                        argument.HasReference = true;
                                        break;
                                  default:
                                      result.ErrorList.Add(new($"0-th argument {span} is not Unit, Text, StringVariableReader required by action 'dialogF'.", result.TokenList[argument.TokenId].Range));
                                      argument.HasReference = false;
                                      break;
                                }
                            }
                        }

                        argument = ref arguments[1];
                        AddReferenceAndValidate_CompoundText(ref result, 1, ref argument);

                        break;
                }
                break;
            case ActionKind.locate:
                switch (arguments.Length)
                {
                    case 1:
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorList.Add(new($"0-th argument is empty.Unit, Spot, StringVariableReader is required by action 'locate'.", result.TokenList[argument.TokenId].Range));
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length == 1)
                            {
                                result.ErrorList.Add(new($"0-th argument is empty string '@'. Unit, Spot, StringVariableReader is required by action 'locate'.", result.TokenList[argument.TokenId].Range));
                            }
                            else
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                            if (Unsafe.IsNullRef(ref track))
                            {
                                result.ErrorList.Add(new($"0-th argument {span} is not Unit, Spot, StringVariableReader required by action 'locate'.", result.TokenList[argument.TokenId].Range));
                            }
                            else
                            {
                                switch (track.Kind)
                                {
                                    case ReferenceKind.Unit:
                                        argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Unit;
                                        argument.HasReference = true;
                                        break;
                                    case ReferenceKind.Spot:
                                        argument.ReferenceId = result.SpotSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Spot;
                                        argument.HasReference = true;
                                        break;
                                  default:
                                      result.ErrorList.Add(new($"0-th argument {span} is not Unit, Spot, StringVariableReader required by action 'locate'.", result.TokenList[argument.TokenId].Range));
                                      argument.HasReference = false;
                                      break;
                                }
                            }
                        }

                        break;
                    case 2:
                        if (!argument.IsNumber)
                        {
                            argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                            argument.ReferenceId = result.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                            argument.HasReference = true;
                        }

                        argument = ref arguments[1];
                        if (!argument.IsNumber)
                        {
                            argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                            argument.ReferenceId = result.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                            argument.HasReference = true;
                        }

                        break;
                }
                break;
            case ActionKind.scroll:
                switch (arguments.Length)
                {
                    case 1:
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorList.Add(new($"0-th argument is empty.Unit, Spot, StringVariableReader is required by action 'scroll'.", result.TokenList[argument.TokenId].Range));
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length == 1)
                            {
                                result.ErrorList.Add(new($"0-th argument is empty string '@'. Unit, Spot, StringVariableReader is required by action 'scroll'.", result.TokenList[argument.TokenId].Range));
                            }
                            else
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                            if (Unsafe.IsNullRef(ref track))
                            {
                                result.ErrorList.Add(new($"0-th argument {span} is not Unit, Spot, StringVariableReader required by action 'scroll'.", result.TokenList[argument.TokenId].Range));
                            }
                            else
                            {
                                switch (track.Kind)
                                {
                                    case ReferenceKind.Unit:
                                        argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Unit;
                                        argument.HasReference = true;
                                        break;
                                    case ReferenceKind.Spot:
                                        argument.ReferenceId = result.SpotSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Spot;
                                        argument.HasReference = true;
                                        break;
                                  default:
                                      result.ErrorList.Add(new($"0-th argument {span} is not Unit, Spot, StringVariableReader required by action 'scroll'.", result.TokenList[argument.TokenId].Range));
                                      argument.HasReference = false;
                                      break;
                                }
                            }
                        }

                        break;
                    case 2:
                        if (!argument.IsNumber)
                        {
                            argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                            argument.ReferenceId = result.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                            argument.HasReference = true;
                        }

                        argument = ref arguments[1];
                        if (!argument.IsNumber)
                        {
                            argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                            argument.ReferenceId = result.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                            argument.HasReference = true;
                        }

                        break;
                }
                break;
            case ActionKind.showSpotMark:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorList.Add(new($"0-th argument is empty.Power, Spot, StringVariableReader is required by action 'showSpotMark'.", result.TokenList[argument.TokenId].Range));
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorList.Add(new($"0-th argument is empty string '@'. Power, Spot, StringVariableReader is required by action 'showSpotMark'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (Unsafe.IsNullRef(ref track))
                    {
                        result.ErrorList.Add(new($"0-th argument {span} is not Power, Spot, StringVariableReader required by action 'showSpotMark'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Power:
                                argument.ReferenceId = result.PowerSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Power;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Spot:
                                argument.ReferenceId = result.SpotSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Spot;
                                argument.HasReference = true;
                                break;
                          default:
                              result.ErrorList.Add(new($"0-th argument {span} is not Power, Spot, StringVariableReader required by action 'showSpotMark'.", result.TokenList[argument.TokenId].Range));
                              argument.HasReference = false;
                              break;
                        }
                    }
                }

                if (arguments.Length <= 1)
                {
                    break;
                }
                argument = ref arguments[1];
                if (!argument.IsNumber)
                {
                    result.ErrorAdd_NumberIsExpected(argument.TokenId, $" The 1-th argument of action 'showSpotMark' must be Number.");
                }

                break;
            case ActionKind.select:
                argument.ReferenceKind = ReferenceKind.NumberVariableWriter;
                argument.ReferenceId = result.NumberVariableWriterSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                argument.HasReference = true;

                argument = ref arguments[1];
                AddReferenceAndValidate_CompoundText(ref result, 1, ref argument);

                break;
            case ActionKind.setPM:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorList.Add(new($"0-th argument is empty. String Variable is required by action 'setPM'.", result.TokenList[argument.TokenId].Range));
                }
                else if (span[0] == '@')
                {
                    if (span.Length != 1)
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                    argument.ReferenceKind = ReferenceKind.Unit;
                    argument.HasReference = true;
                }

                argument = ref arguments[1];
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorList.Add(new($"1-th argument is empty.Race, Unit, Class, StringVariableReader is required by action 'setPM'.", result.TokenList[argument.TokenId].Range));
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorList.Add(new($"1-th argument is empty string '@'. Race, Unit, Class, StringVariableReader is required by action 'setPM'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (Unsafe.IsNullRef(ref track))
                    {
                        result.ErrorList.Add(new($"1-th argument {span} is not Race, Unit, Class, StringVariableReader required by action 'setPM'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Unit:
                                argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Unit;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Class:
                                argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Class;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Race:
                                argument.ReferenceId = result.RaceSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Race;
                                argument.HasReference = true;
                                break;
                          default:
                              result.ErrorList.Add(new($"1-th argument {span} is not Race, Unit, Class, StringVariableReader required by action 'setPM'.", result.TokenList[argument.TokenId].Range));
                              argument.HasReference = false;
                              break;
                        }
                    }
                }

                break;
            case ActionKind.addMoney:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorList.Add(new($"0-th argument is empty.Unit, Power, StringVariableReader is required by action 'addMoney'.", result.TokenList[argument.TokenId].Range));
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorList.Add(new($"0-th argument is empty string '@'. Unit, Power, StringVariableReader is required by action 'addMoney'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (Unsafe.IsNullRef(ref track))
                    {
                        result.ErrorList.Add(new($"0-th argument {span} is not Unit, Power, StringVariableReader required by action 'addMoney'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Unit:
                                argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Unit;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Power:
                                argument.ReferenceId = result.PowerSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Power;
                                argument.HasReference = true;
                                break;
                          default:
                              result.ErrorList.Add(new($"0-th argument {span} is not Unit, Power, StringVariableReader required by action 'addMoney'.", result.TokenList[argument.TokenId].Range));
                              argument.HasReference = false;
                              break;
                        }
                    }
                }

                argument = ref arguments[1];
                if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = result.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                break;
            case ActionKind.pushGain:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorList.Add(new($"0-th argument is empty.Power, Spot, StringVariableReader is required by action 'pushGain'.", result.TokenList[argument.TokenId].Range));
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorList.Add(new($"0-th argument is empty string '@'. Power, Spot, StringVariableReader is required by action 'pushGain'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (Unsafe.IsNullRef(ref track))
                    {
                        result.ErrorList.Add(new($"0-th argument {span} is not Power, Spot, StringVariableReader required by action 'pushGain'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Power:
                                argument.ReferenceId = result.PowerSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Power;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Spot:
                                argument.ReferenceId = result.SpotSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Spot;
                                argument.HasReference = true;
                                break;
                          default:
                              result.ErrorList.Add(new($"0-th argument {span} is not Power, Spot, StringVariableReader required by action 'pushGain'.", result.TokenList[argument.TokenId].Range));
                              argument.HasReference = false;
                              break;
                        }
                    }
                }

                argument = ref arguments[1];
                argument.ReferenceKind = ReferenceKind.NumberVariableWriter;
                argument.ReferenceId = result.NumberVariableWriterSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                argument.HasReference = true;

                break;
            case ActionKind.setMoney:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorList.Add(new($"0-th argument is empty.Unit, Power, StringVariableReader is required by action 'setMoney'.", result.TokenList[argument.TokenId].Range));
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorList.Add(new($"0-th argument is empty string '@'. Unit, Power, StringVariableReader is required by action 'setMoney'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (Unsafe.IsNullRef(ref track))
                    {
                        result.ErrorList.Add(new($"0-th argument {span} is not Unit, Power, StringVariableReader required by action 'setMoney'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Unit:
                                argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Unit;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Power:
                                argument.ReferenceId = result.PowerSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Power;
                                argument.HasReference = true;
                                break;
                          default:
                              result.ErrorList.Add(new($"0-th argument {span} is not Unit, Power, StringVariableReader required by action 'setMoney'.", result.TokenList[argument.TokenId].Range));
                              argument.HasReference = false;
                              break;
                        }
                    }
                }

                argument = ref arguments[1];
                if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = result.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                break;
            case ActionKind.formTroop:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorList.Add(new($"0-th argument is empty.Unit, Class, StringVariableReader is required by action 'formTroop'.", result.TokenList[argument.TokenId].Range));
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorList.Add(new($"0-th argument is empty string '@'. Unit, Class, StringVariableReader is required by action 'formTroop'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (Unsafe.IsNullRef(ref track))
                    {
                        result.ErrorList.Add(new($"0-th argument {span} is not Unit, Class, StringVariableReader required by action 'formTroop'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Unit:
                                argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Unit;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Class:
                                argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Class;
                                argument.HasReference = true;
                                break;
                          default:
                              result.ErrorList.Add(new($"0-th argument {span} is not Unit, Class, StringVariableReader required by action 'formTroop'.", result.TokenList[argument.TokenId].Range));
                              argument.HasReference = false;
                              break;
                        }
                    }
                }

                argument = ref arguments[1];
                if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = result.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                break;
            case ActionKind.pushForce:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorList.Add(new($"0-th argument is empty.Unit, Power, StringVariableReader is required by action 'pushForce'.", result.TokenList[argument.TokenId].Range));
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorList.Add(new($"0-th argument is empty string '@'. Unit, Power, StringVariableReader is required by action 'pushForce'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (Unsafe.IsNullRef(ref track))
                    {
                        result.ErrorList.Add(new($"0-th argument {span} is not Unit, Power, StringVariableReader required by action 'pushForce'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Unit:
                                argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Unit;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Power:
                                argument.ReferenceId = result.PowerSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Power;
                                argument.HasReference = true;
                                break;
                          default:
                              result.ErrorList.Add(new($"0-th argument {span} is not Unit, Power, StringVariableReader required by action 'pushForce'.", result.TokenList[argument.TokenId].Range));
                              argument.HasReference = false;
                              break;
                        }
                    }
                }

                argument = ref arguments[1];
                argument.ReferenceKind = ReferenceKind.NumberVariableWriter;
                argument.ReferenceId = result.NumberVariableWriterSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                argument.HasReference = true;

                break;
            case ActionKind.pushMoney:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorList.Add(new($"0-th argument is empty.Unit, Power, StringVariableReader is required by action 'pushMoney'.", result.TokenList[argument.TokenId].Range));
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorList.Add(new($"0-th argument is empty string '@'. Unit, Power, StringVariableReader is required by action 'pushMoney'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (Unsafe.IsNullRef(ref track))
                    {
                        result.ErrorList.Add(new($"0-th argument {span} is not Unit, Power, StringVariableReader required by action 'pushMoney'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Unit:
                                argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Unit;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Power:
                                argument.ReferenceId = result.PowerSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Power;
                                argument.HasReference = true;
                                break;
                          default:
                              result.ErrorList.Add(new($"0-th argument {span} is not Unit, Power, StringVariableReader required by action 'pushMoney'.", result.TokenList[argument.TokenId].Range));
                              argument.HasReference = false;
                              break;
                        }
                    }
                }

                argument = ref arguments[1];
                argument.ReferenceKind = ReferenceKind.NumberVariableWriter;
                argument.ReferenceId = result.NumberVariableWriterSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                argument.HasReference = true;

                break;
            case ActionKind.pushTrust:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorList.Add(new($"0-th argument is empty.Unit, Power, StringVariableReader is required by action 'pushTrust'.", result.TokenList[argument.TokenId].Range));
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorList.Add(new($"0-th argument is empty string '@'. Unit, Power, StringVariableReader is required by action 'pushTrust'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (Unsafe.IsNullRef(ref track))
                    {
                        result.ErrorList.Add(new($"0-th argument {span} is not Unit, Power, StringVariableReader required by action 'pushTrust'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Unit:
                                argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Unit;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Power:
                                argument.ReferenceId = result.PowerSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Power;
                                argument.HasReference = true;
                                break;
                          default:
                              result.ErrorList.Add(new($"0-th argument {span} is not Unit, Power, StringVariableReader required by action 'pushTrust'.", result.TokenList[argument.TokenId].Range));
                              argument.HasReference = false;
                              break;
                        }
                    }
                }

                argument = ref arguments[1];
                argument.ReferenceKind = ReferenceKind.NumberVariableWriter;
                argument.ReferenceId = result.NumberVariableWriterSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                argument.HasReference = true;

                break;
            case ActionKind.speedTroop:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorList.Add(new($"0-th argument is empty.Unit, Class, StringVariableReader is required by action 'speedTroop'.", result.TokenList[argument.TokenId].Range));
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorList.Add(new($"0-th argument is empty string '@'. Unit, Class, StringVariableReader is required by action 'speedTroop'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (Unsafe.IsNullRef(ref track))
                    {
                        result.ErrorList.Add(new($"0-th argument {span} is not Unit, Class, StringVariableReader required by action 'speedTroop'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Unit:
                                argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Unit;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Class:
                                argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Class;
                                argument.HasReference = true;
                                break;
                          default:
                              result.ErrorList.Add(new($"0-th argument {span} is not Unit, Class, StringVariableReader required by action 'speedTroop'.", result.TokenList[argument.TokenId].Range));
                              argument.HasReference = false;
                              break;
                        }
                    }
                }

                argument = ref arguments[1];
                if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = result.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                break;
            case ActionKind.removeSkill:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorList.Add(new($"0-th argument is empty. String Variable is required by action 'removeSkill'.", result.TokenList[argument.TokenId].Range));
                }
                else if (span[0] == '@')
                {
                    if (span.Length != 1)
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                    argument.ReferenceKind = ReferenceKind.Unit;
                    argument.HasReference = true;
                }

                argument = ref arguments[1];
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorList.Add(new($"1-th argument is empty.Skill, Skillset, StringVariableReader is required by action 'removeSkill'.", result.TokenList[argument.TokenId].Range));
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorList.Add(new($"1-th argument is empty string '@'. Skill, Skillset, StringVariableReader is required by action 'removeSkill'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_SkillSkillset.TryGet(span);
                    if (Unsafe.IsNullRef(ref track))
                    {
                        result.ErrorList.Add(new($"1-th argument {span} is not Skill, Skillset, StringVariableReader required by action 'removeSkill'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Skill:
                                argument.ReferenceId = result.SkillSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Skill;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Skillset:
                                argument.ReferenceId = result.SkillsetSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Skillset;
                                argument.HasReference = true;
                                break;
                          default:
                              result.ErrorList.Add(new($"1-th argument {span} is not Skill, Skillset, StringVariableReader required by action 'removeSkill'.", result.TokenList[argument.TokenId].Range));
                              argument.HasReference = false;
                              break;
                        }
                    }
                }

                break;
            case ActionKind.storeTodoUnit:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorList.Add(new($"0-th argument is empty.Unit, StringVariableReader, ClassTypeReader is required by action 'storeTodoUnit'.", result.TokenList[argument.TokenId].Range));
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorList.Add(new($"0-th argument is empty string '@'. Unit, StringVariableReader, ClassTypeReader is required by action 'storeTodoUnit'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (Unsafe.IsNullRef(ref track))
                    {
                        result.ErrorList.Add(new($"0-th argument {span} is not Unit, StringVariableReader, ClassTypeReader required by action 'storeTodoUnit'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Unit:
                                argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Unit;
                                argument.HasReference = true;
                                break;
                          default:
                              result.ErrorList.Add(new($"0-th argument {span} is not Unit, StringVariableReader, ClassTypeReader required by action 'storeTodoUnit'.", result.TokenList[argument.TokenId].Range));
                              argument.HasReference = false;
                              break;
                        }
                    }
                }

                argument = ref arguments[1];
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorList.Add(new($"1-th argument is empty. String Variable is required by action 'storeTodoUnit'.", result.TokenList[argument.TokenId].Range));
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorList.Add(new($"1-th argument '@' must be String Variable.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableWriterSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.HasReference = true;
                    }
                    argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                }
                else
                {
                    if (DiagnosticSeverity.Warning <= RequiredSeverity)
                    {
                        result.ErrorList.Add(new($"1-th argument '{span}' is String Variable. '@' should be written.", result.TokenList[argument.TokenId].Range));
                    }
                    argument.ReferenceId = result.StringVariableWriterSet.GetOrAdd(span, argument.TokenId);
                    argument.HasReference = true;
                    argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                }

                break;
            case ActionKind.storeAliveUnit:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorList.Add(new($"0-th argument is empty.Unit, StringVariableReader, ClassTypeReader is required by action 'storeAliveUnit'.", result.TokenList[argument.TokenId].Range));
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorList.Add(new($"0-th argument is empty string '@'. Unit, StringVariableReader, ClassTypeReader is required by action 'storeAliveUnit'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (Unsafe.IsNullRef(ref track))
                    {
                        result.ErrorList.Add(new($"0-th argument {span} is not Unit, StringVariableReader, ClassTypeReader required by action 'storeAliveUnit'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Unit:
                                argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Unit;
                                argument.HasReference = true;
                                break;
                          default:
                              result.ErrorList.Add(new($"0-th argument {span} is not Unit, StringVariableReader, ClassTypeReader required by action 'storeAliveUnit'.", result.TokenList[argument.TokenId].Range));
                              argument.HasReference = false;
                              break;
                        }
                    }
                }

                argument = ref arguments[1];
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorList.Add(new($"1-th argument is empty. String Variable is required by action 'storeAliveUnit'.", result.TokenList[argument.TokenId].Range));
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorList.Add(new($"1-th argument '@' must be String Variable.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableWriterSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.HasReference = true;
                    }
                    argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                }
                else
                {
                    if (DiagnosticSeverity.Warning <= RequiredSeverity)
                    {
                        result.ErrorList.Add(new($"1-th argument '{span}' is String Variable. '@' should be written.", result.TokenList[argument.TokenId].Range));
                    }
                    argument.ReferenceId = result.StringVariableWriterSet.GetOrAdd(span, argument.TokenId);
                    argument.HasReference = true;
                    argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                }

                break;
            case ActionKind.changePowerFlag:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorList.Add(new($"0-th argument is empty. String Variable is required by action 'changePowerFlag'.", result.TokenList[argument.TokenId].Range));
                }
                else if (span[0] == '@')
                {
                    if (span.Length != 1)
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    argument.ReferenceId = result.PowerSet.GetOrAdd(span, argument.TokenId);
                    argument.ReferenceKind = ReferenceKind.Power;
                    argument.HasReference = true;
                }

                // ERROR 0

                break;
            case ActionKind.choice:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorList.Add(new($"0-th argument is empty. String Variable is required by action 'choice'.", result.TokenList[argument.TokenId].Range));
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorList.Add(new($"0-th argument '@' must be String Variable.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableWriterSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.HasReference = true;
                    }
                    argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                }
                else
                {
                    if (DiagnosticSeverity.Warning <= RequiredSeverity)
                    {
                        result.ErrorList.Add(new($"0-th argument '{span}' is String Variable. '@' should be written.", result.TokenList[argument.TokenId].Range));
                    }
                    argument.ReferenceId = result.StringVariableWriterSet.GetOrAdd(span, argument.TokenId);
                    argument.HasReference = true;
                    argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                }

                argument = ref arguments[1];
                AddReferenceAndValidate_CompoundText(ref result, 1, ref argument);

                for (int i = 2; i < arguments.Length; ++i)
                {
                    argument = ref arguments[i];
                    AddReferenceAndValidate_CompoundText(ref result, -1, ref argument);

                }
                break;
            case ActionKind.addFriend:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorList.Add(new($"0-th argument is empty. String Variable is required by action 'addFriend'.", result.TokenList[argument.TokenId].Range));
                }
                else if (span[0] == '@')
                {
                    if (span.Length != 1)
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                    argument.ReferenceKind = ReferenceKind.Unit;
                    argument.HasReference = true;
                }

                argument = ref arguments[1];
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorList.Add(new($"1-th argument is empty.Race, Unit, Class, StringVariableReader is required by action 'addFriend'.", result.TokenList[argument.TokenId].Range));
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorList.Add(new($"1-th argument is empty string '@'. Race, Unit, Class, StringVariableReader is required by action 'addFriend'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (Unsafe.IsNullRef(ref track))
                    {
                        result.ErrorList.Add(new($"1-th argument {span} is not Race, Unit, Class, StringVariableReader required by action 'addFriend'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Unit:
                                argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Unit;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Class:
                                argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Class;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Race:
                                argument.ReferenceId = result.RaceSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Race;
                                argument.HasReference = true;
                                break;
                          default:
                              result.ErrorList.Add(new($"1-th argument {span} is not Race, Unit, Class, StringVariableReader required by action 'addFriend'.", result.TokenList[argument.TokenId].Range));
                              argument.HasReference = false;
                              break;
                        }
                    }
                }

                for (int i = 2; i < arguments.Length; ++i)
                {
                    argument = ref arguments[i];
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorList.Add(new($"{i}-th argument is empty.Race, Unit, Class, StringVariableReader is required by action 'addFriend'.", result.TokenList[argument.TokenId].Range));
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length == 1)
                        {
                            result.ErrorList.Add(new($"{i}-th argument is empty string '@'. Race, Unit, Class, StringVariableReader is required by action 'addFriend'.", result.TokenList[argument.TokenId].Range));
                        }
                        else
                        {
                            argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                        if (Unsafe.IsNullRef(ref track))
                        {
                            result.ErrorList.Add(new($"{i}-th argument {span} is not Race, Unit, Class, StringVariableReader required by action 'addFriend'.", result.TokenList[argument.TokenId].Range));
                        }
                        else
                        {
                            switch (track.Kind)
                            {
                                case ReferenceKind.Unit:
                                    argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                    argument.ReferenceKind = ReferenceKind.Unit;
                                    argument.HasReference = true;
                                    break;
                                case ReferenceKind.Class:
                                    argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                    argument.ReferenceKind = ReferenceKind.Class;
                                    argument.HasReference = true;
                                    break;
                                case ReferenceKind.Race:
                                    argument.ReferenceId = result.RaceSet.GetOrAdd(span, argument.TokenId);
                                    argument.ReferenceKind = ReferenceKind.Race;
                                    argument.HasReference = true;
                                    break;
                              default:
                                  result.ErrorList.Add(new($"{i}-th argument {span} is not Race, Unit, Class, StringVariableReader required by action 'addFriend'.", result.TokenList[argument.TokenId].Range));
                                  argument.HasReference = false;
                                  break;
                            }
                        }
                    }

                }
                break;
            case ActionKind.eraseUnit2:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorList.Add(new($"0-th argument is empty.Power, Spot, StringVariableReader is required by action 'eraseUnit2'.", result.TokenList[argument.TokenId].Range));
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorList.Add(new($"0-th argument is empty string '@'. Power, Spot, StringVariableReader is required by action 'eraseUnit2'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (Unsafe.IsNullRef(ref track))
                    {
                        result.ErrorList.Add(new($"0-th argument {span} is not Power, Spot, StringVariableReader required by action 'eraseUnit2'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Power:
                                argument.ReferenceId = result.PowerSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Power;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Spot:
                                argument.ReferenceId = result.SpotSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Spot;
                                argument.HasReference = true;
                                break;
                          default:
                              result.ErrorList.Add(new($"0-th argument {span} is not Power, Spot, StringVariableReader required by action 'eraseUnit2'.", result.TokenList[argument.TokenId].Range));
                              argument.HasReference = false;
                              break;
                        }
                    }
                }

                argument = ref arguments[1];
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorList.Add(new($"1-th argument is empty. String Variable is required by action 'eraseUnit2'.", result.TokenList[argument.TokenId].Range));
                }
                else if (span[0] == '@')
                {
                    if (span.Length != 1)
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                    argument.ReferenceKind = ReferenceKind.Unit;
                    argument.HasReference = true;
                }

                for (int i = 2; i < arguments.Length; ++i)
                {
                    argument = ref arguments[i];
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorList.Add(new($"{i}-th argument is empty. String Variable is required by action 'eraseUnit2'.", result.TokenList[argument.TokenId].Range));
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Unit;
                        argument.HasReference = true;
                    }

                }
                break;
            case ActionKind.addPowerMerce:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorList.Add(new($"0-th argument is empty. String Variable is required by action 'addPowerMerce'.", result.TokenList[argument.TokenId].Range));
                }
                else if (span[0] == '@')
                {
                    if (span.Length != 1)
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    argument.ReferenceId = result.PowerSet.GetOrAdd(span, argument.TokenId);
                    argument.ReferenceKind = ReferenceKind.Power;
                    argument.HasReference = true;
                }

                argument = ref arguments[1];
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorList.Add(new($"1-th argument is empty.Unit, Class, StringVariableReader is required by action 'addPowerMerce'.", result.TokenList[argument.TokenId].Range));
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorList.Add(new($"1-th argument is empty string '@'. Unit, Class, StringVariableReader is required by action 'addPowerMerce'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (Unsafe.IsNullRef(ref track))
                    {
                        result.ErrorList.Add(new($"1-th argument {span} is not Unit, Class, StringVariableReader required by action 'addPowerMerce'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Unit:
                                argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Unit;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Class:
                                argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Class;
                                argument.HasReference = true;
                                break;
                          default:
                              result.ErrorList.Add(new($"1-th argument {span} is not Unit, Class, StringVariableReader required by action 'addPowerMerce'.", result.TokenList[argument.TokenId].Range));
                              argument.HasReference = false;
                              break;
                        }
                    }
                }

                for (int i = 2; i < arguments.Length; ++i)
                {
                    argument = ref arguments[i];
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorList.Add(new($"{i}-th argument is empty.Unit, Class, StringVariableReader is required by action 'addPowerMerce'.", result.TokenList[argument.TokenId].Range));
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length == 1)
                        {
                            result.ErrorList.Add(new($"{i}-th argument is empty string '@'. Unit, Class, StringVariableReader is required by action 'addPowerMerce'.", result.TokenList[argument.TokenId].Range));
                        }
                        else
                        {
                            argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                        if (Unsafe.IsNullRef(ref track))
                        {
                            result.ErrorList.Add(new($"{i}-th argument {span} is not Unit, Class, StringVariableReader required by action 'addPowerMerce'.", result.TokenList[argument.TokenId].Range));
                        }
                        else
                        {
                            switch (track.Kind)
                            {
                                case ReferenceKind.Unit:
                                    argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                    argument.ReferenceKind = ReferenceKind.Unit;
                                    argument.HasReference = true;
                                    break;
                                case ReferenceKind.Class:
                                    argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                    argument.ReferenceKind = ReferenceKind.Class;
                                    argument.HasReference = true;
                                    break;
                              default:
                                  result.ErrorList.Add(new($"{i}-th argument {span} is not Unit, Class, StringVariableReader required by action 'addPowerMerce'.", result.TokenList[argument.TokenId].Range));
                                  argument.HasReference = false;
                                  break;
                            }
                        }
                    }

                }
                break;
            case ActionKind.addPowerStaff:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorList.Add(new($"0-th argument is empty. String Variable is required by action 'addPowerStaff'.", result.TokenList[argument.TokenId].Range));
                }
                else if (span[0] == '@')
                {
                    if (span.Length != 1)
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    argument.ReferenceId = result.PowerSet.GetOrAdd(span, argument.TokenId);
                    argument.ReferenceKind = ReferenceKind.Power;
                    argument.HasReference = true;
                }

                argument = ref arguments[1];
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorList.Add(new($"1-th argument is empty.Unit, Class, StringVariableReader is required by action 'addPowerStaff'.", result.TokenList[argument.TokenId].Range));
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorList.Add(new($"1-th argument is empty string '@'. Unit, Class, StringVariableReader is required by action 'addPowerStaff'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (Unsafe.IsNullRef(ref track))
                    {
                        result.ErrorList.Add(new($"1-th argument {span} is not Unit, Class, StringVariableReader required by action 'addPowerStaff'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Unit:
                                argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Unit;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Class:
                                argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Class;
                                argument.HasReference = true;
                                break;
                          default:
                              result.ErrorList.Add(new($"1-th argument {span} is not Unit, Class, StringVariableReader required by action 'addPowerStaff'.", result.TokenList[argument.TokenId].Range));
                              argument.HasReference = false;
                              break;
                        }
                    }
                }

                for (int i = 2; i < arguments.Length; ++i)
                {
                    argument = ref arguments[i];
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorList.Add(new($"{i}-th argument is empty.Unit, Class, StringVariableReader is required by action 'addPowerStaff'.", result.TokenList[argument.TokenId].Range));
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length == 1)
                        {
                            result.ErrorList.Add(new($"{i}-th argument is empty string '@'. Unit, Class, StringVariableReader is required by action 'addPowerStaff'.", result.TokenList[argument.TokenId].Range));
                        }
                        else
                        {
                            argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                        if (Unsafe.IsNullRef(ref track))
                        {
                            result.ErrorList.Add(new($"{i}-th argument {span} is not Unit, Class, StringVariableReader required by action 'addPowerStaff'.", result.TokenList[argument.TokenId].Range));
                        }
                        else
                        {
                            switch (track.Kind)
                            {
                                case ReferenceKind.Unit:
                                    argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                    argument.ReferenceKind = ReferenceKind.Unit;
                                    argument.HasReference = true;
                                    break;
                                case ReferenceKind.Class:
                                    argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                    argument.ReferenceKind = ReferenceKind.Class;
                                    argument.HasReference = true;
                                    break;
                              default:
                                  result.ErrorList.Add(new($"{i}-th argument {span} is not Unit, Class, StringVariableReader required by action 'addPowerStaff'.", result.TokenList[argument.TokenId].Range));
                                  argument.HasReference = false;
                                  break;
                            }
                        }
                    }

                }
                break;
            case ActionKind.addPowerMerce2:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorList.Add(new($"0-th argument is empty. String Variable is required by action 'addPowerMerce2'.", result.TokenList[argument.TokenId].Range));
                }
                else if (span[0] == '@')
                {
                    if (span.Length != 1)
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    argument.ReferenceId = result.PowerSet.GetOrAdd(span, argument.TokenId);
                    argument.ReferenceKind = ReferenceKind.Power;
                    argument.HasReference = true;
                }

                argument = ref arguments[1];
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorList.Add(new($"1-th argument is empty.Unit, Class, StringVariableReader is required by action 'addPowerMerce2'.", result.TokenList[argument.TokenId].Range));
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorList.Add(new($"1-th argument is empty string '@'. Unit, Class, StringVariableReader is required by action 'addPowerMerce2'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (Unsafe.IsNullRef(ref track))
                    {
                        result.ErrorList.Add(new($"1-th argument {span} is not Unit, Class, StringVariableReader required by action 'addPowerMerce2'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Unit:
                                argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Unit;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Class:
                                argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Class;
                                argument.HasReference = true;
                                break;
                          default:
                              result.ErrorList.Add(new($"1-th argument {span} is not Unit, Class, StringVariableReader required by action 'addPowerMerce2'.", result.TokenList[argument.TokenId].Range));
                              argument.HasReference = false;
                              break;
                        }
                    }
                }

                for (int i = 2; i < arguments.Length; ++i)
                {
                    argument = ref arguments[i];
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorList.Add(new($"{i}-th argument is empty.Unit, Class, StringVariableReader is required by action 'addPowerMerce2'.", result.TokenList[argument.TokenId].Range));
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length == 1)
                        {
                            result.ErrorList.Add(new($"{i}-th argument is empty string '@'. Unit, Class, StringVariableReader is required by action 'addPowerMerce2'.", result.TokenList[argument.TokenId].Range));
                        }
                        else
                        {
                            argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                        if (Unsafe.IsNullRef(ref track))
                        {
                            result.ErrorList.Add(new($"{i}-th argument {span} is not Unit, Class, StringVariableReader required by action 'addPowerMerce2'.", result.TokenList[argument.TokenId].Range));
                        }
                        else
                        {
                            switch (track.Kind)
                            {
                                case ReferenceKind.Unit:
                                    argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                    argument.ReferenceKind = ReferenceKind.Unit;
                                    argument.HasReference = true;
                                    break;
                                case ReferenceKind.Class:
                                    argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                    argument.ReferenceKind = ReferenceKind.Class;
                                    argument.HasReference = true;
                                    break;
                              default:
                                  result.ErrorList.Add(new($"{i}-th argument {span} is not Unit, Class, StringVariableReader required by action 'addPowerMerce2'.", result.TokenList[argument.TokenId].Range));
                                  argument.HasReference = false;
                                  break;
                            }
                        }
                    }

                }
                break;
            case ActionKind.addPowerStaff2:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorList.Add(new($"0-th argument is empty. String Variable is required by action 'addPowerStaff2'.", result.TokenList[argument.TokenId].Range));
                }
                else if (span[0] == '@')
                {
                    if (span.Length != 1)
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    argument.ReferenceId = result.PowerSet.GetOrAdd(span, argument.TokenId);
                    argument.ReferenceKind = ReferenceKind.Power;
                    argument.HasReference = true;
                }

                argument = ref arguments[1];
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorList.Add(new($"1-th argument is empty.Unit, Class, StringVariableReader is required by action 'addPowerStaff2'.", result.TokenList[argument.TokenId].Range));
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorList.Add(new($"1-th argument is empty string '@'. Unit, Class, StringVariableReader is required by action 'addPowerStaff2'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (Unsafe.IsNullRef(ref track))
                    {
                        result.ErrorList.Add(new($"1-th argument {span} is not Unit, Class, StringVariableReader required by action 'addPowerStaff2'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Unit:
                                argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Unit;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Class:
                                argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Class;
                                argument.HasReference = true;
                                break;
                          default:
                              result.ErrorList.Add(new($"1-th argument {span} is not Unit, Class, StringVariableReader required by action 'addPowerStaff2'.", result.TokenList[argument.TokenId].Range));
                              argument.HasReference = false;
                              break;
                        }
                    }
                }

                for (int i = 2; i < arguments.Length; ++i)
                {
                    argument = ref arguments[i];
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorList.Add(new($"{i}-th argument is empty.Unit, Class, StringVariableReader is required by action 'addPowerStaff2'.", result.TokenList[argument.TokenId].Range));
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length == 1)
                        {
                            result.ErrorList.Add(new($"{i}-th argument is empty string '@'. Unit, Class, StringVariableReader is required by action 'addPowerStaff2'.", result.TokenList[argument.TokenId].Range));
                        }
                        else
                        {
                            argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                        if (Unsafe.IsNullRef(ref track))
                        {
                            result.ErrorList.Add(new($"{i}-th argument {span} is not Unit, Class, StringVariableReader required by action 'addPowerStaff2'.", result.TokenList[argument.TokenId].Range));
                        }
                        else
                        {
                            switch (track.Kind)
                            {
                                case ReferenceKind.Unit:
                                    argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                    argument.ReferenceKind = ReferenceKind.Unit;
                                    argument.HasReference = true;
                                    break;
                                case ReferenceKind.Class:
                                    argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                    argument.ReferenceKind = ReferenceKind.Class;
                                    argument.HasReference = true;
                                    break;
                              default:
                                  result.ErrorList.Add(new($"{i}-th argument {span} is not Unit, Class, StringVariableReader required by action 'addPowerStaff2'.", result.TokenList[argument.TokenId].Range));
                                  argument.HasReference = false;
                                  break;
                            }
                        }
                    }

                }
                break;
            case ActionKind.exit:
                if (arguments.Length <= 0)
                {
                    break;
                }
                if (argument.IsNumber)
                {
                    if (argument.Number != 0)
                    {
                        result.ErrorList.Add(new($"0-th argument is not Number, CompoundText required by action 'exit'.", result.TokenList[argument.TokenId].Range));
                    }
                }
                else
                {
                    AddReferenceAndValidate_CompoundText(ref result, 0, ref argument);
                }

                break;
            case ActionKind.scroll2:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorList.Add(new($"0-th argument is empty.Unit, Spot, StringVariableReader is required by action 'scroll2'.", result.TokenList[argument.TokenId].Range));
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorList.Add(new($"0-th argument is empty string '@'. Unit, Spot, StringVariableReader is required by action 'scroll2'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (Unsafe.IsNullRef(ref track))
                    {
                        result.ErrorList.Add(new($"0-th argument {span} is not Unit, Spot, StringVariableReader required by action 'scroll2'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Unit:
                                argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Unit;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Spot:
                                argument.ReferenceId = result.SpotSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Spot;
                                argument.HasReference = true;
                                break;
                          default:
                              result.ErrorList.Add(new($"0-th argument {span} is not Unit, Spot, StringVariableReader required by action 'scroll2'.", result.TokenList[argument.TokenId].Range));
                              argument.HasReference = false;
                              break;
                        }
                    }
                }

                break;
            case ActionKind.ctrlTroop:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorList.Add(new($"0-th argument is empty.Unit, Class, StringVariableReader is required by action 'ctrlTroop'.", result.TokenList[argument.TokenId].Range));
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorList.Add(new($"0-th argument is empty string '@'. Unit, Class, StringVariableReader is required by action 'ctrlTroop'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (Unsafe.IsNullRef(ref track))
                    {
                        result.ErrorList.Add(new($"0-th argument {span} is not Unit, Class, StringVariableReader required by action 'ctrlTroop'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Unit:
                                argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Unit;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Class:
                                argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Class;
                                argument.HasReference = true;
                                break;
                          default:
                              result.ErrorList.Add(new($"0-th argument {span} is not Unit, Class, StringVariableReader required by action 'ctrlTroop'.", result.TokenList[argument.TokenId].Range));
                              argument.HasReference = false;
                              break;
                        }
                    }
                }

                break;
            case ActionKind.freeTroop:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorList.Add(new($"0-th argument is empty.Unit, Class, StringVariableReader is required by action 'freeTroop'.", result.TokenList[argument.TokenId].Range));
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorList.Add(new($"0-th argument is empty string '@'. Unit, Class, StringVariableReader is required by action 'freeTroop'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (Unsafe.IsNullRef(ref track))
                    {
                        result.ErrorList.Add(new($"0-th argument {span} is not Unit, Class, StringVariableReader required by action 'freeTroop'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Unit:
                                argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Unit;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Class:
                                argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Class;
                                argument.HasReference = true;
                                break;
                          default:
                              result.ErrorList.Add(new($"0-th argument {span} is not Unit, Class, StringVariableReader required by action 'freeTroop'.", result.TokenList[argument.TokenId].Range));
                              argument.HasReference = false;
                              break;
                        }
                    }
                }

                break;
            case ActionKind.haltTroop:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorList.Add(new($"0-th argument is empty.Unit, Class, StringVariableReader is required by action 'haltTroop'.", result.TokenList[argument.TokenId].Range));
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorList.Add(new($"0-th argument is empty string '@'. Unit, Class, StringVariableReader is required by action 'haltTroop'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (Unsafe.IsNullRef(ref track))
                    {
                        result.ErrorList.Add(new($"0-th argument {span} is not Unit, Class, StringVariableReader required by action 'haltTroop'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Unit:
                                argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Unit;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Class:
                                argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Class;
                                argument.HasReference = true;
                                break;
                          default:
                              result.ErrorList.Add(new($"0-th argument {span} is not Unit, Class, StringVariableReader required by action 'haltTroop'.", result.TokenList[argument.TokenId].Range));
                              argument.HasReference = false;
                              break;
                        }
                    }
                }

                break;
            case ActionKind.eraseTroop:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorList.Add(new($"0-th argument is empty.Unit, Class, StringVariableReader is required by action 'eraseTroop'.", result.TokenList[argument.TokenId].Range));
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorList.Add(new($"0-th argument is empty string '@'. Unit, Class, StringVariableReader is required by action 'eraseTroop'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (Unsafe.IsNullRef(ref track))
                    {
                        result.ErrorList.Add(new($"0-th argument {span} is not Unit, Class, StringVariableReader required by action 'eraseTroop'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Unit:
                                argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Unit;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Class:
                                argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Class;
                                argument.HasReference = true;
                                break;
                          default:
                              result.ErrorList.Add(new($"0-th argument {span} is not Unit, Class, StringVariableReader required by action 'eraseTroop'.", result.TokenList[argument.TokenId].Range));
                              argument.HasReference = false;
                              break;
                        }
                    }
                }

                break;
            case ActionKind.sleepTroop:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorList.Add(new($"0-th argument is empty.Unit, Class, StringVariableReader is required by action 'sleepTroop'.", result.TokenList[argument.TokenId].Range));
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorList.Add(new($"0-th argument is empty string '@'. Unit, Class, StringVariableReader is required by action 'sleepTroop'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (Unsafe.IsNullRef(ref track))
                    {
                        result.ErrorList.Add(new($"0-th argument {span} is not Unit, Class, StringVariableReader required by action 'sleepTroop'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Unit:
                                argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Unit;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Class:
                                argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Class;
                                argument.HasReference = true;
                                break;
                          default:
                              result.ErrorList.Add(new($"0-th argument {span} is not Unit, Class, StringVariableReader required by action 'sleepTroop'.", result.TokenList[argument.TokenId].Range));
                              argument.HasReference = false;
                              break;
                        }
                    }
                }

                break;
            case ActionKind.activeTroop:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorList.Add(new($"0-th argument is empty.Unit, Class, StringVariableReader is required by action 'activeTroop'.", result.TokenList[argument.TokenId].Range));
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorList.Add(new($"0-th argument is empty string '@'. Unit, Class, StringVariableReader is required by action 'activeTroop'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (Unsafe.IsNullRef(ref track))
                    {
                        result.ErrorList.Add(new($"0-th argument {span} is not Unit, Class, StringVariableReader required by action 'activeTroop'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Unit:
                                argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Unit;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Class:
                                argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Class;
                                argument.HasReference = true;
                                break;
                          default:
                              result.ErrorList.Add(new($"0-th argument {span} is not Unit, Class, StringVariableReader required by action 'activeTroop'.", result.TokenList[argument.TokenId].Range));
                              argument.HasReference = false;
                              break;
                        }
                    }
                }

                break;
            case ActionKind.removeTroop:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorList.Add(new($"0-th argument is empty.Unit, Class, StringVariableReader is required by action 'removeTroop'.", result.TokenList[argument.TokenId].Range));
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorList.Add(new($"0-th argument is empty string '@'. Unit, Class, StringVariableReader is required by action 'removeTroop'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (Unsafe.IsNullRef(ref track))
                    {
                        result.ErrorList.Add(new($"0-th argument {span} is not Unit, Class, StringVariableReader required by action 'removeTroop'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Unit:
                                argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Unit;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Class:
                                argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Class;
                                argument.HasReference = true;
                                break;
                          default:
                              result.ErrorList.Add(new($"0-th argument {span} is not Unit, Class, StringVariableReader required by action 'removeTroop'.", result.TokenList[argument.TokenId].Range));
                              argument.HasReference = false;
                              break;
                        }
                    }
                }

                break;
            case ActionKind.unctrlTroop:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorList.Add(new($"0-th argument is empty.Unit, Class, StringVariableReader is required by action 'unctrlTroop'.", result.TokenList[argument.TokenId].Range));
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorList.Add(new($"0-th argument is empty string '@'. Unit, Class, StringVariableReader is required by action 'unctrlTroop'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (Unsafe.IsNullRef(ref track))
                    {
                        result.ErrorList.Add(new($"0-th argument {span} is not Unit, Class, StringVariableReader required by action 'unctrlTroop'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Unit:
                                argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Unit;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Class:
                                argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Class;
                                argument.HasReference = true;
                                break;
                          default:
                              result.ErrorList.Add(new($"0-th argument {span} is not Unit, Class, StringVariableReader required by action 'unctrlTroop'.", result.TokenList[argument.TokenId].Range));
                              argument.HasReference = false;
                              break;
                        }
                    }
                }

                break;
            case ActionKind.retreatTroop:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorList.Add(new($"0-th argument is empty.Unit, Class, StringVariableReader is required by action 'retreatTroop'.", result.TokenList[argument.TokenId].Range));
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorList.Add(new($"0-th argument is empty string '@'. Unit, Class, StringVariableReader is required by action 'retreatTroop'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (Unsafe.IsNullRef(ref track))
                    {
                        result.ErrorList.Add(new($"0-th argument {span} is not Unit, Class, StringVariableReader required by action 'retreatTroop'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Unit:
                                argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Unit;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Class:
                                argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Class;
                                argument.HasReference = true;
                                break;
                          default:
                              result.ErrorList.Add(new($"0-th argument {span} is not Unit, Class, StringVariableReader required by action 'retreatTroop'.", result.TokenList[argument.TokenId].Range));
                              argument.HasReference = false;
                              break;
                        }
                    }
                }

                break;
            case ActionKind.eraseUnitTroop:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorList.Add(new($"0-th argument is empty.Unit, Class, StringVariableReader is required by action 'eraseUnitTroop'.", result.TokenList[argument.TokenId].Range));
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorList.Add(new($"0-th argument is empty string '@'. Unit, Class, StringVariableReader is required by action 'eraseUnitTroop'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (Unsafe.IsNullRef(ref track))
                    {
                        result.ErrorList.Add(new($"0-th argument {span} is not Unit, Class, StringVariableReader required by action 'eraseUnitTroop'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Unit:
                                argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Unit;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Class:
                                argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Class;
                                argument.HasReference = true;
                                break;
                          default:
                              result.ErrorList.Add(new($"0-th argument {span} is not Unit, Class, StringVariableReader required by action 'eraseUnitTroop'.", result.TokenList[argument.TokenId].Range));
                              argument.HasReference = false;
                              break;
                        }
                    }
                }

                break;
            case ActionKind.aimTroop:
                switch (arguments.Length)
                {
                    case 2:
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorList.Add(new($"0-th argument is empty.Unit, Class, StringVariableReader is required by action 'aimTroop'.", result.TokenList[argument.TokenId].Range));
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length == 1)
                            {
                                result.ErrorList.Add(new($"0-th argument is empty string '@'. Unit, Class, StringVariableReader is required by action 'aimTroop'.", result.TokenList[argument.TokenId].Range));
                            }
                            else
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                            if (Unsafe.IsNullRef(ref track))
                            {
                                result.ErrorList.Add(new($"0-th argument {span} is not Unit, Class, StringVariableReader required by action 'aimTroop'.", result.TokenList[argument.TokenId].Range));
                            }
                            else
                            {
                                switch (track.Kind)
                                {
                                    case ReferenceKind.Unit:
                                        argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Unit;
                                        argument.HasReference = true;
                                        break;
                                    case ReferenceKind.Class:
                                        argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Class;
                                        argument.HasReference = true;
                                        break;
                                  default:
                                      result.ErrorList.Add(new($"0-th argument {span} is not Unit, Class, StringVariableReader required by action 'aimTroop'.", result.TokenList[argument.TokenId].Range));
                                      argument.HasReference = false;
                                      break;
                                }
                            }
                        }

                        argument = ref arguments[1];
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorList.Add(new($"1-th argument is empty.Unit, Class, StringVariableReader is required by action 'aimTroop'.", result.TokenList[argument.TokenId].Range));
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length == 1)
                            {
                                result.ErrorList.Add(new($"1-th argument is empty string '@'. Unit, Class, StringVariableReader is required by action 'aimTroop'.", result.TokenList[argument.TokenId].Range));
                            }
                            else
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                            if (Unsafe.IsNullRef(ref track))
                            {
                                result.ErrorList.Add(new($"1-th argument {span} is not Unit, Class, StringVariableReader required by action 'aimTroop'.", result.TokenList[argument.TokenId].Range));
                            }
                            else
                            {
                                switch (track.Kind)
                                {
                                    case ReferenceKind.Unit:
                                        argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Unit;
                                        argument.HasReference = true;
                                        break;
                                    case ReferenceKind.Class:
                                        argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Class;
                                        argument.HasReference = true;
                                        break;
                                  default:
                                      result.ErrorList.Add(new($"1-th argument {span} is not Unit, Class, StringVariableReader required by action 'aimTroop'.", result.TokenList[argument.TokenId].Range));
                                      argument.HasReference = false;
                                      break;
                                }
                            }
                        }

                        break;
                    case 3:
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorList.Add(new($"0-th argument is empty.Unit, Class, StringVariableReader is required by action 'aimTroop'.", result.TokenList[argument.TokenId].Range));
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length == 1)
                            {
                                result.ErrorList.Add(new($"0-th argument is empty string '@'. Unit, Class, StringVariableReader is required by action 'aimTroop'.", result.TokenList[argument.TokenId].Range));
                            }
                            else
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                            if (Unsafe.IsNullRef(ref track))
                            {
                                result.ErrorList.Add(new($"0-th argument {span} is not Unit, Class, StringVariableReader required by action 'aimTroop'.", result.TokenList[argument.TokenId].Range));
                            }
                            else
                            {
                                switch (track.Kind)
                                {
                                    case ReferenceKind.Unit:
                                        argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Unit;
                                        argument.HasReference = true;
                                        break;
                                    case ReferenceKind.Class:
                                        argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Class;
                                        argument.HasReference = true;
                                        break;
                                  default:
                                      result.ErrorList.Add(new($"0-th argument {span} is not Unit, Class, StringVariableReader required by action 'aimTroop'.", result.TokenList[argument.TokenId].Range));
                                      argument.HasReference = false;
                                      break;
                                }
                            }
                        }

                        argument = ref arguments[1];
                        if (!argument.IsNumber)
                        {
                            argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                            argument.ReferenceId = result.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                            argument.HasReference = true;
                        }

                        argument = ref arguments[2];
                        if (!argument.IsNumber)
                        {
                            argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                            argument.ReferenceId = result.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                            argument.HasReference = true;
                        }

                        break;
                }
                break;
            case ActionKind.pushCon:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorList.Add(new($"0-th argument is empty. String Variable is required by action 'pushCon'.", result.TokenList[argument.TokenId].Range));
                }
                else if (span[0] == '@')
                {
                    if (span.Length != 1)
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    argument.ReferenceId = result.SpotSet.GetOrAdd(span, argument.TokenId);
                    argument.ReferenceKind = ReferenceKind.Spot;
                    argument.HasReference = true;
                }

                argument = ref arguments[1];
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorList.Add(new($"1-th argument is empty.Unit, Class, StringVariableReader is required by action 'pushCon'.", result.TokenList[argument.TokenId].Range));
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorList.Add(new($"1-th argument is empty string '@'. Unit, Class, StringVariableReader is required by action 'pushCon'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (Unsafe.IsNullRef(ref track))
                    {
                        result.ErrorList.Add(new($"1-th argument {span} is not Unit, Class, StringVariableReader required by action 'pushCon'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Unit:
                                argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Unit;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Class:
                                argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Class;
                                argument.HasReference = true;
                                break;
                          default:
                              result.ErrorList.Add(new($"1-th argument {span} is not Unit, Class, StringVariableReader required by action 'pushCon'.", result.TokenList[argument.TokenId].Range));
                              argument.HasReference = false;
                              break;
                        }
                    }
                }

                argument = ref arguments[2];
                argument.ReferenceKind = ReferenceKind.NumberVariableWriter;
                argument.ReferenceId = result.NumberVariableWriterSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                argument.HasReference = true;

                break;
            case ActionKind.addTroop:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorList.Add(new($"0-th argument is empty.Unit, Class, StringVariableReader is required by action 'addTroop'.", result.TokenList[argument.TokenId].Range));
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorList.Add(new($"0-th argument is empty string '@'. Unit, Class, StringVariableReader is required by action 'addTroop'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (Unsafe.IsNullRef(ref track))
                    {
                        result.ErrorList.Add(new($"0-th argument {span} is not Unit, Class, StringVariableReader required by action 'addTroop'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Unit:
                                argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Unit;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Class:
                                argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Class;
                                argument.HasReference = true;
                                break;
                          default:
                              result.ErrorList.Add(new($"0-th argument {span} is not Unit, Class, StringVariableReader required by action 'addTroop'.", result.TokenList[argument.TokenId].Range));
                              argument.HasReference = false;
                              break;
                        }
                    }
                }

                argument = ref arguments[1];
                if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = result.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                argument = ref arguments[2];
                if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = result.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                argument = ref arguments[3];
                if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = result.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                // ERROR 1
                break;
            case ActionKind.stopTroop:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorList.Add(new($"0-th argument is empty.Unit, Class, StringVariableReader is required by action 'stopTroop'.", result.TokenList[argument.TokenId].Range));
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorList.Add(new($"0-th argument is empty string '@'. Unit, Class, StringVariableReader is required by action 'stopTroop'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (Unsafe.IsNullRef(ref track))
                    {
                        result.ErrorList.Add(new($"0-th argument {span} is not Unit, Class, StringVariableReader required by action 'stopTroop'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Unit:
                                argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Unit;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Class:
                                argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Class;
                                argument.HasReference = true;
                                break;
                          default:
                              result.ErrorList.Add(new($"0-th argument {span} is not Unit, Class, StringVariableReader required by action 'stopTroop'.", result.TokenList[argument.TokenId].Range));
                              argument.HasReference = false;
                              break;
                        }
                    }
                }

                for (int i = 1; i < arguments.Length; ++i)
                {
                    argument = ref arguments[i];
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorList.Add(new($"{i}-th argument is empty.Unit, Class, StringVariableReader is required by action 'stopTroop'.", result.TokenList[argument.TokenId].Range));
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length == 1)
                        {
                            result.ErrorList.Add(new($"{i}-th argument is empty string '@'. Unit, Class, StringVariableReader is required by action 'stopTroop'.", result.TokenList[argument.TokenId].Range));
                        }
                        else
                        {
                            argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                        if (Unsafe.IsNullRef(ref track))
                        {
                            result.ErrorList.Add(new($"{i}-th argument {span} is not Unit, Class, StringVariableReader required by action 'stopTroop'.", result.TokenList[argument.TokenId].Range));
                        }
                        else
                        {
                            switch (track.Kind)
                            {
                                case ReferenceKind.Unit:
                                    argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                    argument.ReferenceKind = ReferenceKind.Unit;
                                    argument.HasReference = true;
                                    break;
                                case ReferenceKind.Class:
                                    argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                    argument.ReferenceKind = ReferenceKind.Class;
                                    argument.HasReference = true;
                                    break;
                              default:
                                  result.ErrorList.Add(new($"{i}-th argument {span} is not Unit, Class, StringVariableReader required by action 'stopTroop'.", result.TokenList[argument.TokenId].Range));
                                  argument.HasReference = false;
                                  break;
                            }
                        }
                    }

                }
                break;
            case ActionKind.eraseSkill:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorList.Add(new($"0-th argument is empty. String Variable is required by action 'eraseSkill'.", result.TokenList[argument.TokenId].Range));
                }
                else if (span[0] == '@')
                {
                    if (span.Length != 1)
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                    argument.ReferenceKind = ReferenceKind.Unit;
                    argument.HasReference = true;
                }

                if (arguments.Length <= 1)
                {
                    break;
                }
                argument = ref arguments[1];
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorList.Add(new($"1-th argument is empty.Skill, Skillset, StringVariableReader is required by action 'eraseSkill'.", result.TokenList[argument.TokenId].Range));
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorList.Add(new($"1-th argument is empty string '@'. Skill, Skillset, StringVariableReader is required by action 'eraseSkill'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_SkillSkillset.TryGet(span);
                    if (Unsafe.IsNullRef(ref track))
                    {
                        result.ErrorList.Add(new($"1-th argument {span} is not Skill, Skillset, StringVariableReader required by action 'eraseSkill'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Skill:
                                argument.ReferenceId = result.SkillSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Skill;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Skillset:
                                argument.ReferenceId = result.SkillsetSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Skillset;
                                argument.HasReference = true;
                                break;
                          default:
                              result.ErrorList.Add(new($"1-th argument {span} is not Skill, Skillset, StringVariableReader required by action 'eraseSkill'.", result.TokenList[argument.TokenId].Range));
                              argument.HasReference = false;
                              break;
                        }
                    }
                }

                for (int i = 2; i < arguments.Length; ++i)
                {
                    argument = ref arguments[i];
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorList.Add(new($"{i}-th argument is empty.Skill, Skillset, StringVariableReader is required by action 'eraseSkill'.", result.TokenList[argument.TokenId].Range));
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length == 1)
                        {
                            result.ErrorList.Add(new($"{i}-th argument is empty string '@'. Skill, Skillset, StringVariableReader is required by action 'eraseSkill'.", result.TokenList[argument.TokenId].Range));
                        }
                        else
                        {
                            argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        ref var track = ref AmbiguousDictionary_SkillSkillset.TryGet(span);
                        if (Unsafe.IsNullRef(ref track))
                        {
                            result.ErrorList.Add(new($"{i}-th argument {span} is not Skill, Skillset, StringVariableReader required by action 'eraseSkill'.", result.TokenList[argument.TokenId].Range));
                        }
                        else
                        {
                            switch (track.Kind)
                            {
                                case ReferenceKind.Skill:
                                    argument.ReferenceId = result.SkillSet.GetOrAdd(span, argument.TokenId);
                                    argument.ReferenceKind = ReferenceKind.Skill;
                                    argument.HasReference = true;
                                    break;
                                case ReferenceKind.Skillset:
                                    argument.ReferenceId = result.SkillsetSet.GetOrAdd(span, argument.TokenId);
                                    argument.ReferenceKind = ReferenceKind.Skillset;
                                    argument.HasReference = true;
                                    break;
                              default:
                                  result.ErrorList.Add(new($"{i}-th argument {span} is not Skill, Skillset, StringVariableReader required by action 'eraseSkill'.", result.TokenList[argument.TokenId].Range));
                                  argument.HasReference = false;
                                  break;
                            }
                        }
                    }

                }
                break;
            case ActionKind.eraseFriend:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorList.Add(new($"0-th argument is empty. String Variable is required by action 'eraseFriend'.", result.TokenList[argument.TokenId].Range));
                }
                else if (span[0] == '@')
                {
                    if (span.Length != 1)
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                    argument.ReferenceKind = ReferenceKind.Unit;
                    argument.HasReference = true;
                }

                if (arguments.Length <= 1)
                {
                    break;
                }
                argument = ref arguments[1];
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorList.Add(new($"1-th argument is empty.Race, Unit, Class, StringVariableReader is required by action 'eraseFriend'.", result.TokenList[argument.TokenId].Range));
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorList.Add(new($"1-th argument is empty string '@'. Race, Unit, Class, StringVariableReader is required by action 'eraseFriend'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (Unsafe.IsNullRef(ref track))
                    {
                        result.ErrorList.Add(new($"1-th argument {span} is not Race, Unit, Class, StringVariableReader required by action 'eraseFriend'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Unit:
                                argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Unit;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Class:
                                argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Class;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Race:
                                argument.ReferenceId = result.RaceSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Race;
                                argument.HasReference = true;
                                break;
                          default:
                              result.ErrorList.Add(new($"1-th argument {span} is not Race, Unit, Class, StringVariableReader required by action 'eraseFriend'.", result.TokenList[argument.TokenId].Range));
                              argument.HasReference = false;
                              break;
                        }
                    }
                }

                for (int i = 2; i < arguments.Length; ++i)
                {
                    argument = ref arguments[i];
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorList.Add(new($"{i}-th argument is empty.Race, Unit, Class, StringVariableReader is required by action 'eraseFriend'.", result.TokenList[argument.TokenId].Range));
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length == 1)
                        {
                            result.ErrorList.Add(new($"{i}-th argument is empty string '@'. Race, Unit, Class, StringVariableReader is required by action 'eraseFriend'.", result.TokenList[argument.TokenId].Range));
                        }
                        else
                        {
                            argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                        if (Unsafe.IsNullRef(ref track))
                        {
                            result.ErrorList.Add(new($"{i}-th argument {span} is not Race, Unit, Class, StringVariableReader required by action 'eraseFriend'.", result.TokenList[argument.TokenId].Range));
                        }
                        else
                        {
                            switch (track.Kind)
                            {
                                case ReferenceKind.Unit:
                                    argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                    argument.ReferenceKind = ReferenceKind.Unit;
                                    argument.HasReference = true;
                                    break;
                                case ReferenceKind.Class:
                                    argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                    argument.ReferenceKind = ReferenceKind.Class;
                                    argument.HasReference = true;
                                    break;
                                case ReferenceKind.Race:
                                    argument.ReferenceId = result.RaceSet.GetOrAdd(span, argument.TokenId);
                                    argument.ReferenceKind = ReferenceKind.Race;
                                    argument.HasReference = true;
                                    break;
                              default:
                                  result.ErrorList.Add(new($"{i}-th argument {span} is not Race, Unit, Class, StringVariableReader required by action 'eraseFriend'.", result.TokenList[argument.TokenId].Range));
                                  argument.HasReference = false;
                                  break;
                            }
                        }
                    }

                }
                break;
            case ActionKind.moveTroop:
                switch (arguments.Length)
                {
                    case 2:
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorList.Add(new($"0-th argument is empty.Unit, Class, StringVariableReader is required by action 'moveTroop'.", result.TokenList[argument.TokenId].Range));
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length == 1)
                            {
                                result.ErrorList.Add(new($"0-th argument is empty string '@'. Unit, Class, StringVariableReader is required by action 'moveTroop'.", result.TokenList[argument.TokenId].Range));
                            }
                            else
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                            if (Unsafe.IsNullRef(ref track))
                            {
                                result.ErrorList.Add(new($"0-th argument {span} is not Unit, Class, StringVariableReader required by action 'moveTroop'.", result.TokenList[argument.TokenId].Range));
                            }
                            else
                            {
                                switch (track.Kind)
                                {
                                    case ReferenceKind.Unit:
                                        argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Unit;
                                        argument.HasReference = true;
                                        break;
                                    case ReferenceKind.Class:
                                        argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Class;
                                        argument.HasReference = true;
                                        break;
                                  default:
                                      result.ErrorList.Add(new($"0-th argument {span} is not Unit, Class, StringVariableReader required by action 'moveTroop'.", result.TokenList[argument.TokenId].Range));
                                      argument.HasReference = false;
                                      break;
                                }
                            }
                        }

                        argument = ref arguments[1];
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorList.Add(new($"1-th argument is empty.Unit, Class, StringVariableReader is required by action 'moveTroop'.", result.TokenList[argument.TokenId].Range));
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length == 1)
                            {
                                result.ErrorList.Add(new($"1-th argument is empty string '@'. Unit, Class, StringVariableReader is required by action 'moveTroop'.", result.TokenList[argument.TokenId].Range));
                            }
                            else
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                            if (Unsafe.IsNullRef(ref track))
                            {
                                result.ErrorList.Add(new($"1-th argument {span} is not Unit, Class, StringVariableReader required by action 'moveTroop'.", result.TokenList[argument.TokenId].Range));
                            }
                            else
                            {
                                switch (track.Kind)
                                {
                                    case ReferenceKind.Unit:
                                        argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Unit;
                                        argument.HasReference = true;
                                        break;
                                    case ReferenceKind.Class:
                                        argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Class;
                                        argument.HasReference = true;
                                        break;
                                  default:
                                      result.ErrorList.Add(new($"1-th argument {span} is not Unit, Class, StringVariableReader required by action 'moveTroop'.", result.TokenList[argument.TokenId].Range));
                                      argument.HasReference = false;
                                      break;
                                }
                            }
                        }

                        break;
                    case 3:
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorList.Add(new($"0-th argument is empty.Unit, Class, StringVariableReader is required by action 'moveTroop'.", result.TokenList[argument.TokenId].Range));
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length == 1)
                            {
                                result.ErrorList.Add(new($"0-th argument is empty string '@'. Unit, Class, StringVariableReader is required by action 'moveTroop'.", result.TokenList[argument.TokenId].Range));
                            }
                            else
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                            if (Unsafe.IsNullRef(ref track))
                            {
                                result.ErrorList.Add(new($"0-th argument {span} is not Unit, Class, StringVariableReader required by action 'moveTroop'.", result.TokenList[argument.TokenId].Range));
                            }
                            else
                            {
                                switch (track.Kind)
                                {
                                    case ReferenceKind.Unit:
                                        argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Unit;
                                        argument.HasReference = true;
                                        break;
                                    case ReferenceKind.Class:
                                        argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Class;
                                        argument.HasReference = true;
                                        break;
                                  default:
                                      result.ErrorList.Add(new($"0-th argument {span} is not Unit, Class, StringVariableReader required by action 'moveTroop'.", result.TokenList[argument.TokenId].Range));
                                      argument.HasReference = false;
                                      break;
                                }
                            }
                        }

                        argument = ref arguments[1];
                        if (!argument.IsNumber)
                        {
                            argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                            argument.ReferenceId = result.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                            argument.HasReference = true;
                        }

                        argument = ref arguments[2];
                        if (!argument.IsNumber)
                        {
                            argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                            argument.ReferenceId = result.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                            argument.HasReference = true;
                        }

                        break;
                    case 4:
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorList.Add(new($"0-th argument is empty.Unit, Class, StringVariableReader is required by action 'moveTroop'.", result.TokenList[argument.TokenId].Range));
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length == 1)
                            {
                                result.ErrorList.Add(new($"0-th argument is empty string '@'. Unit, Class, StringVariableReader is required by action 'moveTroop'.", result.TokenList[argument.TokenId].Range));
                            }
                            else
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                            if (Unsafe.IsNullRef(ref track))
                            {
                                result.ErrorList.Add(new($"0-th argument {span} is not Unit, Class, StringVariableReader required by action 'moveTroop'.", result.TokenList[argument.TokenId].Range));
                            }
                            else
                            {
                                switch (track.Kind)
                                {
                                    case ReferenceKind.Unit:
                                        argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Unit;
                                        argument.HasReference = true;
                                        break;
                                    case ReferenceKind.Class:
                                        argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Class;
                                        argument.HasReference = true;
                                        break;
                                  default:
                                      result.ErrorList.Add(new($"0-th argument {span} is not Unit, Class, StringVariableReader required by action 'moveTroop'.", result.TokenList[argument.TokenId].Range));
                                      argument.HasReference = false;
                                      break;
                                }
                            }
                        }

                        argument = ref arguments[1];
                        if (!argument.IsNumber)
                        {
                            argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                            argument.ReferenceId = result.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                            argument.HasReference = true;
                        }

                        argument = ref arguments[2];
                        if (!argument.IsNumber)
                        {
                            argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                            argument.ReferenceId = result.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                            argument.HasReference = true;
                        }

                        argument = ref arguments[3];
                        if (!argument.IsNumber)
                        {
                            argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                            argument.ReferenceId = result.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                            argument.HasReference = true;
                        }

                        break;
                }
                break;
            case ActionKind.moveTroopFix:
                switch (arguments.Length)
                {
                    case 2:
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorList.Add(new($"0-th argument is empty.Unit, Class, StringVariableReader is required by action 'moveTroopFix'.", result.TokenList[argument.TokenId].Range));
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length == 1)
                            {
                                result.ErrorList.Add(new($"0-th argument is empty string '@'. Unit, Class, StringVariableReader is required by action 'moveTroopFix'.", result.TokenList[argument.TokenId].Range));
                            }
                            else
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                            if (Unsafe.IsNullRef(ref track))
                            {
                                result.ErrorList.Add(new($"0-th argument {span} is not Unit, Class, StringVariableReader required by action 'moveTroopFix'.", result.TokenList[argument.TokenId].Range));
                            }
                            else
                            {
                                switch (track.Kind)
                                {
                                    case ReferenceKind.Unit:
                                        argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Unit;
                                        argument.HasReference = true;
                                        break;
                                    case ReferenceKind.Class:
                                        argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Class;
                                        argument.HasReference = true;
                                        break;
                                  default:
                                      result.ErrorList.Add(new($"0-th argument {span} is not Unit, Class, StringVariableReader required by action 'moveTroopFix'.", result.TokenList[argument.TokenId].Range));
                                      argument.HasReference = false;
                                      break;
                                }
                            }
                        }

                        argument = ref arguments[1];
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorList.Add(new($"1-th argument is empty.Unit, Class, StringVariableReader is required by action 'moveTroopFix'.", result.TokenList[argument.TokenId].Range));
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length == 1)
                            {
                                result.ErrorList.Add(new($"1-th argument is empty string '@'. Unit, Class, StringVariableReader is required by action 'moveTroopFix'.", result.TokenList[argument.TokenId].Range));
                            }
                            else
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                            if (Unsafe.IsNullRef(ref track))
                            {
                                result.ErrorList.Add(new($"1-th argument {span} is not Unit, Class, StringVariableReader required by action 'moveTroopFix'.", result.TokenList[argument.TokenId].Range));
                            }
                            else
                            {
                                switch (track.Kind)
                                {
                                    case ReferenceKind.Unit:
                                        argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Unit;
                                        argument.HasReference = true;
                                        break;
                                    case ReferenceKind.Class:
                                        argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Class;
                                        argument.HasReference = true;
                                        break;
                                  default:
                                      result.ErrorList.Add(new($"1-th argument {span} is not Unit, Class, StringVariableReader required by action 'moveTroopFix'.", result.TokenList[argument.TokenId].Range));
                                      argument.HasReference = false;
                                      break;
                                }
                            }
                        }

                        break;
                    case 3:
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorList.Add(new($"0-th argument is empty.Unit, Class, StringVariableReader is required by action 'moveTroopFix'.", result.TokenList[argument.TokenId].Range));
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length == 1)
                            {
                                result.ErrorList.Add(new($"0-th argument is empty string '@'. Unit, Class, StringVariableReader is required by action 'moveTroopFix'.", result.TokenList[argument.TokenId].Range));
                            }
                            else
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                            if (Unsafe.IsNullRef(ref track))
                            {
                                result.ErrorList.Add(new($"0-th argument {span} is not Unit, Class, StringVariableReader required by action 'moveTroopFix'.", result.TokenList[argument.TokenId].Range));
                            }
                            else
                            {
                                switch (track.Kind)
                                {
                                    case ReferenceKind.Unit:
                                        argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Unit;
                                        argument.HasReference = true;
                                        break;
                                    case ReferenceKind.Class:
                                        argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Class;
                                        argument.HasReference = true;
                                        break;
                                  default:
                                      result.ErrorList.Add(new($"0-th argument {span} is not Unit, Class, StringVariableReader required by action 'moveTroopFix'.", result.TokenList[argument.TokenId].Range));
                                      argument.HasReference = false;
                                      break;
                                }
                            }
                        }

                        argument = ref arguments[1];
                        if (!argument.IsNumber)
                        {
                            argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                            argument.ReferenceId = result.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                            argument.HasReference = true;
                        }

                        argument = ref arguments[2];
                        if (!argument.IsNumber)
                        {
                            argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                            argument.ReferenceId = result.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                            argument.HasReference = true;
                        }

                        break;
                    case 4:
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorList.Add(new($"0-th argument is empty.Unit, Class, StringVariableReader is required by action 'moveTroopFix'.", result.TokenList[argument.TokenId].Range));
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length == 1)
                            {
                                result.ErrorList.Add(new($"0-th argument is empty string '@'. Unit, Class, StringVariableReader is required by action 'moveTroopFix'.", result.TokenList[argument.TokenId].Range));
                            }
                            else
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                            if (Unsafe.IsNullRef(ref track))
                            {
                                result.ErrorList.Add(new($"0-th argument {span} is not Unit, Class, StringVariableReader required by action 'moveTroopFix'.", result.TokenList[argument.TokenId].Range));
                            }
                            else
                            {
                                switch (track.Kind)
                                {
                                    case ReferenceKind.Unit:
                                        argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Unit;
                                        argument.HasReference = true;
                                        break;
                                    case ReferenceKind.Class:
                                        argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Class;
                                        argument.HasReference = true;
                                        break;
                                  default:
                                      result.ErrorList.Add(new($"0-th argument {span} is not Unit, Class, StringVariableReader required by action 'moveTroopFix'.", result.TokenList[argument.TokenId].Range));
                                      argument.HasReference = false;
                                      break;
                                }
                            }
                        }

                        argument = ref arguments[1];
                        if (!argument.IsNumber)
                        {
                            argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                            argument.ReferenceId = result.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                            argument.HasReference = true;
                        }

                        argument = ref arguments[2];
                        if (!argument.IsNumber)
                        {
                            argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                            argument.ReferenceId = result.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                            argument.HasReference = true;
                        }

                        argument = ref arguments[3];
                        if (!argument.IsNumber)
                        {
                            argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                            argument.ReferenceId = result.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                            argument.HasReference = true;
                        }

                        break;
                }
                break;
            case ActionKind.smoveTroop:
                switch (arguments.Length)
                {
                    case 2:
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorList.Add(new($"0-th argument is empty.Unit, Class, StringVariableReader is required by action 'smoveTroop'.", result.TokenList[argument.TokenId].Range));
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length == 1)
                            {
                                result.ErrorList.Add(new($"0-th argument is empty string '@'. Unit, Class, StringVariableReader is required by action 'smoveTroop'.", result.TokenList[argument.TokenId].Range));
                            }
                            else
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                            if (Unsafe.IsNullRef(ref track))
                            {
                                result.ErrorList.Add(new($"0-th argument {span} is not Unit, Class, StringVariableReader required by action 'smoveTroop'.", result.TokenList[argument.TokenId].Range));
                            }
                            else
                            {
                                switch (track.Kind)
                                {
                                    case ReferenceKind.Unit:
                                        argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Unit;
                                        argument.HasReference = true;
                                        break;
                                    case ReferenceKind.Class:
                                        argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Class;
                                        argument.HasReference = true;
                                        break;
                                  default:
                                      result.ErrorList.Add(new($"0-th argument {span} is not Unit, Class, StringVariableReader required by action 'smoveTroop'.", result.TokenList[argument.TokenId].Range));
                                      argument.HasReference = false;
                                      break;
                                }
                            }
                        }

                        argument = ref arguments[1];
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorList.Add(new($"1-th argument is empty.Unit, Class, StringVariableReader is required by action 'smoveTroop'.", result.TokenList[argument.TokenId].Range));
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length == 1)
                            {
                                result.ErrorList.Add(new($"1-th argument is empty string '@'. Unit, Class, StringVariableReader is required by action 'smoveTroop'.", result.TokenList[argument.TokenId].Range));
                            }
                            else
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                            if (Unsafe.IsNullRef(ref track))
                            {
                                result.ErrorList.Add(new($"1-th argument {span} is not Unit, Class, StringVariableReader required by action 'smoveTroop'.", result.TokenList[argument.TokenId].Range));
                            }
                            else
                            {
                                switch (track.Kind)
                                {
                                    case ReferenceKind.Unit:
                                        argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Unit;
                                        argument.HasReference = true;
                                        break;
                                    case ReferenceKind.Class:
                                        argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Class;
                                        argument.HasReference = true;
                                        break;
                                  default:
                                      result.ErrorList.Add(new($"1-th argument {span} is not Unit, Class, StringVariableReader required by action 'smoveTroop'.", result.TokenList[argument.TokenId].Range));
                                      argument.HasReference = false;
                                      break;
                                }
                            }
                        }

                        break;
                    case 3:
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorList.Add(new($"0-th argument is empty.Unit, Class, StringVariableReader is required by action 'smoveTroop'.", result.TokenList[argument.TokenId].Range));
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length == 1)
                            {
                                result.ErrorList.Add(new($"0-th argument is empty string '@'. Unit, Class, StringVariableReader is required by action 'smoveTroop'.", result.TokenList[argument.TokenId].Range));
                            }
                            else
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                            if (Unsafe.IsNullRef(ref track))
                            {
                                result.ErrorList.Add(new($"0-th argument {span} is not Unit, Class, StringVariableReader required by action 'smoveTroop'.", result.TokenList[argument.TokenId].Range));
                            }
                            else
                            {
                                switch (track.Kind)
                                {
                                    case ReferenceKind.Unit:
                                        argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Unit;
                                        argument.HasReference = true;
                                        break;
                                    case ReferenceKind.Class:
                                        argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Class;
                                        argument.HasReference = true;
                                        break;
                                  default:
                                      result.ErrorList.Add(new($"0-th argument {span} is not Unit, Class, StringVariableReader required by action 'smoveTroop'.", result.TokenList[argument.TokenId].Range));
                                      argument.HasReference = false;
                                      break;
                                }
                            }
                        }

                        argument = ref arguments[1];
                        if (!argument.IsNumber)
                        {
                            argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                            argument.ReferenceId = result.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                            argument.HasReference = true;
                        }

                        argument = ref arguments[2];
                        if (!argument.IsNumber)
                        {
                            argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                            argument.ReferenceId = result.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                            argument.HasReference = true;
                        }

                        break;
                    case 4:
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorList.Add(new($"0-th argument is empty.Unit, Class, StringVariableReader is required by action 'smoveTroop'.", result.TokenList[argument.TokenId].Range));
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length == 1)
                            {
                                result.ErrorList.Add(new($"0-th argument is empty string '@'. Unit, Class, StringVariableReader is required by action 'smoveTroop'.", result.TokenList[argument.TokenId].Range));
                            }
                            else
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                            if (Unsafe.IsNullRef(ref track))
                            {
                                result.ErrorList.Add(new($"0-th argument {span} is not Unit, Class, StringVariableReader required by action 'smoveTroop'.", result.TokenList[argument.TokenId].Range));
                            }
                            else
                            {
                                switch (track.Kind)
                                {
                                    case ReferenceKind.Unit:
                                        argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Unit;
                                        argument.HasReference = true;
                                        break;
                                    case ReferenceKind.Class:
                                        argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Class;
                                        argument.HasReference = true;
                                        break;
                                  default:
                                      result.ErrorList.Add(new($"0-th argument {span} is not Unit, Class, StringVariableReader required by action 'smoveTroop'.", result.TokenList[argument.TokenId].Range));
                                      argument.HasReference = false;
                                      break;
                                }
                            }
                        }

                        argument = ref arguments[1];
                        if (!argument.IsNumber)
                        {
                            argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                            argument.ReferenceId = result.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                            argument.HasReference = true;
                        }

                        argument = ref arguments[2];
                        if (!argument.IsNumber)
                        {
                            argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                            argument.ReferenceId = result.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                            argument.HasReference = true;
                        }

                        argument = ref arguments[3];
                        if (!argument.IsNumber)
                        {
                            argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                            argument.ReferenceId = result.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                            argument.HasReference = true;
                        }

                        break;
                }
                break;
            case ActionKind.smoveTroopFix:
                switch (arguments.Length)
                {
                    case 2:
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorList.Add(new($"0-th argument is empty.Unit, Class, StringVariableReader is required by action 'smoveTroopFix'.", result.TokenList[argument.TokenId].Range));
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length == 1)
                            {
                                result.ErrorList.Add(new($"0-th argument is empty string '@'. Unit, Class, StringVariableReader is required by action 'smoveTroopFix'.", result.TokenList[argument.TokenId].Range));
                            }
                            else
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                            if (Unsafe.IsNullRef(ref track))
                            {
                                result.ErrorList.Add(new($"0-th argument {span} is not Unit, Class, StringVariableReader required by action 'smoveTroopFix'.", result.TokenList[argument.TokenId].Range));
                            }
                            else
                            {
                                switch (track.Kind)
                                {
                                    case ReferenceKind.Unit:
                                        argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Unit;
                                        argument.HasReference = true;
                                        break;
                                    case ReferenceKind.Class:
                                        argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Class;
                                        argument.HasReference = true;
                                        break;
                                  default:
                                      result.ErrorList.Add(new($"0-th argument {span} is not Unit, Class, StringVariableReader required by action 'smoveTroopFix'.", result.TokenList[argument.TokenId].Range));
                                      argument.HasReference = false;
                                      break;
                                }
                            }
                        }

                        argument = ref arguments[1];
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorList.Add(new($"1-th argument is empty.Unit, Class, StringVariableReader is required by action 'smoveTroopFix'.", result.TokenList[argument.TokenId].Range));
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length == 1)
                            {
                                result.ErrorList.Add(new($"1-th argument is empty string '@'. Unit, Class, StringVariableReader is required by action 'smoveTroopFix'.", result.TokenList[argument.TokenId].Range));
                            }
                            else
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                            if (Unsafe.IsNullRef(ref track))
                            {
                                result.ErrorList.Add(new($"1-th argument {span} is not Unit, Class, StringVariableReader required by action 'smoveTroopFix'.", result.TokenList[argument.TokenId].Range));
                            }
                            else
                            {
                                switch (track.Kind)
                                {
                                    case ReferenceKind.Unit:
                                        argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Unit;
                                        argument.HasReference = true;
                                        break;
                                    case ReferenceKind.Class:
                                        argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Class;
                                        argument.HasReference = true;
                                        break;
                                  default:
                                      result.ErrorList.Add(new($"1-th argument {span} is not Unit, Class, StringVariableReader required by action 'smoveTroopFix'.", result.TokenList[argument.TokenId].Range));
                                      argument.HasReference = false;
                                      break;
                                }
                            }
                        }

                        break;
                    case 3:
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorList.Add(new($"0-th argument is empty.Unit, Class, StringVariableReader is required by action 'smoveTroopFix'.", result.TokenList[argument.TokenId].Range));
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length == 1)
                            {
                                result.ErrorList.Add(new($"0-th argument is empty string '@'. Unit, Class, StringVariableReader is required by action 'smoveTroopFix'.", result.TokenList[argument.TokenId].Range));
                            }
                            else
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                            if (Unsafe.IsNullRef(ref track))
                            {
                                result.ErrorList.Add(new($"0-th argument {span} is not Unit, Class, StringVariableReader required by action 'smoveTroopFix'.", result.TokenList[argument.TokenId].Range));
                            }
                            else
                            {
                                switch (track.Kind)
                                {
                                    case ReferenceKind.Unit:
                                        argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Unit;
                                        argument.HasReference = true;
                                        break;
                                    case ReferenceKind.Class:
                                        argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Class;
                                        argument.HasReference = true;
                                        break;
                                  default:
                                      result.ErrorList.Add(new($"0-th argument {span} is not Unit, Class, StringVariableReader required by action 'smoveTroopFix'.", result.TokenList[argument.TokenId].Range));
                                      argument.HasReference = false;
                                      break;
                                }
                            }
                        }

                        argument = ref arguments[1];
                        if (!argument.IsNumber)
                        {
                            argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                            argument.ReferenceId = result.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                            argument.HasReference = true;
                        }

                        argument = ref arguments[2];
                        if (!argument.IsNumber)
                        {
                            argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                            argument.ReferenceId = result.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                            argument.HasReference = true;
                        }

                        break;
                    case 4:
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorList.Add(new($"0-th argument is empty.Unit, Class, StringVariableReader is required by action 'smoveTroopFix'.", result.TokenList[argument.TokenId].Range));
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length == 1)
                            {
                                result.ErrorList.Add(new($"0-th argument is empty string '@'. Unit, Class, StringVariableReader is required by action 'smoveTroopFix'.", result.TokenList[argument.TokenId].Range));
                            }
                            else
                            {
                                argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                            if (Unsafe.IsNullRef(ref track))
                            {
                                result.ErrorList.Add(new($"0-th argument {span} is not Unit, Class, StringVariableReader required by action 'smoveTroopFix'.", result.TokenList[argument.TokenId].Range));
                            }
                            else
                            {
                                switch (track.Kind)
                                {
                                    case ReferenceKind.Unit:
                                        argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Unit;
                                        argument.HasReference = true;
                                        break;
                                    case ReferenceKind.Class:
                                        argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                        argument.ReferenceKind = ReferenceKind.Class;
                                        argument.HasReference = true;
                                        break;
                                  default:
                                      result.ErrorList.Add(new($"0-th argument {span} is not Unit, Class, StringVariableReader required by action 'smoveTroopFix'.", result.TokenList[argument.TokenId].Range));
                                      argument.HasReference = false;
                                      break;
                                }
                            }
                        }

                        argument = ref arguments[1];
                        if (!argument.IsNumber)
                        {
                            argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                            argument.ReferenceId = result.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                            argument.HasReference = true;
                        }

                        argument = ref arguments[2];
                        if (!argument.IsNumber)
                        {
                            argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                            argument.ReferenceId = result.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                            argument.HasReference = true;
                        }

                        argument = ref arguments[3];
                        if (!argument.IsNumber)
                        {
                            argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                            argument.ReferenceId = result.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                            argument.HasReference = true;
                        }

                        break;
                }
                break;
            case ActionKind.spotmark:
                if (arguments.Length <= 0)
                {
                    break;
                }
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorList.Add(new($"0-th argument is empty.Power, Spot, StringVariableReader is required by action 'spotmark'.", result.TokenList[argument.TokenId].Range));
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorList.Add(new($"0-th argument is empty string '@'. Power, Spot, StringVariableReader is required by action 'spotmark'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (Unsafe.IsNullRef(ref track))
                    {
                        result.ErrorList.Add(new($"0-th argument {span} is not Power, Spot, StringVariableReader required by action 'spotmark'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Power:
                                argument.ReferenceId = result.PowerSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Power;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Spot:
                                argument.ReferenceId = result.SpotSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Spot;
                                argument.HasReference = true;
                                break;
                          default:
                              result.ErrorList.Add(new($"0-th argument {span} is not Power, Spot, StringVariableReader required by action 'spotmark'.", result.TokenList[argument.TokenId].Range));
                              argument.HasReference = false;
                              break;
                        }
                    }
                }

                if (arguments.Length <= 1)
                {
                    break;
                }
                argument = ref arguments[1];
                if (!argument.IsNumber)
                {
                    result.ErrorAdd_NumberIsExpected(argument.TokenId, $" The 1-th argument of action 'spotmark' must be Number.");
                }

                break;
            case ActionKind.shiftTroop:
                span = result.GetSpan(argument.TokenId);
                if (span.IsEmpty)
                {
                    result.ErrorList.Add(new($"0-th argument is empty.Unit, Class, StringVariableReader is required by action 'shiftTroop'.", result.TokenList[argument.TokenId].Range));
                }
                else if (span[0] == '@')
                {
                    if (span.Length == 1)
                    {
                        result.ErrorList.Add(new($"0-th argument is empty string '@'. Unit, Class, StringVariableReader is required by action 'shiftTroop'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        argument.ReferenceId = result.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }
                }
                else
                {
                    ref var track = ref AmbiguousDictionary_UnitClassPowerSpotRace.TryGet(span);
                    if (Unsafe.IsNullRef(ref track))
                    {
                        result.ErrorList.Add(new($"0-th argument {span} is not Unit, Class, StringVariableReader required by action 'shiftTroop'.", result.TokenList[argument.TokenId].Range));
                    }
                    else
                    {
                        switch (track.Kind)
                        {
                            case ReferenceKind.Unit:
                                argument.ReferenceId = result.UnitSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Unit;
                                argument.HasReference = true;
                                break;
                            case ReferenceKind.Class:
                                argument.ReferenceId = result.ClassSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Class;
                                argument.HasReference = true;
                                break;
                          default:
                              result.ErrorList.Add(new($"0-th argument {span} is not Unit, Class, StringVariableReader required by action 'shiftTroop'.", result.TokenList[argument.TokenId].Range));
                              argument.HasReference = false;
                              break;
                        }
                    }
                }

                argument = ref arguments[1];
                if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = result.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                argument = ref arguments[2];
                if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = result.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                if (arguments.Length <= 3)
                {
                    break;
                }
                argument = ref arguments[3];
                if (!argument.IsNumber && (argument.HasReference = NodeValidator.IsBoolean(result.GetSpan(argument.TokenId), out argument.ReferenceId)))
                {
                    argument.ReferenceKind = ReferenceKind.Boolean;
                }
                else
                {
                    result.ErrorList.Add(new($"The 3-th argument of action 'shiftTroop' must be Boolean.", result.TokenList[argument.TokenId].Range));
                }

                break;
        }
    }

    private void AddReferenceAndValidate(ref Result result, ref EventNode node)
    {
        foreach (var statement in node.Statements.AsSpan())
		{
            if (statement is not null)
            {
			    AddReferenceAndValidate(ref result, statement);
            }
		}
    }

    private void AddReferenceAndValidate(ref Result result, ref ScenarioNode node)
    {
        foreach (var statement in node.Statements.AsSpan())
		{
            if (statement is not null)
            {
			    AddReferenceAndValidate(ref result, statement);
            }
		}
    }

    private void AddReferenceAndValidate(ref Result result, ref StoryNode node)
    {
        foreach (var statement in node.Statements.AsSpan())
		{
            if (statement is not null)
            {
			    AddReferenceAndValidate(ref result, statement);
            }
		}
    }

    private void AddReferenceAndValidate(ref Result result, ref VoiceNode node)
    {
    }

    private void AddReferenceAndValidate(ref Result result, ref SpotNode node)
    {
        if (node.merce.Value is { HasValue: true })
        {
            foreach (ref var value in node.merce.Value.Value.AsSpan())
            {
                // Pair_NullableString_NullableInt_ArrayElement
                // ERROR  Spot, merce of Unit, Class
            }
        }
        if (node.merce.ScenarioVariant is { Length: > 0 })
        {
            foreach (var element in node.merce.ScenarioVariant)
            {
                if (element is not { HasValue: true })
                {
                    continue;
                }
                foreach (ref var value in element.Value.AsSpan())
                {
                    // Pair_NullableString_NullableInt_ArrayElement
                    // ERROR  Spot, merce of Unit, Class
                }
            }
        }
        if (node.monster.Value is { HasValue: true })
        {
            foreach (ref var value in node.monster.Value.Value.AsSpan())
            {
                // Pair_NullableString_NullableInt_ArrayElement
                // ERROR  Spot, monster of Unit, Class
            }
        }
        if (node.monster.ScenarioVariant is { Length: > 0 })
        {
            foreach (var element in node.monster.ScenarioVariant)
            {
                if (element is not { HasValue: true })
                {
                    continue;
                }
                foreach (ref var value in element.Value.AsSpan())
                {
                    // Pair_NullableString_NullableInt_ArrayElement
                    // ERROR  Spot, monster of Unit, Class
                }
            }
        }
        if (node.member.Value is { HasValue: true })
        {
            foreach (ref var value in node.member.Value.Value.AsSpan())
            {
                // Pair_NullableString_NullableInt_ArrayElement
                // ERROR  Spot, member of Unit, Class
            }
        }
        if (node.member.ScenarioVariant is { Length: > 0 })
        {
            foreach (var element in node.member.ScenarioVariant)
            {
                if (element is not { HasValue: true })
                {
                    continue;
                }
                foreach (ref var value in element.Value.AsSpan())
                {
                    // Pair_NullableString_NullableInt_ArrayElement
                    // ERROR  Spot, member of Unit, Class
                }
            }
        }
    }

    private void AddReferenceAndValidate(ref Result result, ref UnitNode node)
    {
        if (node.member.Value is { HasValue: true })
        {
            foreach (ref var value in node.member.Value.Value.AsSpan())
            {
                // Pair_NullableString_NullableInt_ArrayElement
                // ERROR  Unit, member of Unit, Class
            }
        }
        if (node.member.ScenarioVariant is { Length: > 0 })
        {
            foreach (var element in node.member.ScenarioVariant)
            {
                if (element is not { HasValue: true })
                {
                    continue;
                }
                foreach (ref var value in element.Value.AsSpan())
                {
                    // Pair_NullableString_NullableInt_ArrayElement
                    // ERROR  Unit, member of Unit, Class
                }
            }
        }
        if (node.friend.Value is { HasValue: true })
        {
            foreach (ref var value in node.friend.Value.Value.AsSpan())
            {
                // StringArrayElement
                // ERROR  Unit, friend of Race, Unit, Class
            }
        }
        if (node.friend.ScenarioVariant is { Length: > 0 })
        {
            foreach (var element in node.friend.ScenarioVariant)
            {
                if (element is not { HasValue: true })
                {
                    continue;
                }
                foreach (ref var value in element.Value.AsSpan())
                {
                    // StringArrayElement
                    // ERROR  Unit, friend of Race, Unit, Class
                }
            }
        }
        if (node.merce.Value is { HasValue: true })
        {
            foreach (ref var value in node.merce.Value.Value.AsSpan())
            {
                // Pair_NullableString_NullableInt_ArrayElement
                // ERROR  Unit, merce of Unit, Class
            }
        }
        if (node.merce.ScenarioVariant is { Length: > 0 })
        {
            foreach (var element in node.merce.ScenarioVariant)
            {
                if (element is not { HasValue: true })
                {
                    continue;
                }
                foreach (ref var value in element.Value.AsSpan())
                {
                    // Pair_NullableString_NullableInt_ArrayElement
                    // ERROR  Unit, merce of Unit, Class
                }
            }
        }
        if (node.skill.Value is { HasValue: true })
        {
            foreach (ref var value in node.skill.Value.Value.AsSpan())
            {
                // Pair_NullableString_NullableInt_ArrayElement
                // ERROR  Unit, skill of Skill, Skillset
            }
        }
        if (node.skill.ScenarioVariant is { Length: > 0 })
        {
            foreach (var element in node.skill.ScenarioVariant)
            {
                if (element is not { HasValue: true })
                {
                    continue;
                }
                foreach (ref var value in element.Value.AsSpan())
                {
                    // Pair_NullableString_NullableInt_ArrayElement
                    // ERROR  Unit, skill of Skill, Skillset
                }
            }
        }
        if (node.skill2.Value is { HasValue: true })
        {
            foreach (ref var value in node.skill2.Value.Value.AsSpan())
            {
                // Pair_NullableString_NullableInt_ArrayElement
                // ERROR  Unit, skill2 of Skill, Skillset
            }
        }
        if (node.skill2.ScenarioVariant is { Length: > 0 })
        {
            foreach (var element in node.skill2.ScenarioVariant)
            {
                if (element is not { HasValue: true })
                {
                    continue;
                }
                foreach (ref var value in element.Value.AsSpan())
                {
                    // Pair_NullableString_NullableInt_ArrayElement
                    // ERROR  Unit, skill2 of Skill, Skillset
                }
            }
        }
        if (node.learn.Value is { HasValue: true })
        {
            foreach (ref var value in node.learn.Value.Value.AsSpan())
            {
                // Pair_NullableString_NullableInt_ArrayElement
                // ERROR  Unit, learn of Skill, Skillset
            }
        }
        if (node.learn.ScenarioVariant is { Length: > 0 })
        {
            foreach (var element in node.learn.ScenarioVariant)
            {
                if (element is not { HasValue: true })
                {
                    continue;
                }
                foreach (ref var value in element.Value.AsSpan())
                {
                    // Pair_NullableString_NullableInt_ArrayElement
                    // ERROR  Unit, learn of Skill, Skillset
                }
            }
        }
        if (node.delskill.Value is { HasValue: true })
        {
            foreach (ref var value in node.delskill.Value.Value.AsSpan())
            {
                // StringArrayElement
                // ERROR  Unit, delskill of Skill, Skillset
            }
        }
        if (node.delskill.ScenarioVariant is { Length: > 0 })
        {
            foreach (var element in node.delskill.ScenarioVariant)
            {
                if (element is not { HasValue: true })
                {
                    continue;
                }
                foreach (ref var value in element.Value.AsSpan())
                {
                    // StringArrayElement
                    // ERROR  Unit, delskill of Skill, Skillset
                }
            }
        }
        if (node.delskill2.Value is { HasValue: true })
        {
            foreach (ref var value in node.delskill2.Value.Value.AsSpan())
            {
                // StringArrayElement
                // ERROR  Unit, delskill2 of Skill, Skillset
            }
        }
        if (node.delskill2.ScenarioVariant is { Length: > 0 })
        {
            foreach (var element in node.delskill2.ScenarioVariant)
            {
                if (element is not { HasValue: true })
                {
                    continue;
                }
                foreach (ref var value in element.Value.AsSpan())
                {
                    // StringArrayElement
                    // ERROR  Unit, delskill2 of Skill, Skillset
                }
            }
        }
        if (node.leader_skill.Value is { HasValue: true })
        {
            foreach (ref var value in node.leader_skill.Value.Value.AsSpan())
            {
                // Pair_NullableString_NullableInt_ArrayElement
                // ERROR  Unit, leader_skill of Skill, Skillset
            }
        }
        if (node.leader_skill.ScenarioVariant is { Length: > 0 })
        {
            foreach (var element in node.leader_skill.ScenarioVariant)
            {
                if (element is not { HasValue: true })
                {
                    continue;
                }
                foreach (ref var value in element.Value.AsSpan())
                {
                    // Pair_NullableString_NullableInt_ArrayElement
                    // ERROR  Unit, leader_skill of Skill, Skillset
                }
            }
        }
        if (node.assist_skill.Value is { HasValue: true })
        {
            foreach (ref var value in node.assist_skill.Value.Value.AsSpan())
            {
                // Pair_NullableString_NullableInt_ArrayElement
                // ERROR  Unit, assist_skill of Skill, Skillset
            }
        }
        if (node.assist_skill.ScenarioVariant is { Length: > 0 })
        {
            foreach (var element in node.assist_skill.ScenarioVariant)
            {
                if (element is not { HasValue: true })
                {
                    continue;
                }
                foreach (ref var value in element.Value.AsSpan())
                {
                    // Pair_NullableString_NullableInt_ArrayElement
                    // ERROR  Unit, assist_skill of Skill, Skillset
                }
            }
        }
        if (node.staff.Value is { HasValue: true })
        {
            foreach (ref var value in node.staff.Value.Value.AsSpan())
            {
                // StringArrayElement
                // ERROR  Unit, staff of Race, Class
            }
        }
        if (node.staff.ScenarioVariant is { Length: > 0 })
        {
            foreach (var element in node.staff.ScenarioVariant)
            {
                if (element is not { HasValue: true })
                {
                    continue;
                }
                foreach (ref var value in element.Value.AsSpan())
                {
                    // StringArrayElement
                    // ERROR  Unit, staff of Race, Class
                }
            }
        }
        if (node.castle_guard.Value is { HasValue: true })
        {
            foreach (ref var value in node.castle_guard.Value.Value.AsSpan())
            {
                // Pair_NullableString_NullableInt_ArrayElement
                // ERROR  Unit, castle_guard of Unit, Class
            }
        }
        if (node.castle_guard.ScenarioVariant is { Length: > 0 })
        {
            foreach (var element in node.castle_guard.ScenarioVariant)
            {
                if (element is not { HasValue: true })
                {
                    continue;
                }
                foreach (ref var value in element.Value.AsSpan())
                {
                    // Pair_NullableString_NullableInt_ArrayElement
                    // ERROR  Unit, castle_guard of Unit, Class
                }
            }
        }
    }

    private void AddReferenceAndValidate(ref Result result, ref RaceNode node)
    {
    }

    private void AddReferenceAndValidate(ref Result result, ref ClassNode node)
    {
        if (node.member.Value is { HasValue: true })
        {
            foreach (ref var value in node.member.Value.Value.AsSpan())
            {
                // Pair_NullableString_NullableInt_ArrayElement
                // ERROR  Class, member of Unit, Class
            }
        }
        if (node.member.ScenarioVariant is { Length: > 0 })
        {
            foreach (var element in node.member.ScenarioVariant)
            {
                if (element is not { HasValue: true })
                {
                    continue;
                }
                foreach (ref var value in element.Value.AsSpan())
                {
                    // Pair_NullableString_NullableInt_ArrayElement
                    // ERROR  Class, member of Unit, Class
                }
            }
        }
        if (node.friend.Value is { HasValue: true })
        {
            foreach (ref var value in node.friend.Value.Value.AsSpan())
            {
                // StringArrayElement
                // ERROR  Class, friend of Race, Unit, Class
            }
        }
        if (node.friend.ScenarioVariant is { Length: > 0 })
        {
            foreach (var element in node.friend.ScenarioVariant)
            {
                if (element is not { HasValue: true })
                {
                    continue;
                }
                foreach (ref var value in element.Value.AsSpan())
                {
                    // StringArrayElement
                    // ERROR  Class, friend of Race, Unit, Class
                }
            }
        }
        if (node.merce.Value is { HasValue: true })
        {
            foreach (ref var value in node.merce.Value.Value.AsSpan())
            {
                // Pair_NullableString_NullableInt_ArrayElement
                // ERROR  Class, merce of Unit, Class
            }
        }
        if (node.merce.ScenarioVariant is { Length: > 0 })
        {
            foreach (var element in node.merce.ScenarioVariant)
            {
                if (element is not { HasValue: true })
                {
                    continue;
                }
                foreach (ref var value in element.Value.AsSpan())
                {
                    // Pair_NullableString_NullableInt_ArrayElement
                    // ERROR  Class, merce of Unit, Class
                }
            }
        }
        if (node.skill.Value is { HasValue: true })
        {
            foreach (ref var value in node.skill.Value.Value.AsSpan())
            {
                // Pair_NullableString_NullableInt_ArrayElement
                // ERROR  Class, skill of Skill, Skillset
            }
        }
        if (node.skill.ScenarioVariant is { Length: > 0 })
        {
            foreach (var element in node.skill.ScenarioVariant)
            {
                if (element is not { HasValue: true })
                {
                    continue;
                }
                foreach (ref var value in element.Value.AsSpan())
                {
                    // Pair_NullableString_NullableInt_ArrayElement
                    // ERROR  Class, skill of Skill, Skillset
                }
            }
        }
        if (node.skill2.Value is { HasValue: true })
        {
            foreach (ref var value in node.skill2.Value.Value.AsSpan())
            {
                // Pair_NullableString_NullableInt_ArrayElement
                // ERROR  Class, skill2 of Skill, Skillset
            }
        }
        if (node.skill2.ScenarioVariant is { Length: > 0 })
        {
            foreach (var element in node.skill2.ScenarioVariant)
            {
                if (element is not { HasValue: true })
                {
                    continue;
                }
                foreach (ref var value in element.Value.AsSpan())
                {
                    // Pair_NullableString_NullableInt_ArrayElement
                    // ERROR  Class, skill2 of Skill, Skillset
                }
            }
        }
        if (node.learn.Value is { HasValue: true })
        {
            foreach (ref var value in node.learn.Value.Value.AsSpan())
            {
                // Pair_NullableString_NullableInt_ArrayElement
                // ERROR  Class, learn of Skill, Skillset
            }
        }
        if (node.learn.ScenarioVariant is { Length: > 0 })
        {
            foreach (var element in node.learn.ScenarioVariant)
            {
                if (element is not { HasValue: true })
                {
                    continue;
                }
                foreach (ref var value in element.Value.AsSpan())
                {
                    // Pair_NullableString_NullableInt_ArrayElement
                    // ERROR  Class, learn of Skill, Skillset
                }
            }
        }
        if (node.delskill.Value is { HasValue: true })
        {
            foreach (ref var value in node.delskill.Value.Value.AsSpan())
            {
                // StringArrayElement
                // ERROR  Class, delskill of Skill, Skillset
            }
        }
        if (node.delskill.ScenarioVariant is { Length: > 0 })
        {
            foreach (var element in node.delskill.ScenarioVariant)
            {
                if (element is not { HasValue: true })
                {
                    continue;
                }
                foreach (ref var value in element.Value.AsSpan())
                {
                    // StringArrayElement
                    // ERROR  Class, delskill of Skill, Skillset
                }
            }
        }
        if (node.delskill2.Value is { HasValue: true })
        {
            foreach (ref var value in node.delskill2.Value.Value.AsSpan())
            {
                // StringArrayElement
                // ERROR  Class, delskill2 of Skill, Skillset
            }
        }
        if (node.delskill2.ScenarioVariant is { Length: > 0 })
        {
            foreach (var element in node.delskill2.ScenarioVariant)
            {
                if (element is not { HasValue: true })
                {
                    continue;
                }
                foreach (ref var value in element.Value.AsSpan())
                {
                    // StringArrayElement
                    // ERROR  Class, delskill2 of Skill, Skillset
                }
            }
        }
        if (node.friend_ex.Value is { HasValue: true })
        {
            foreach (ref var value in node.friend_ex.Value.Value.AsSpan())
            {
                // Pair_NullableString_NullableInt_ArrayElement
                // ERROR  Class, friend_ex of Race, Unit, Class
            }
        }
        if (node.friend_ex.ScenarioVariant is { Length: > 0 })
        {
            foreach (var element in node.friend_ex.ScenarioVariant)
            {
                if (element is not { HasValue: true })
                {
                    continue;
                }
                foreach (ref var value in element.Value.AsSpan())
                {
                    // Pair_NullableString_NullableInt_ArrayElement
                    // ERROR  Class, friend_ex of Race, Unit, Class
                }
            }
        }
    }

    private void AddReferenceAndValidate(ref Result result, ref FieldNode node)
    {
    }

    private void AddReferenceAndValidate(ref Result result, ref SkillNode node)
    {
    }

    private void AddReferenceAndValidate(ref Result result, ref PowerNode node)
    {
        if (node.staff.Value is { HasValue: true })
        {
            foreach (ref var value in node.staff.Value.Value.AsSpan())
            {
                // StringArrayElement
                // ERROR  Power, staff of Unit, ClassTypeReader
            }
        }
        if (node.staff.ScenarioVariant is { Length: > 0 })
        {
            foreach (var element in node.staff.ScenarioVariant)
            {
                if (element is not { HasValue: true })
                {
                    continue;
                }
                foreach (ref var value in element.Value.AsSpan())
                {
                    // StringArrayElement
                    // ERROR  Power, staff of Unit, ClassTypeReader
                }
            }
        }
        if (node.merce.Value is { HasValue: true })
        {
            foreach (ref var value in node.merce.Value.Value.AsSpan())
            {
                // Pair_NullableString_NullableInt_ArrayElement
                // ERROR  Power, merce of Unit, ClassTypeReader
            }
        }
        if (node.merce.ScenarioVariant is { Length: > 0 })
        {
            foreach (var element in node.merce.ScenarioVariant)
            {
                if (element is not { HasValue: true })
                {
                    continue;
                }
                foreach (ref var value in element.Value.AsSpan())
                {
                    // Pair_NullableString_NullableInt_ArrayElement
                    // ERROR  Power, merce of Unit, ClassTypeReader
                }
            }
        }
    }

    private void AddReferenceAndValidate(ref Result result, ref ObjectNode node)
    {
    }

    private void AddReferenceAndValidate(ref Result result, ref DungeonNode node)
    {
    }

    private void AddReferenceAndValidate(ref Result result, ref MovetypeNode node)
    {
    }

    private void AddReferenceAndValidate(ref Result result, ref SkillsetNode node)
    {
    }
}
