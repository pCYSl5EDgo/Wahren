// <auto-generated>
// THIS (.cs) FILE IS GENERATED BY T4. DO NOT CHANGE IT. CHANGE THE .tt FILE INSTEAD.
// </auto-generated>
#nullable enable

namespace Wahren.AbstractSyntaxTree.Parser;

using Statement;
using Statement.Expression;

public static partial class PerResultValidator
{
    public static void AddReferenceAndValidateCallAction(ref Context context, ref Result result, AnalysisResult analysisResult, CallActionStatement call)
    {
        var arguments = call.Arguments.AsSpan();
        if (arguments.IsEmpty)
        {
            return;
        }

        ref var argument = ref arguments[0];
        ReadOnlySpan<char> span;
        switch (call.Kind)
        {
            case ActionKind.vc:
                if (context.CreateError(DiagnosticSeverity.Warning))
                {
                    result.WarningAdd($"Unknown action 'vc'.", call.TokenId);
                }
                break;
            case ActionKind.play:
                if (context.CreateError(DiagnosticSeverity.Warning))
                {
                    result.WarningAdd($"Unknown action 'play'.", call.TokenId);
                }
                break;
            case ActionKind.ppl1:
                if (context.CreateError(DiagnosticSeverity.Warning))
                {
                    result.WarningAdd($"Unknown action 'ppl1'.", call.TokenId);
                }
                break;
            case ActionKind.citom:
                if (context.CreateError(DiagnosticSeverity.Warning))
                {
                    result.WarningAdd($"Unknown action 'citom'.", call.TokenId);
                }
                break;
            case ActionKind.setbcg:
                if (context.CreateError(DiagnosticSeverity.Warning))
                {
                    result.WarningAdd($"Unknown action 'setbcg'.", call.TokenId);
                }
                break;
            case ActionKind.showCamp:
                if (context.CreateError(DiagnosticSeverity.Warning))
                {
                    result.WarningAdd($"Unknown action 'showCamp'.", call.TokenId);
                }
                break;
            case ActionKind.clickWait:
                if (context.CreateError(DiagnosticSeverity.Warning))
                {
                    result.WarningAdd($"Unknown action 'clickWait'.", call.TokenId);
                }
                break;
            case ActionKind.worldskin:
                if (context.CreateError(DiagnosticSeverity.Warning))
                {
                    result.WarningAdd($"Unknown action 'worldskin'.", call.TokenId);
                }
                break;
            case ActionKind.darkness_off:
                if (context.CreateError(DiagnosticSeverity.Warning))
                {
                    result.WarningAdd($"Unknown action 'darkness_off'.", call.TokenId);
                }
                break;
            case ActionKind.doGameEnding:
                if (context.CreateError(DiagnosticSeverity.Warning))
                {
                    result.WarningAdd($"Unknown action 'doGameEnding'.", call.TokenId);
                }
                break;
            case ActionKind.storeDeath:
                if (context.CreateError(DiagnosticSeverity.Warning))
                {
                    result.WarningAdd($"Unknown action 'storeDeath'.", call.TokenId);
                }
                break;
            case ActionKind.pushDeath:
                span = result.GetSpan(argument.TokenId);
                if (span.Length > 1 && span[0] == '@')
                {
                    argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                    argument.ReferenceKind = ReferenceKind.StringVariableReader;
                    argument.HasReference = true;
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("pushDeath", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("pushDeath", 2, "Power", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.PowerSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Power;
                        argument.HasReference = true;
                    }
                }

                argument = ref arguments[2];
                span = result.GetSpan(argument.TokenId);
                if (span.Length > 1 && span[0] == '@')
                {
                    argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                    argument.ReferenceKind = ReferenceKind.StringVariableReader;
                    argument.HasReference = true;
                }

                argument = ref arguments[3];
                span = result.GetSpan(argument.TokenId);
                if (span.Length > 1 && span[0] == '@')
                {
                    argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                    argument.ReferenceKind = ReferenceKind.StringVariableReader;
                    argument.HasReference = true;
                }

                argument = ref arguments[4];
                span = result.GetSpan(argument.TokenId);
                if (span.Length > 1 && span[0] == '@')
                {
                    argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                    argument.ReferenceKind = ReferenceKind.StringVariableReader;
                    argument.HasReference = true;
                }

                argument = ref arguments[5];
                if (argument.TrailingTokenCount == 0)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableWriter;
                    argument.ReferenceId = analysisResult.NumberVariableWriterSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }
                else
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("pushDeath", argument.TokenId, argument.TrailingTokenCount);
                }

                break;
            case ActionKind.setPowerHome:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("setPowerHome", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("setPowerHome", 1, "Power", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.PowerSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Power;
                        argument.HasReference = true;
                    }
                }

                if (arguments.Length <= 1)
                {
                    break;
                }
                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("setPowerHome", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("setPowerHome", 2, "Spot", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.SpotSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Spot;
                        argument.HasReference = true;
                    }
                }

                break;
            case ActionKind.hideImage:
                argument.ReferenceKind = ReferenceKind.image_file;
                argument.ReferenceId = analysisResult.image_fileSet.GetOrAdd(result.GetSpan(argument.TokenId, argument.TrailingTokenCount), argument.TokenId);
                argument.HasReference = true;

                if (arguments.Length <= 1)
                {
                    break;
                }
                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("hideImage", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                break;
            case ActionKind.hideFace:
                argument.ReferenceKind = ReferenceKind.face;
                argument.ReferenceId = analysisResult.faceSet.GetOrAdd(result.GetSpan(argument.TokenId, argument.TrailingTokenCount), argument.TokenId);
                argument.HasReference = true;

                if (arguments.Length <= 1)
                {
                    break;
                }
                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("hideFace", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                break;
            case ActionKind.hidePicture:
                argument.ReferenceKind = ReferenceKind.picture;
                argument.ReferenceId = analysisResult.pictureSet.GetOrAdd(result.GetSpan(argument.TokenId, argument.TrailingTokenCount), argument.TokenId);
                argument.HasReference = true;

                if (arguments.Length <= 1)
                {
                    break;
                }
                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("hidePicture", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                break;
            case ActionKind.bg:
                argument.ReferenceKind = ReferenceKind.image_file;
                argument.ReferenceId = analysisResult.image_fileSet.GetOrAdd(result.GetSpan(argument.TokenId, argument.TrailingTokenCount), argument.TokenId);
                argument.HasReference = true;

                if (arguments.Length <= 1)
                {
                    break;
                }
                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("bg", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber && (argument.HasReference = PerResultValidator.IsBoolean(result.GetSpan(argument.TokenId), out argument.ReferenceId)))
                {
                    argument.ReferenceKind = ReferenceKind.Boolean;
                }
                else
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("bg", 2, "Boolean", argument.TokenId);
                }

                break;
            case ActionKind.addSpot:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("addSpot", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("addSpot", 1, "Spot", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.SpotSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Spot;
                        argument.HasReference = true;
                    }
                }

                if (arguments.Length <= 1)
                {
                    break;
                }
                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("addSpot", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("addSpot", 2, "Power", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.PowerSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Power;
                        argument.HasReference = true;
                    }
                }

                break;
            case ActionKind.resetTruce:
                switch (arguments.Length)
                {
                    case 1:
                        if (argument.TrailingTokenCount != 0)
                        {
                            result.ErrorAdd_InvalidMultipleTokenArgument("resetTruce", argument.TokenId, argument.TrailingTokenCount);
                        }
                        else
                        {
                            span = result.GetSpan(argument.TokenId);
                            if (span.IsEmpty)
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("resetTruce", 1, "StringVariableReader", argument.TokenId);
                            }
                            else if (span[0] == '@')
                            {
                                if (span.Length != 1)
                                {
                                    argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                    argument.HasReference = true;
                                }
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            }
                            else
                            {
                                if (context.CreateError(DiagnosticSeverity.Warning))
                                {
                                    result.ErrorAdd_UnexpectedArgumentReferenceKind("resetTruce", 1, "StringVariableReader", argument.TokenId);
                                }
                                argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span, argument.TokenId);
                                argument.HasReference = true;
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            }
                        }
                        break;
                    case 2:
                        if (argument.TrailingTokenCount != 0)
                        {
                            result.ErrorAdd_InvalidMultipleTokenArgument("resetTruce", argument.TokenId, argument.TrailingTokenCount);
                        }
                        else
                        {
                            span = result.GetSpan(argument.TokenId);
                            if (span.IsEmpty)
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("resetTruce", 1, "Power", argument.TokenId);
                            }
                            else if (span[0] == '@')
                            {
                                if (span.Length != 1)
                                {
                                    argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                    argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                    argument.HasReference = true;
                                }
                            }
                            else
                            {
                                argument.ReferenceId = analysisResult.PowerSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Power;
                                argument.HasReference = true;
                            }
                        }
                        argument = ref arguments[1];
                        if (argument.TrailingTokenCount != 0)
                        {
                            result.ErrorAdd_InvalidMultipleTokenArgument("resetTruce", argument.TokenId, argument.TrailingTokenCount);
                        }
                        else
                        {
                            span = result.GetSpan(argument.TokenId);
                            if (span.IsEmpty)
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("resetTruce", 2, "Power", argument.TokenId);
                            }
                            else if (span[0] == '@')
                            {
                                if (span.Length != 1)
                                {
                                    argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                    argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                    argument.HasReference = true;
                                }
                            }
                            else
                            {
                                argument.ReferenceId = analysisResult.PowerSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Power;
                                argument.HasReference = true;
                            }
                        }
                        break;
                }
                break;
            case ActionKind.resetLeague:
                switch (arguments.Length)
                {
                    case 1:
                        if (argument.TrailingTokenCount != 0)
                        {
                            result.ErrorAdd_InvalidMultipleTokenArgument("resetLeague", argument.TokenId, argument.TrailingTokenCount);
                        }
                        else
                        {
                            span = result.GetSpan(argument.TokenId);
                            if (span.IsEmpty)
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("resetLeague", 1, "StringVariableReader", argument.TokenId);
                            }
                            else if (span[0] == '@')
                            {
                                if (span.Length != 1)
                                {
                                    argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                    argument.HasReference = true;
                                }
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            }
                            else
                            {
                                if (context.CreateError(DiagnosticSeverity.Warning))
                                {
                                    result.ErrorAdd_UnexpectedArgumentReferenceKind("resetLeague", 1, "StringVariableReader", argument.TokenId);
                                }
                                argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span, argument.TokenId);
                                argument.HasReference = true;
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            }
                        }
                        break;
                    case 2:
                        if (argument.TrailingTokenCount != 0)
                        {
                            result.ErrorAdd_InvalidMultipleTokenArgument("resetLeague", argument.TokenId, argument.TrailingTokenCount);
                        }
                        else
                        {
                            span = result.GetSpan(argument.TokenId);
                            if (span.IsEmpty)
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("resetLeague", 1, "Power", argument.TokenId);
                            }
                            else if (span[0] == '@')
                            {
                                if (span.Length != 1)
                                {
                                    argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                    argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                    argument.HasReference = true;
                                }
                            }
                            else
                            {
                                argument.ReferenceId = analysisResult.PowerSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Power;
                                argument.HasReference = true;
                            }
                        }
                        argument = ref arguments[1];
                        if (argument.TrailingTokenCount != 0)
                        {
                            result.ErrorAdd_InvalidMultipleTokenArgument("resetLeague", argument.TokenId, argument.TrailingTokenCount);
                        }
                        else
                        {
                            span = result.GetSpan(argument.TokenId);
                            if (span.IsEmpty)
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("resetLeague", 2, "Power", argument.TokenId);
                            }
                            else if (span[0] == '@')
                            {
                                if (span.Length != 1)
                                {
                                    argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                    argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                    argument.HasReference = true;
                                }
                            }
                            else
                            {
                                argument.ReferenceId = analysisResult.PowerSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Power;
                                argument.HasReference = true;
                            }
                        }
                        break;
                }
                break;
            case ActionKind.resetEnemyPower:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("resetEnemyPower", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("resetEnemyPower", 1, "Power", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.PowerSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Power;
                        argument.HasReference = true;
                    }
                }

                if (arguments.Length <= 1)
                {
                    break;
                }
                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("resetEnemyPower", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("resetEnemyPower", 2, "Power", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.PowerSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Power;
                        argument.HasReference = true;
                    }
                }

                break;
            case ActionKind.@event:
                if (argument.TrailingTokenCount == 0)
                {
                    argument.ReferenceKind = ReferenceKind.Event;
                    argument.ReferenceId = analysisResult.EventSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }
                else
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("event", argument.TokenId, argument.TrailingTokenCount);
                }

                if (arguments.Length <= 1)
                {
                    break;
                }
                argument = ref arguments[1];
                if (argument.TrailingTokenCount == 0)
                {
                    argument.ReferenceKind = ReferenceKind.Power;
                    argument.ReferenceId = analysisResult.PowerSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }
                else
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("event", argument.TokenId, argument.TrailingTokenCount);
                }

                if (arguments.Length <= 2)
                {
                    break;
                }
                argument = ref arguments[2];
                if (argument.TrailingTokenCount == 0)
                {
                    argument.ReferenceKind = ReferenceKind.Power;
                    argument.ReferenceId = analysisResult.PowerSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }
                else
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("event", argument.TokenId, argument.TrailingTokenCount);
                }

                break;
            case ActionKind.add:
                if (argument.TrailingTokenCount == 0)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableWriter;
                    argument.ReferenceId = analysisResult.NumberVariableWriterSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }
                else
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("add", argument.TokenId, argument.TrailingTokenCount);
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("add", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                break;
            case ActionKind.div:
                if (argument.TrailingTokenCount == 0)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableWriter;
                    argument.ReferenceId = analysisResult.NumberVariableWriterSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }
                else
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("div", argument.TokenId, argument.TrailingTokenCount);
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("div", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                break;
            case ActionKind.mod:
                if (argument.TrailingTokenCount == 0)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableWriter;
                    argument.ReferenceId = analysisResult.NumberVariableWriterSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }
                else
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("mod", argument.TokenId, argument.TrailingTokenCount);
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("mod", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                break;
            case ActionKind.mul:
                if (argument.TrailingTokenCount == 0)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableWriter;
                    argument.ReferenceId = analysisResult.NumberVariableWriterSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }
                else
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("mul", argument.TokenId, argument.TrailingTokenCount);
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("mul", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                break;
            case ActionKind.per:
                if (argument.TrailingTokenCount == 0)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableWriter;
                    argument.ReferenceId = analysisResult.NumberVariableWriterSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }
                else
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("per", argument.TokenId, argument.TrailingTokenCount);
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("per", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                break;
            case ActionKind.set:
                if (argument.TrailingTokenCount == 0)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableWriter;
                    argument.ReferenceId = analysisResult.NumberVariableWriterSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }
                else
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("set", argument.TokenId, argument.TrailingTokenCount);
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("set", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                break;
            case ActionKind.sub:
                if (argument.TrailingTokenCount == 0)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableWriter;
                    argument.ReferenceId = analysisResult.NumberVariableWriterSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }
                else
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("sub", argument.TokenId, argument.TrailingTokenCount);
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("sub", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                break;
            case ActionKind.addv:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("addv", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("addv", 1, "StringVariableWriter", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length == 1)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("addv", 1, "StringVariableWriter", argument.TokenId);
                        }
                        else
                        {
                            argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.HasReference = true;
                        }
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                    else
                    {
                        if (context.CreateError(DiagnosticSeverity.Warning))
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("addv", 1, "StringVariableWriter", argument.TokenId);
                        }
                        argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span, argument.TokenId);
                        argument.HasReference = true;
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                }

                argument = ref arguments[1];
                span = result.GetSpan(argument.TokenId);
                if (span.Length > 1 && span[0] == '@')
                {
                    argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                    argument.ReferenceKind = ReferenceKind.StringVariableReader;
                    argument.HasReference = true;
                }

                break;
            case ActionKind.setv:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("setv", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("setv", 1, "StringVariableWriter", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length == 1)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("setv", 1, "StringVariableWriter", argument.TokenId);
                        }
                        else
                        {
                            argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.HasReference = true;
                        }
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                    else
                    {
                        if (context.CreateError(DiagnosticSeverity.Warning))
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("setv", 1, "StringVariableWriter", argument.TokenId);
                        }
                        argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span, argument.TokenId);
                        argument.HasReference = true;
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                }

                argument = ref arguments[1];
                span = result.GetSpan(argument.TokenId);
                if (span.Length > 1 && span[0] == '@')
                {
                    argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                    argument.ReferenceKind = ReferenceKind.StringVariableReader;
                    argument.HasReference = true;
                }

                break;
            case ActionKind.subv:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("subv", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("subv", 1, "StringVariableWriter", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length == 1)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("subv", 1, "StringVariableWriter", argument.TokenId);
                        }
                        else
                        {
                            argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.HasReference = true;
                        }
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                    else
                    {
                        if (context.CreateError(DiagnosticSeverity.Warning))
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("subv", 1, "StringVariableWriter", argument.TokenId);
                        }
                        argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span, argument.TokenId);
                        argument.HasReference = true;
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                }

                argument = ref arguments[1];
                span = result.GetSpan(argument.TokenId);
                if (span.Length > 1 && span[0] == '@')
                {
                    argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                    argument.ReferenceKind = ReferenceKind.StringVariableReader;
                    argument.HasReference = true;
                }

                break;
            case ActionKind.setud:
                if (argument.TrailingTokenCount == 0)
                {
                    argument.ReferenceKind = ReferenceKind.GlobalStringVariableWriter;
                    argument.ReferenceId = analysisResult.GlobalStringVariableWriterSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }
                else
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("setud", argument.TokenId, argument.TrailingTokenCount);
                }

                argument = ref arguments[1];
                span = result.GetSpan(argument.TokenId);
                if (span.Length > 1 && span[0] == '@')
                {
                    argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                    argument.ReferenceKind = ReferenceKind.StringVariableReader;
                    argument.HasReference = true;
                }

                break;
            case ActionKind.storeud:
                if (argument.TrailingTokenCount == 0)
                {
                    argument.ReferenceKind = ReferenceKind.GlobalStringVariableReader;
                    argument.ReferenceId = analysisResult.GlobalStringVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }
                else
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("storeud", argument.TokenId, argument.TrailingTokenCount);
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("storeud", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("storeud", 2, "StringVariableWriter", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length == 1)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("storeud", 2, "StringVariableWriter", argument.TokenId);
                        }
                        else
                        {
                            argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.HasReference = true;
                        }
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                    else
                    {
                        if (context.CreateError(DiagnosticSeverity.Warning))
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("storeud", 2, "StringVariableWriter", argument.TokenId);
                        }
                        argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span, argument.TokenId);
                        argument.HasReference = true;
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                }

                break;
            case ActionKind.title:
                
                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("title", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                break;
            case ActionKind.addstr:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("addstr", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("addstr", 1, "StringVariableWriter", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length == 1)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("addstr", 1, "StringVariableWriter", argument.TokenId);
                        }
                        else
                        {
                            argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.HasReference = true;
                        }
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                    else
                    {
                        if (context.CreateError(DiagnosticSeverity.Warning))
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("addstr", 1, "StringVariableWriter", argument.TokenId);
                        }
                        argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span, argument.TokenId);
                        argument.HasReference = true;
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                }

                
                break;
            case ActionKind.addVar:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("addVar", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("addVar", 1, "StringVariableWriter", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length == 1)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("addVar", 1, "StringVariableWriter", argument.TokenId);
                        }
                        else
                        {
                            argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.HasReference = true;
                        }
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                    else
                    {
                        if (context.CreateError(DiagnosticSeverity.Warning))
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("addVar", 1, "StringVariableWriter", argument.TokenId);
                        }
                        argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span, argument.TokenId);
                        argument.HasReference = true;
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                }

                argument = ref arguments[1];
                span = result.GetSpan(argument.TokenId);
                if (span.Length > 1 && span[0] == '@')
                {
                    argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                    argument.ReferenceKind = ReferenceKind.StringVariableReader;
                    argument.HasReference = true;
                }

                break;
            case ActionKind.setVar:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("setVar", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("setVar", 1, "StringVariableWriter", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length == 1)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("setVar", 1, "StringVariableWriter", argument.TokenId);
                        }
                        else
                        {
                            argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.HasReference = true;
                        }
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                    else
                    {
                        if (context.CreateError(DiagnosticSeverity.Warning))
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("setVar", 1, "StringVariableWriter", argument.TokenId);
                        }
                        argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span, argument.TokenId);
                        argument.HasReference = true;
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                }

                argument = ref arguments[1];
                span = result.GetSpan(argument.TokenId);
                if (span.Length > 1 && span[0] == '@')
                {
                    argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                    argument.ReferenceKind = ReferenceKind.StringVariableReader;
                    argument.HasReference = true;
                }

                break;
            case ActionKind.subVar:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("subVar", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("subVar", 1, "StringVariableWriter", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length == 1)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("subVar", 1, "StringVariableWriter", argument.TokenId);
                        }
                        else
                        {
                            argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.HasReference = true;
                        }
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                    else
                    {
                        if (context.CreateError(DiagnosticSeverity.Warning))
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("subVar", 1, "StringVariableWriter", argument.TokenId);
                        }
                        argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span, argument.TokenId);
                        argument.HasReference = true;
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                }

                argument = ref arguments[1];
                span = result.GetSpan(argument.TokenId);
                if (span.Length > 1 && span[0] == '@')
                {
                    argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                    argument.ReferenceKind = ReferenceKind.StringVariableReader;
                    argument.HasReference = true;
                }

                break;
            case ActionKind.title2:
                
                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("title2", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                break;
            case ActionKind.addCapa:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("addCapa", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("addCapa", 1, "Spot", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.SpotSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Spot;
                        argument.HasReference = true;
                    }
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("addCapa", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                break;
            case ActionKind.addGain:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("addGain", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("addGain", 1, "Spot", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.SpotSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Spot;
                        argument.HasReference = true;
                    }
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("addGain", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                break;
            case ActionKind.pushSex:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("pushSex", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("pushSex", 1, "Unit", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.UnitSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Unit;
                        argument.HasReference = true;
                    }
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount == 0)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableWriter;
                    argument.ReferenceId = analysisResult.NumberVariableWriterSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }
                else
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("pushSex", argument.TokenId, argument.TrailingTokenCount);
                }

                break;
            case ActionKind.pushVar:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("pushVar", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("pushVar", 1, "StringVariableReader", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.HasReference = true;
                        }
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                    }
                    else
                    {
                        if (context.CreateError(DiagnosticSeverity.Warning))
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("pushVar", 1, "StringVariableReader", argument.TokenId);
                        }
                        argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span, argument.TokenId);
                        argument.HasReference = true;
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                    }
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount == 0)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableWriter;
                    argument.ReferenceId = analysisResult.NumberVariableWriterSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }
                else
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("pushVar", argument.TokenId, argument.TrailingTokenCount);
                }

                break;
            case ActionKind.setCapa:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("setCapa", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("setCapa", 1, "Spot", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.SpotSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Spot;
                        argument.HasReference = true;
                    }
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("setCapa", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                break;
            case ActionKind.setDone:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("setDone", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("setDone", 1, "Unit", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.UnitSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Unit;
                        argument.HasReference = true;
                    }
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("setDone", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber && (argument.HasReference = PerResultValidator.IsBoolean(result.GetSpan(argument.TokenId), out argument.ReferenceId)))
                {
                    argument.ReferenceKind = ReferenceKind.Boolean;
                }
                else
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("setDone", 2, "Boolean", argument.TokenId);
                }

                break;
            case ActionKind.setGain:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("setGain", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("setGain", 1, "Spot", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.SpotSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Spot;
                        argument.HasReference = true;
                    }
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("setGain", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                break;
            case ActionKind.storePM:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("storePM", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("storePM", 1, "Unit", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.UnitSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Unit;
                        argument.HasReference = true;
                    }
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("storePM", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("storePM", 2, "StringVariableWriter", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length == 1)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("storePM", 2, "StringVariableWriter", argument.TokenId);
                        }
                        else
                        {
                            argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.HasReference = true;
                        }
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                    else
                    {
                        if (context.CreateError(DiagnosticSeverity.Warning))
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("storePM", 2, "StringVariableWriter", argument.TokenId);
                        }
                        argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span, argument.TokenId);
                        argument.HasReference = true;
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                }

                break;
            case ActionKind.levelup:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("levelup", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("levelup", 1, "Unit", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.UnitSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Unit;
                        argument.HasReference = true;
                    }
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("levelup", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                break;
            case ActionKind.addLevel:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("addLevel", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("addLevel", 1, "Unit", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.UnitSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Unit;
                        argument.HasReference = true;
                    }
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("addLevel", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                break;
            case ActionKind.addLoyal:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("addLoyal", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("addLoyal", 1, "Unit", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.UnitSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Unit;
                        argument.HasReference = true;
                    }
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("addLoyal", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                break;
            case ActionKind.addTrust:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("addTrust", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("addTrust", 1, "Unit", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.UnitSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Unit;
                        argument.HasReference = true;
                    }
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("addTrust", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                break;
            case ActionKind.hideLink:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("hideLink", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("hideLink", 1, "Spot", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.SpotSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Spot;
                        argument.HasReference = true;
                    }
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("hideLink", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("hideLink", 2, "Spot", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.SpotSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Spot;
                        argument.HasReference = true;
                    }
                }

                break;
            case ActionKind.pushCapa:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("pushCapa", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("pushCapa", 1, "Spot", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.SpotSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Spot;
                        argument.HasReference = true;
                    }
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount == 0)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableWriter;
                    argument.ReferenceId = analysisResult.NumberVariableWriterSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }
                else
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("pushCapa", argument.TokenId, argument.TrailingTokenCount);
                }

                break;
            case ActionKind.pushItem:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("pushItem", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("pushItem", 1, "Skill", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.SkillSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Skill;
                        argument.HasReference = true;
                    }
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount == 0)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableWriter;
                    argument.ReferenceId = analysisResult.NumberVariableWriterSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }
                else
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("pushItem", argument.TokenId, argument.TrailingTokenCount);
                }

                break;
            case ActionKind.pushRank:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("pushRank", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("pushRank", 1, "Unit", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.UnitSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Unit;
                        argument.HasReference = true;
                    }
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount == 0)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableWriter;
                    argument.ReferenceId = analysisResult.NumberVariableWriterSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }
                else
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("pushRank", argument.TokenId, argument.TrailingTokenCount);
                }

                break;
            case ActionKind.pushSpot:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("pushSpot", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("pushSpot", 1, "Power", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.PowerSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Power;
                        argument.HasReference = true;
                    }
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount == 0)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableWriter;
                    argument.ReferenceId = analysisResult.NumberVariableWriterSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }
                else
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("pushSpot", argument.TokenId, argument.TrailingTokenCount);
                }

                break;
            case ActionKind.setLevel:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("setLevel", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("setLevel", 1, "Unit", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.UnitSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Unit;
                        argument.HasReference = true;
                    }
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("setLevel", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                break;
            case ActionKind.hideEscape:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("hideEscape", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("hideEscape", 1, "Spot", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.SpotSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Spot;
                        argument.HasReference = true;
                    }
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("hideEscape", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("hideEscape", 2, "Spot", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.SpotSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Spot;
                        argument.HasReference = true;
                    }
                }

                break;
            case ActionKind.addCastle:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("addCastle", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("addCastle", 1, "Spot", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.SpotSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Spot;
                        argument.HasReference = true;
                    }
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("addCastle", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                break;
            case ActionKind.addMerits:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("addMerits", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("addMerits", 1, "Unit", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.UnitSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Unit;
                        argument.HasReference = true;
                    }
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("addMerits", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                break;
            case ActionKind.changeMap:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("changeMap", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("changeMap", 1, "Spot", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.SpotSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Spot;
                        argument.HasReference = true;
                    }
                }

                argument = ref arguments[1];
                argument.ReferenceKind = ReferenceKind.map;
                argument.ReferenceId = analysisResult.mapSet.GetOrAdd(result.GetSpan(argument.TokenId, argument.TrailingTokenCount), argument.TokenId);
                argument.HasReference = true;

                break;
            case ActionKind.pushLevel:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("pushLevel", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("pushLevel", 1, "Unit", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.UnitSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Unit;
                        argument.HasReference = true;
                    }
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount == 0)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableWriter;
                    argument.ReferenceId = analysisResult.NumberVariableWriterSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }
                else
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("pushLevel", argument.TokenId, argument.TrailingTokenCount);
                }

                break;
            case ActionKind.pushLoyal:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("pushLoyal", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("pushLoyal", 1, "Unit", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.UnitSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Unit;
                        argument.HasReference = true;
                    }
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount == 0)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableWriter;
                    argument.ReferenceId = analysisResult.NumberVariableWriterSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }
                else
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("pushLoyal", argument.TokenId, argument.TrailingTokenCount);
                }

                break;
            case ActionKind.pushTrain:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("pushTrain", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("pushTrain", 1, "Power", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.PowerSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Power;
                        argument.HasReference = true;
                    }
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount == 0)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableWriter;
                    argument.ReferenceId = analysisResult.NumberVariableWriterSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }
                else
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("pushTrain", argument.TokenId, argument.TrailingTokenCount);
                }

                break;
            case ActionKind.setCastle:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("setCastle", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("setCastle", 1, "Spot", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.SpotSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Spot;
                        argument.HasReference = true;
                    }
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("setCastle", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                break;
            case ActionKind.changeRace:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("changeRace", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("changeRace", 1, "Unit", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.UnitSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Unit;
                        argument.HasReference = true;
                    }
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("changeRace", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("changeRace", 2, "Race", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.RaceSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Race;
                        argument.HasReference = true;
                    }
                }

                break;
            case ActionKind.pushCastle:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("pushCastle", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("pushCastle", 1, "Spot", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.SpotSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Spot;
                        argument.HasReference = true;
                    }
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount == 0)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableWriter;
                    argument.ReferenceId = analysisResult.NumberVariableWriterSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }
                else
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("pushCastle", argument.TokenId, argument.TrailingTokenCount);
                }

                break;
            case ActionKind.pushMerits:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("pushMerits", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("pushMerits", 1, "Unit", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.UnitSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Unit;
                        argument.HasReference = true;
                    }
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount == 0)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableWriter;
                    argument.ReferenceId = analysisResult.NumberVariableWriterSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }
                else
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("pushMerits", argument.TokenId, argument.TrailingTokenCount);
                }

                break;
            case ActionKind.setDungeon:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("setDungeon", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("setDungeon", 1, "Spot", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.SpotSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Spot;
                        argument.HasReference = true;
                    }
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount == 0)
                {
                    argument.ReferenceKind = ReferenceKind.Dungeon;
                    argument.ReferenceId = analysisResult.DungeonSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }
                else
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("setDungeon", argument.TokenId, argument.TrailingTokenCount);
                }

                break;
            case ActionKind.unionPower:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("unionPower", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("unionPower", 1, "Power", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.PowerSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Power;
                        argument.HasReference = true;
                    }
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("unionPower", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("unionPower", 2, "Power", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.PowerSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Power;
                        argument.HasReference = true;
                    }
                }

                break;
            case ActionKind.addTraining:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("addTraining", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("addTraining", 1, "Power", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.PowerSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Power;
                        argument.HasReference = true;
                    }
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("addTraining", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                break;
            case ActionKind.changeClass:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("changeClass", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("changeClass", 1, "Unit", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.UnitSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Unit;
                        argument.HasReference = true;
                    }
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("changeClass", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("changeClass", 2, "Class", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.ClassSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Class;
                        argument.HasReference = true;
                    }
                }

                break;
            case ActionKind.pushTrainUp:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("pushTrainUp", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("pushTrainUp", 1, "Power", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.PowerSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Power;
                        argument.HasReference = true;
                    }
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount == 0)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableWriter;
                    argument.ReferenceId = analysisResult.NumberVariableWriterSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }
                else
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("pushTrainUp", argument.TokenId, argument.TrailingTokenCount);
                }

                break;
            case ActionKind.setTraining:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("setTraining", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("setTraining", 1, "Power", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.PowerSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Power;
                        argument.HasReference = true;
                    }
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("setTraining", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                break;
            case ActionKind.addBaseLevel:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("addBaseLevel", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("addBaseLevel", 1, "Power", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.PowerSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Power;
                        argument.HasReference = true;
                    }
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("addBaseLevel", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                break;
            case ActionKind.changeCastle:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("changeCastle", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("changeCastle", 1, "Spot", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.SpotSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Spot;
                        argument.HasReference = true;
                    }
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("changeCastle", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                break;
            case ActionKind.setBaseLevel:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("setBaseLevel", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("setBaseLevel", 1, "Power", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.PowerSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Power;
                        argument.HasReference = true;
                    }
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("setBaseLevel", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                break;
            case ActionKind.addTrainingUp:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("addTrainingUp", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("addTrainingUp", 1, "Power", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.PowerSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Power;
                        argument.HasReference = true;
                    }
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("addTrainingUp", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                break;
            case ActionKind.changeDungeon:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("changeDungeon", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("changeDungeon", 1, "Power", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.PowerSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Power;
                        argument.HasReference = true;
                    }
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount == 0)
                {
                    argument.ReferenceKind = ReferenceKind.Dungeon;
                    argument.ReferenceId = analysisResult.DungeonSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }
                else
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("changeDungeon", argument.TokenId, argument.TrailingTokenCount);
                }

                break;
            case ActionKind.pushBaseLevel:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("pushBaseLevel", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("pushBaseLevel", 1, "Power", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.PowerSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Power;
                        argument.HasReference = true;
                    }
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount == 0)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableWriter;
                    argument.ReferenceId = analysisResult.NumberVariableWriterSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }
                else
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("pushBaseLevel", argument.TokenId, argument.TrailingTokenCount);
                }

                break;
            case ActionKind.setTrainingUp:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("setTrainingUp", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("setTrainingUp", 1, "Power", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.PowerSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Power;
                        argument.HasReference = true;
                    }
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("setTrainingUp", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                break;
            case ActionKind.storeNextSpot:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("storeNextSpot", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("storeNextSpot", 1, "Spot", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.SpotSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Spot;
                        argument.HasReference = true;
                    }
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("storeNextSpot", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("storeNextSpot", 2, "StringVariableWriter", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length == 1)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("storeNextSpot", 2, "StringVariableWriter", argument.TokenId);
                        }
                        else
                        {
                            argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.HasReference = true;
                        }
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                    else
                    {
                        if (context.CreateError(DiagnosticSeverity.Warning))
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("storeNextSpot", 2, "StringVariableWriter", argument.TokenId);
                        }
                        argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span, argument.TokenId);
                        argument.HasReference = true;
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                }

                break;
            case ActionKind.storeSkillset:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("storeSkillset", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("storeSkillset", 1, "Skillset", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.SkillsetSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Skillset;
                        argument.HasReference = true;
                    }
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("storeSkillset", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("storeSkillset", 2, "StringVariableWriter", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length == 1)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("storeSkillset", 2, "StringVariableWriter", argument.TokenId);
                        }
                        else
                        {
                            argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.HasReference = true;
                        }
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                    else
                    {
                        if (context.CreateError(DiagnosticSeverity.Warning))
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("storeSkillset", 2, "StringVariableWriter", argument.TokenId);
                        }
                        argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span, argument.TokenId);
                        argument.HasReference = true;
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                }

                break;
            case ActionKind.changePowerFix:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("changePowerFix", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("changePowerFix", 1, "Power", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.PowerSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Power;
                        argument.HasReference = true;
                    }
                }

                
                break;
            case ActionKind.pushBattleHome:
                if (argument.TrailingTokenCount == 0)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableWriter;
                    argument.ReferenceId = analysisResult.NumberVariableWriterSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }
                else
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("pushBattleHome", argument.TokenId, argument.TrailingTokenCount);
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount == 0)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableWriter;
                    argument.ReferenceId = analysisResult.NumberVariableWriterSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }
                else
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("pushBattleHome", argument.TokenId, argument.TrailingTokenCount);
                }

                break;
            case ActionKind.pushBattleRect:
                if (argument.TrailingTokenCount == 0)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableWriter;
                    argument.ReferenceId = analysisResult.NumberVariableWriterSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }
                else
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("pushBattleRect", argument.TokenId, argument.TrailingTokenCount);
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount == 0)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableWriter;
                    argument.ReferenceId = analysisResult.NumberVariableWriterSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }
                else
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("pushBattleRect", argument.TokenId, argument.TrailingTokenCount);
                }

                break;
            case ActionKind.changePowerName:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("changePowerName", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("changePowerName", 1, "Power", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.PowerSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Power;
                        argument.HasReference = true;
                    }
                }

                
                break;
            case ActionKind.changeSpotImage:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("changeSpotImage", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("changeSpotImage", 1, "Spot", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.SpotSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Spot;
                        argument.HasReference = true;
                    }
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount == 0)
                {
                    argument.ReferenceKind = ReferenceKind.imagedata;
                    argument.ReferenceId = analysisResult.imagedataSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }
                else
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("changeSpotImage", argument.TokenId, argument.TrailingTokenCount);
                }

                break;
            case ActionKind.setDungeonFloor:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("setDungeonFloor", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("setDungeonFloor", 1, "Dungeon", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.DungeonSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Dungeon;
                        argument.HasReference = true;
                    }
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("setDungeonFloor", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                break;
            case ActionKind.storeRaceOfUnit:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("storeRaceOfUnit", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("storeRaceOfUnit", 1, "Unit", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.UnitSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Unit;
                        argument.HasReference = true;
                    }
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("storeRaceOfUnit", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("storeRaceOfUnit", 2, "StringVariableWriter", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length == 1)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("storeRaceOfUnit", 2, "StringVariableWriter", argument.TokenId);
                        }
                        else
                        {
                            argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.HasReference = true;
                        }
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                    else
                    {
                        if (context.CreateError(DiagnosticSeverity.Warning))
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("storeRaceOfUnit", 2, "StringVariableWriter", argument.TokenId);
                        }
                        argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span, argument.TokenId);
                        argument.HasReference = true;
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                }

                break;
            case ActionKind.storeSpotOfUnit:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("storeSpotOfUnit", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("storeSpotOfUnit", 1, "Unit", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.UnitSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Unit;
                        argument.HasReference = true;
                    }
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("storeSpotOfUnit", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("storeSpotOfUnit", 2, "StringVariableWriter", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length == 1)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("storeSpotOfUnit", 2, "StringVariableWriter", argument.TokenId);
                        }
                        else
                        {
                            argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.HasReference = true;
                        }
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                    else
                    {
                        if (context.CreateError(DiagnosticSeverity.Warning))
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("storeSpotOfUnit", 2, "StringVariableWriter", argument.TokenId);
                        }
                        argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span, argument.TokenId);
                        argument.HasReference = true;
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                }

                break;
            case ActionKind.storeUnitOfSpot:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("storeUnitOfSpot", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("storeUnitOfSpot", 1, "Spot", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.SpotSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Spot;
                        argument.HasReference = true;
                    }
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("storeUnitOfSpot", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("storeUnitOfSpot", 2, "StringVariableWriter", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length == 1)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("storeUnitOfSpot", 2, "StringVariableWriter", argument.TokenId);
                        }
                        else
                        {
                            argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.HasReference = true;
                        }
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                    else
                    {
                        if (context.CreateError(DiagnosticSeverity.Warning))
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("storeUnitOfSpot", 2, "StringVariableWriter", argument.TokenId);
                        }
                        argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span, argument.TokenId);
                        argument.HasReference = true;
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                }

                break;
            case ActionKind.storeClassOfUnit:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("storeClassOfUnit", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("storeClassOfUnit", 1, "Unit", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.UnitSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Unit;
                        argument.HasReference = true;
                    }
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("storeClassOfUnit", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("storeClassOfUnit", 2, "StringVariableWriter", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length == 1)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("storeClassOfUnit", 2, "StringVariableWriter", argument.TokenId);
                        }
                        else
                        {
                            argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.HasReference = true;
                        }
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                    else
                    {
                        if (context.CreateError(DiagnosticSeverity.Warning))
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("storeClassOfUnit", 2, "StringVariableWriter", argument.TokenId);
                        }
                        argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span, argument.TokenId);
                        argument.HasReference = true;
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                }

                break;
            case ActionKind.storePowerOfSpot:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("storePowerOfSpot", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("storePowerOfSpot", 1, "Spot", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.SpotSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Spot;
                        argument.HasReference = true;
                    }
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("storePowerOfSpot", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("storePowerOfSpot", 2, "StringVariableWriter", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length == 1)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("storePowerOfSpot", 2, "StringVariableWriter", argument.TokenId);
                        }
                        else
                        {
                            argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.HasReference = true;
                        }
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                    else
                    {
                        if (context.CreateError(DiagnosticSeverity.Warning))
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("storePowerOfSpot", 2, "StringVariableWriter", argument.TokenId);
                        }
                        argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span, argument.TokenId);
                        argument.HasReference = true;
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                }

                break;
            case ActionKind.storePowerOfUnit:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("storePowerOfUnit", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("storePowerOfUnit", 1, "Unit", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.UnitSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Unit;
                        argument.HasReference = true;
                    }
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("storePowerOfUnit", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("storePowerOfUnit", 2, "StringVariableWriter", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length == 1)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("storePowerOfUnit", 2, "StringVariableWriter", argument.TokenId);
                        }
                        else
                        {
                            argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.HasReference = true;
                        }
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                    else
                    {
                        if (context.CreateError(DiagnosticSeverity.Warning))
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("storePowerOfUnit", 2, "StringVariableWriter", argument.TokenId);
                        }
                        argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span, argument.TokenId);
                        argument.HasReference = true;
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                }

                break;
            case ActionKind.storeSkillOfUnit:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("storeSkillOfUnit", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("storeSkillOfUnit", 1, "Unit", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.UnitSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Unit;
                        argument.HasReference = true;
                    }
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("storeSkillOfUnit", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("storeSkillOfUnit", 2, "StringVariableWriter", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length == 1)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("storeSkillOfUnit", 2, "StringVariableWriter", argument.TokenId);
                        }
                        else
                        {
                            argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.HasReference = true;
                        }
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                    else
                    {
                        if (context.CreateError(DiagnosticSeverity.Warning))
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("storeSkillOfUnit", 2, "StringVariableWriter", argument.TokenId);
                        }
                        argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span, argument.TokenId);
                        argument.HasReference = true;
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                }

                break;
            case ActionKind.storeSpotOfPower:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("storeSpotOfPower", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("storeSpotOfPower", 1, "Power", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.PowerSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Power;
                        argument.HasReference = true;
                    }
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("storeSpotOfPower", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("storeSpotOfPower", 2, "StringVariableWriter", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length == 1)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("storeSpotOfPower", 2, "StringVariableWriter", argument.TokenId);
                        }
                        else
                        {
                            argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.HasReference = true;
                        }
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                    else
                    {
                        if (context.CreateError(DiagnosticSeverity.Warning))
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("storeSpotOfPower", 2, "StringVariableWriter", argument.TokenId);
                        }
                        argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span, argument.TokenId);
                        argument.HasReference = true;
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                }

                break;
            case ActionKind.storeTalentPower:
                if (argument.TrailingTokenCount == 0)
                {
                    argument.ReferenceKind = ReferenceKind.Unit;
                    argument.ReferenceId = analysisResult.UnitSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }
                else
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("storeTalentPower", argument.TokenId, argument.TrailingTokenCount);
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("storeTalentPower", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("storeTalentPower", 2, "StringVariableWriter", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length == 1)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("storeTalentPower", 2, "StringVariableWriter", argument.TokenId);
                        }
                        else
                        {
                            argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.HasReference = true;
                        }
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                    else
                    {
                        if (context.CreateError(DiagnosticSeverity.Warning))
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("storeTalentPower", 2, "StringVariableWriter", argument.TokenId);
                        }
                        argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span, argument.TokenId);
                        argument.HasReference = true;
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                }

                break;
            case ActionKind.storeUnitOfPower:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("storeUnitOfPower", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("storeUnitOfPower", 1, "Power", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.PowerSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Power;
                        argument.HasReference = true;
                    }
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("storeUnitOfPower", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("storeUnitOfPower", 2, "StringVariableWriter", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length == 1)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("storeUnitOfPower", 2, "StringVariableWriter", argument.TokenId);
                        }
                        else
                        {
                            argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.HasReference = true;
                        }
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                    else
                    {
                        if (context.CreateError(DiagnosticSeverity.Warning))
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("storeUnitOfPower", 2, "StringVariableWriter", argument.TokenId);
                        }
                        argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span, argument.TokenId);
                        argument.HasReference = true;
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                }

                break;
            case ActionKind.storeLeaderOfSpot:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("storeLeaderOfSpot", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("storeLeaderOfSpot", 1, "Spot", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.SpotSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Spot;
                        argument.HasReference = true;
                    }
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("storeLeaderOfSpot", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("storeLeaderOfSpot", 2, "StringVariableWriter", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length == 1)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("storeLeaderOfSpot", 2, "StringVariableWriter", argument.TokenId);
                        }
                        else
                        {
                            argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.HasReference = true;
                        }
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                    else
                    {
                        if (context.CreateError(DiagnosticSeverity.Warning))
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("storeLeaderOfSpot", 2, "StringVariableWriter", argument.TokenId);
                        }
                        argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span, argument.TokenId);
                        argument.HasReference = true;
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                }

                break;
            case ActionKind.storeMasterOfUnit:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("storeMasterOfUnit", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("storeMasterOfUnit", 1, "Unit", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.UnitSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Unit;
                        argument.HasReference = true;
                    }
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("storeMasterOfUnit", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("storeMasterOfUnit", 2, "StringVariableWriter", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length == 1)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("storeMasterOfUnit", 2, "StringVariableWriter", argument.TokenId);
                        }
                        else
                        {
                            argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.HasReference = true;
                        }
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                    else
                    {
                        if (context.CreateError(DiagnosticSeverity.Warning))
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("storeMasterOfUnit", 2, "StringVariableWriter", argument.TokenId);
                        }
                        argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span, argument.TokenId);
                        argument.HasReference = true;
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                }

                break;
            case ActionKind.storeMemberOfUnit:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("storeMemberOfUnit", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("storeMemberOfUnit", 1, "Unit", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.UnitSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Unit;
                        argument.HasReference = true;
                    }
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("storeMemberOfUnit", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("storeMemberOfUnit", 2, "StringVariableWriter", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length == 1)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("storeMemberOfUnit", 2, "StringVariableWriter", argument.TokenId);
                        }
                        else
                        {
                            argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.HasReference = true;
                        }
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                    else
                    {
                        if (context.CreateError(DiagnosticSeverity.Warning))
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("storeMemberOfUnit", 2, "StringVariableWriter", argument.TokenId);
                        }
                        argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span, argument.TokenId);
                        argument.HasReference = true;
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                }

                break;
            case ActionKind.storePowerOfForce:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("storePowerOfForce", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("storePowerOfForce", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("storePowerOfForce", 2, "StringVariableWriter", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length == 1)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("storePowerOfForce", 2, "StringVariableWriter", argument.TokenId);
                        }
                        else
                        {
                            argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.HasReference = true;
                        }
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                    else
                    {
                        if (context.CreateError(DiagnosticSeverity.Warning))
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("storePowerOfForce", 2, "StringVariableWriter", argument.TokenId);
                        }
                        argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span, argument.TokenId);
                        argument.HasReference = true;
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                }

                break;
            case ActionKind.storeLeaderOfPower:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("storeLeaderOfPower", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("storeLeaderOfPower", 1, "Power", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.PowerSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Power;
                        argument.HasReference = true;
                    }
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("storeLeaderOfPower", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("storeLeaderOfPower", 2, "StringVariableWriter", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length == 1)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("storeLeaderOfPower", 2, "StringVariableWriter", argument.TokenId);
                        }
                        else
                        {
                            argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.HasReference = true;
                        }
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                    else
                    {
                        if (context.CreateError(DiagnosticSeverity.Warning))
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("storeLeaderOfPower", 2, "StringVariableWriter", argument.TokenId);
                        }
                        argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span, argument.TokenId);
                        argument.HasReference = true;
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                }

                break;
            case ActionKind.storeMasterOfPower:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("storeMasterOfPower", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("storeMasterOfPower", 1, "Power", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.PowerSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Power;
                        argument.HasReference = true;
                    }
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("storeMasterOfPower", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("storeMasterOfPower", 2, "StringVariableWriter", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length == 1)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("storeMasterOfPower", 2, "StringVariableWriter", argument.TokenId);
                        }
                        else
                        {
                            argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.HasReference = true;
                        }
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                    else
                    {
                        if (context.CreateError(DiagnosticSeverity.Warning))
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("storeMasterOfPower", 2, "StringVariableWriter", argument.TokenId);
                        }
                        argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span, argument.TokenId);
                        argument.HasReference = true;
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                }

                break;
            case ActionKind.storeRoamUnitOfSpot:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("storeRoamUnitOfSpot", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("storeRoamUnitOfSpot", 1, "Spot", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.SpotSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Spot;
                        argument.HasReference = true;
                    }
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("storeRoamUnitOfSpot", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("storeRoamUnitOfSpot", 2, "StringVariableWriter", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length == 1)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("storeRoamUnitOfSpot", 2, "StringVariableWriter", argument.TokenId);
                        }
                        else
                        {
                            argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.HasReference = true;
                        }
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                    else
                    {
                        if (context.CreateError(DiagnosticSeverity.Warning))
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("storeRoamUnitOfSpot", 2, "StringVariableWriter", argument.TokenId);
                        }
                        argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span, argument.TokenId);
                        argument.HasReference = true;
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                }

                break;
            case ActionKind.storeBaseClassOfUnit:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("storeBaseClassOfUnit", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("storeBaseClassOfUnit", 1, "Unit", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.UnitSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Unit;
                        argument.HasReference = true;
                    }
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("storeBaseClassOfUnit", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("storeBaseClassOfUnit", 2, "StringVariableWriter", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length == 1)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("storeBaseClassOfUnit", 2, "StringVariableWriter", argument.TokenId);
                        }
                        else
                        {
                            argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.HasReference = true;
                        }
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                    else
                    {
                        if (context.CreateError(DiagnosticSeverity.Warning))
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("storeBaseClassOfUnit", 2, "StringVariableWriter", argument.TokenId);
                        }
                        argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span, argument.TokenId);
                        argument.HasReference = true;
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                }

                break;
            case ActionKind.addSkill:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("addSkill", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("addSkill", 1, "Unit", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.UnitSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Unit;
                        argument.HasReference = true;
                    }
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("addSkill", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("addSkill", 2, "Skill", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.SkillSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Skill;
                        argument.HasReference = true;
                    }
                }

                for (int i = 2; i < arguments.Length; ++i)
                {
                    argument = ref arguments[i];
                    if (argument.TrailingTokenCount != 0)
                    {
                        result.ErrorAdd_InvalidMultipleTokenArgument("addSkill", argument.TokenId, argument.TrailingTokenCount);
                    }
                    else
                    {
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("addSkill", i + 1, "Skill", argument.TokenId);
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length != 1)
                            {
                                argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            argument.ReferenceId = analysisResult.SkillSet.GetOrAdd(span, argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.Skill;
                            argument.HasReference = true;
                        }
                    }

                }
                break;
            case ActionKind.addSkill2:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("addSkill2", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("addSkill2", 1, "Unit", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.UnitSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Unit;
                        argument.HasReference = true;
                    }
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("addSkill2", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("addSkill2", 2, "Skill", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.SkillSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Skill;
                        argument.HasReference = true;
                    }
                }

                for (int i = 2; i < arguments.Length; ++i)
                {
                    argument = ref arguments[i];
                    if (argument.TrailingTokenCount != 0)
                    {
                        result.ErrorAdd_InvalidMultipleTokenArgument("addSkill2", argument.TokenId, argument.TrailingTokenCount);
                    }
                    else
                    {
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("addSkill2", i + 1, "Skill", argument.TokenId);
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length != 1)
                            {
                                argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            argument.ReferenceId = analysisResult.SkillSet.GetOrAdd(span, argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.Skill;
                            argument.HasReference = true;
                        }
                    }

                }
                break;
            case ActionKind.wait:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("wait", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                break;
            case ActionKind.focus:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("focus", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("focus", 1, "Unit", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.UnitSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Unit;
                        argument.HasReference = true;
                    }
                }

                break;
            case ActionKind.shake:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("shake", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                break;
            case ActionKind.fadein:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("fadein", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                break;
            case ActionKind.fadeout:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("fadeout", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                break;
            case ActionKind.playBGM:
                argument.ReferenceKind = ReferenceKind.bgm;
                argument.ReferenceId = analysisResult.bgmSet.GetOrAdd(result.GetSpan(argument.TokenId, argument.TrailingTokenCount), argument.TokenId);
                argument.HasReference = true;

                break;
            case ActionKind.reloadMenu:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("reloadMenu", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber && (argument.HasReference = PerResultValidator.IsBoolean(result.GetSpan(argument.TokenId), out argument.ReferenceId)))
                {
                    argument.ReferenceKind = ReferenceKind.Boolean;
                }
                else
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("reloadMenu", 1, "Boolean", argument.TokenId);
                }

                break;
            case ActionKind.choiceTitle:
                
                break;
            case ActionKind.changePlayer:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("changePlayer", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("changePlayer", 1, "Unit", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.UnitSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Unit;
                        argument.HasReference = true;
                    }
                }

                break;
            case ActionKind.setGameClear:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("setGameClear", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber && (argument.HasReference = PerResultValidator.IsBoolean(result.GetSpan(argument.TokenId), out argument.ReferenceId)))
                {
                    argument.ReferenceKind = ReferenceKind.Boolean;
                }
                else
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("setGameClear", 1, "Boolean", argument.TokenId);
                }

                break;
            case ActionKind.image:
                argument.ReferenceKind = ReferenceKind.image_file;
                argument.ReferenceId = analysisResult.image_fileSet.GetOrAdd(result.GetSpan(argument.TokenId, argument.TrailingTokenCount), argument.TokenId);
                argument.HasReference = true;

                if (arguments.Length <= 1)
                {
                    break;
                }
                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("image", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                if (arguments.Length <= 2)
                {
                    break;
                }
                argument = ref arguments[2];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("image", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                if (arguments.Length <= 3)
                {
                    break;
                }
                argument = ref arguments[3];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("image", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                if (arguments.Length <= 4)
                {
                    break;
                }
                argument = ref arguments[4];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("image", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                break;
            case ActionKind.image2:
                argument.ReferenceKind = ReferenceKind.image_file;
                argument.ReferenceId = analysisResult.image_fileSet.GetOrAdd(result.GetSpan(argument.TokenId, argument.TrailingTokenCount), argument.TokenId);
                argument.HasReference = true;

                if (arguments.Length <= 1)
                {
                    break;
                }
                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("image2", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                if (arguments.Length <= 2)
                {
                    break;
                }
                argument = ref arguments[2];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("image2", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                if (arguments.Length <= 3)
                {
                    break;
                }
                argument = ref arguments[3];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("image2", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                if (arguments.Length <= 4)
                {
                    break;
                }
                argument = ref arguments[4];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("image2", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                break;
            case ActionKind.showImage:
                argument.ReferenceKind = ReferenceKind.image_file;
                argument.ReferenceId = analysisResult.image_fileSet.GetOrAdd(result.GetSpan(argument.TokenId, argument.TrailingTokenCount), argument.TokenId);
                argument.HasReference = true;

                if (arguments.Length <= 1)
                {
                    break;
                }
                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("showImage", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                if (arguments.Length <= 2)
                {
                    break;
                }
                argument = ref arguments[2];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("showImage", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                if (arguments.Length <= 3)
                {
                    break;
                }
                argument = ref arguments[3];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("showImage", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                if (arguments.Length <= 4)
                {
                    break;
                }
                argument = ref arguments[4];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("showImage", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                break;
            case ActionKind.face:
                argument.ReferenceKind = ReferenceKind.face;
                argument.ReferenceId = analysisResult.faceSet.GetOrAdd(result.GetSpan(argument.TokenId, argument.TrailingTokenCount), argument.TokenId);
                argument.HasReference = true;

                if (arguments.Length <= 1)
                {
                    break;
                }
                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("face", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                if (arguments.Length <= 2)
                {
                    break;
                }
                argument = ref arguments[2];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("face", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                if (arguments.Length <= 3)
                {
                    break;
                }
                argument = ref arguments[3];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("face", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                if (arguments.Length <= 4)
                {
                    break;
                }
                argument = ref arguments[4];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("face", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                break;
            case ActionKind.face2:
                argument.ReferenceKind = ReferenceKind.face;
                argument.ReferenceId = analysisResult.faceSet.GetOrAdd(result.GetSpan(argument.TokenId, argument.TrailingTokenCount), argument.TokenId);
                argument.HasReference = true;

                if (arguments.Length <= 1)
                {
                    break;
                }
                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("face2", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                if (arguments.Length <= 2)
                {
                    break;
                }
                argument = ref arguments[2];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("face2", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                if (arguments.Length <= 3)
                {
                    break;
                }
                argument = ref arguments[3];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("face2", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                if (arguments.Length <= 4)
                {
                    break;
                }
                argument = ref arguments[4];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("face2", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                break;
            case ActionKind.showFace:
                argument.ReferenceKind = ReferenceKind.face;
                argument.ReferenceId = analysisResult.faceSet.GetOrAdd(result.GetSpan(argument.TokenId, argument.TrailingTokenCount), argument.TokenId);
                argument.HasReference = true;

                if (arguments.Length <= 1)
                {
                    break;
                }
                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("showFace", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                if (arguments.Length <= 2)
                {
                    break;
                }
                argument = ref arguments[2];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("showFace", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                if (arguments.Length <= 3)
                {
                    break;
                }
                argument = ref arguments[3];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("showFace", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                if (arguments.Length <= 4)
                {
                    break;
                }
                argument = ref arguments[4];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("showFace", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                break;
            case ActionKind.picture:
                argument.ReferenceKind = ReferenceKind.picture;
                argument.ReferenceId = analysisResult.pictureSet.GetOrAdd(result.GetSpan(argument.TokenId, argument.TrailingTokenCount), argument.TokenId);
                argument.HasReference = true;

                if (arguments.Length <= 1)
                {
                    break;
                }
                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("picture", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                if (arguments.Length <= 2)
                {
                    break;
                }
                argument = ref arguments[2];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("picture", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                if (arguments.Length <= 3)
                {
                    break;
                }
                argument = ref arguments[3];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("picture", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                if (arguments.Length <= 4)
                {
                    break;
                }
                argument = ref arguments[4];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("picture", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                break;
            case ActionKind.picture2:
                argument.ReferenceKind = ReferenceKind.picture;
                argument.ReferenceId = analysisResult.pictureSet.GetOrAdd(result.GetSpan(argument.TokenId, argument.TrailingTokenCount), argument.TokenId);
                argument.HasReference = true;

                if (arguments.Length <= 1)
                {
                    break;
                }
                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("picture2", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                if (arguments.Length <= 2)
                {
                    break;
                }
                argument = ref arguments[2];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("picture2", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                if (arguments.Length <= 3)
                {
                    break;
                }
                argument = ref arguments[3];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("picture2", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                if (arguments.Length <= 4)
                {
                    break;
                }
                argument = ref arguments[4];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("picture2", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                break;
            case ActionKind.showPict:
                argument.ReferenceKind = ReferenceKind.picture;
                argument.ReferenceId = analysisResult.pictureSet.GetOrAdd(result.GetSpan(argument.TokenId, argument.TrailingTokenCount), argument.TokenId);
                argument.HasReference = true;

                if (arguments.Length <= 1)
                {
                    break;
                }
                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("showPict", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                if (arguments.Length <= 2)
                {
                    break;
                }
                argument = ref arguments[2];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("showPict", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                if (arguments.Length <= 3)
                {
                    break;
                }
                argument = ref arguments[3];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("showPict", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                if (arguments.Length <= 4)
                {
                    break;
                }
                argument = ref arguments[4];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("showPict", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                break;
            case ActionKind.showPicture:
                argument.ReferenceKind = ReferenceKind.picture;
                argument.ReferenceId = analysisResult.pictureSet.GetOrAdd(result.GetSpan(argument.TokenId, argument.TrailingTokenCount), argument.TokenId);
                argument.HasReference = true;

                if (arguments.Length <= 1)
                {
                    break;
                }
                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("showPicture", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                if (arguments.Length <= 2)
                {
                    break;
                }
                argument = ref arguments[2];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("showPicture", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                if (arguments.Length <= 3)
                {
                    break;
                }
                argument = ref arguments[3];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("showPicture", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                if (arguments.Length <= 4)
                {
                    break;
                }
                argument = ref arguments[4];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("showPicture", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                break;
            case ActionKind.call:
                if (argument.TrailingTokenCount == 0)
                {
                    argument.ReferenceKind = ReferenceKind.Event;
                    argument.ReferenceId = analysisResult.EventSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }
                else
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("call", argument.TokenId, argument.TrailingTokenCount);
                }

                break;
            case ActionKind.zoom:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("zoom", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                break;
            case ActionKind.clear:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("clear", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("clear", 1, "StringVariableWriter", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length == 1)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("clear", 1, "StringVariableWriter", argument.TokenId);
                        }
                        else
                        {
                            argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.HasReference = true;
                        }
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                    else
                    {
                        if (context.CreateError(DiagnosticSeverity.Warning))
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("clear", 1, "StringVariableWriter", argument.TokenId);
                        }
                        argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span, argument.TokenId);
                        argument.HasReference = true;
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                }

                break;
            case ActionKind.playSE:
                argument.ReferenceKind = ReferenceKind.sound;
                argument.ReferenceId = analysisResult.soundSet.GetOrAdd(result.GetSpan(argument.TokenId, argument.TrailingTokenCount), argument.TokenId);
                argument.HasReference = true;

                break;
            case ActionKind.volume:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("volume", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                break;
            case ActionKind.addItem:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("addItem", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("addItem", 1, "Skill", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.SkillSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Skill;
                        argument.HasReference = true;
                    }
                }

                break;
            case ActionKind.minimap:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("minimap", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber && (argument.HasReference = PerResultValidator.IsBoolean(result.GetSpan(argument.TokenId), out argument.ReferenceId)))
                {
                    argument.ReferenceKind = ReferenceKind.Boolean;
                }
                else
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("minimap", 1, "Boolean", argument.TokenId);
                }

                break;
            case ActionKind.routine:
                if (argument.TrailingTokenCount == 0)
                {
                    argument.ReferenceKind = ReferenceKind.Event;
                    argument.ReferenceId = analysisResult.EventSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }
                else
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("routine", argument.TokenId, argument.TrailingTokenCount);
                }

                break;
            case ActionKind.shuffle:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("shuffle", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("shuffle", 1, "StringVariableReader", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.HasReference = true;
                        }
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                    }
                    else
                    {
                        if (context.CreateError(DiagnosticSeverity.Warning))
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("shuffle", 1, "StringVariableReader", argument.TokenId);
                        }
                        argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span, argument.TokenId);
                        argument.HasReference = true;
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                    }
                }

                break;
            case ActionKind.addLimit:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("addLimit", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                break;
            case ActionKind.addPower:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("addPower", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("addPower", 1, "Power", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.PowerSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Power;
                        argument.HasReference = true;
                    }
                }

                break;
            case ActionKind.clearVar:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("clearVar", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("clearVar", 1, "StringVariableReader", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.HasReference = true;
                        }
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                    }
                    else
                    {
                        if (context.CreateError(DiagnosticSeverity.Warning))
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("clearVar", 1, "StringVariableReader", argument.TokenId);
                        }
                        argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span, argument.TokenId);
                        argument.HasReference = true;
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                    }
                }

                break;
            case ActionKind.exitItem:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("exitItem", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("exitItem", 1, "Skill", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.SkillSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Skill;
                        argument.HasReference = true;
                    }
                }

                break;
            case ActionKind.hideSpot:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("hideSpot", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("hideSpot", 1, "Spot", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.SpotSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Spot;
                        argument.HasReference = true;
                    }
                }

                break;
            case ActionKind.pushRand:
                if (argument.TrailingTokenCount == 0)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableWriter;
                    argument.ReferenceId = analysisResult.NumberVariableWriterSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }
                else
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("pushRand", argument.TokenId, argument.TrailingTokenCount);
                }

                break;
            case ActionKind.pushTurn:
                if (argument.TrailingTokenCount == 0)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableWriter;
                    argument.ReferenceId = analysisResult.NumberVariableWriterSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }
                else
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("pushTurn", argument.TokenId, argument.TrailingTokenCount);
                }

                break;
            case ActionKind.roamUnit:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("roamUnit", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("roamUnit", 1, "Unit", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.UnitSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Unit;
                        argument.HasReference = true;
                    }
                }

                break;
            case ActionKind.roamUnit2:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("roamUnit2", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("roamUnit2", 1, "Unit", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.UnitSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Unit;
                        argument.HasReference = true;
                    }
                }

                break;
            case ActionKind.setLimit:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("setLimit", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                break;
            case ActionKind.showSpot:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("showSpot", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("showSpot", 1, "Spot", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.SpotSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Spot;
                        argument.HasReference = true;
                    }
                }

                break;
            case ActionKind.showParty:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("showParty", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber && (argument.HasReference = PerResultValidator.IsBoolean(result.GetSpan(argument.TokenId), out argument.ReferenceId)))
                {
                    argument.ReferenceKind = ReferenceKind.Boolean;
                }
                else
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("showParty", 1, "Boolean", argument.TokenId);
                }

                break;
            case ActionKind.entryItem:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("entryItem", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("entryItem", 1, "Skill", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.SkillSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Skill;
                        argument.HasReference = true;
                    }
                }

                break;
            case ActionKind.eraseItem:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("eraseItem", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("eraseItem", 1, "Skill", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.SkillSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Skill;
                        argument.HasReference = true;
                    }
                }

                break;
            case ActionKind.eraseUnit:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("eraseUnit", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("eraseUnit", 1, "Unit", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.UnitSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Unit;
                        argument.HasReference = true;
                    }
                }

                break;
            case ActionKind.hideChara:
                if (argument.TrailingTokenCount == 0)
                {
                    argument.ReferenceKind = ReferenceKind.imagedata;
                    argument.ReferenceId = analysisResult.imagedataSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }
                else
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("hideChara", argument.TokenId, argument.TrailingTokenCount);
                }

                break;
            case ActionKind.pushLimit:
                if (argument.TrailingTokenCount == 0)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableWriter;
                    argument.ReferenceId = analysisResult.NumberVariableWriterSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }
                else
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("pushLimit", argument.TokenId, argument.TrailingTokenCount);
                }

                break;
            case ActionKind.pushRand2:
                if (argument.TrailingTokenCount == 0)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableWriter;
                    argument.ReferenceId = analysisResult.NumberVariableWriterSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }
                else
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("pushRand2", argument.TokenId, argument.TrailingTokenCount);
                }

                break;
            case ActionKind.endingRoll:
                if (argument.TrailingTokenCount == 0)
                {
                    argument.ReferenceKind = ReferenceKind.Event;
                    argument.ReferenceId = analysisResult.EventSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }
                else
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("endingRoll", argument.TokenId, argument.TrailingTokenCount);
                }

                break;
            case ActionKind.erasePower:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("erasePower", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("erasePower", 1, "Power", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.PowerSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Power;
                        argument.HasReference = true;
                    }
                }

                break;
            case ActionKind.removeSpot:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("removeSpot", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("removeSpot", 1, "Spot", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.SpotSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Spot;
                        argument.HasReference = true;
                    }
                }

                break;
            case ActionKind.shuffleVar:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("shuffleVar", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("shuffleVar", 1, "StringVariableReader", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.HasReference = true;
                        }
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                    }
                    else
                    {
                        if (context.CreateError(DiagnosticSeverity.Warning))
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("shuffleVar", 1, "StringVariableReader", argument.TokenId);
                        }
                        argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span, argument.TokenId);
                        argument.HasReference = true;
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                    }
                }

                break;
            case ActionKind.battleEvent:
                if (argument.TrailingTokenCount == 0)
                {
                    argument.ReferenceKind = ReferenceKind.Event;
                    argument.ReferenceId = analysisResult.EventSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }
                else
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("battleEvent", argument.TokenId, argument.TrailingTokenCount);
                }

                break;
            case ActionKind.scrollSpeed:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("scrollSpeed", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                break;
            case ActionKind.showDungeon:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("showDungeon", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("showDungeon", 1, "Dungeon", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.DungeonSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Dungeon;
                        argument.HasReference = true;
                    }
                }

                break;
            case ActionKind.reverseChara:
                if (argument.TrailingTokenCount == 0)
                {
                    argument.ReferenceKind = ReferenceKind.imagedata;
                    argument.ReferenceId = analysisResult.imagedataSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }
                else
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("reverseChara", argument.TokenId, argument.TrailingTokenCount);
                }

                break;
            case ActionKind.showPolitics:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("showPolitics", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber && (argument.HasReference = PerResultValidator.IsBoolean(result.GetSpan(argument.TokenId), out argument.ReferenceId)))
                {
                    argument.ReferenceKind = ReferenceKind.Boolean;
                }
                else
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("showPolitics", 1, "Boolean", argument.TokenId);
                }

                break;
            case ActionKind.storeAllSpot:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("storeAllSpot", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("storeAllSpot", 1, "StringVariableWriter", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length == 1)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("storeAllSpot", 1, "StringVariableWriter", argument.TokenId);
                        }
                        else
                        {
                            argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.HasReference = true;
                        }
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                    else
                    {
                        if (context.CreateError(DiagnosticSeverity.Warning))
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("storeAllSpot", 1, "StringVariableWriter", argument.TokenId);
                        }
                        argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span, argument.TokenId);
                        argument.HasReference = true;
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                }

                break;
            case ActionKind.storeAllPower:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("storeAllPower", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("storeAllPower", 1, "StringVariableWriter", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length == 1)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("storeAllPower", 1, "StringVariableWriter", argument.TokenId);
                        }
                        else
                        {
                            argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.HasReference = true;
                        }
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                    else
                    {
                        if (context.CreateError(DiagnosticSeverity.Warning))
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("storeAllPower", 1, "StringVariableWriter", argument.TokenId);
                        }
                        argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span, argument.TokenId);
                        argument.HasReference = true;
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                }

                break;
            case ActionKind.storeComPower:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("storeComPower", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("storeComPower", 1, "StringVariableWriter", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length == 1)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("storeComPower", 1, "StringVariableWriter", argument.TokenId);
                        }
                        else
                        {
                            argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.HasReference = true;
                        }
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                    else
                    {
                        if (context.CreateError(DiagnosticSeverity.Warning))
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("storeComPower", 1, "StringVariableWriter", argument.TokenId);
                        }
                        argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span, argument.TokenId);
                        argument.HasReference = true;
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                }

                break;
            case ActionKind.storeNowPower:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("storeNowPower", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("storeNowPower", 1, "StringVariableWriter", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length == 1)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("storeNowPower", 1, "StringVariableWriter", argument.TokenId);
                        }
                        else
                        {
                            argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.HasReference = true;
                        }
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                    else
                    {
                        if (context.CreateError(DiagnosticSeverity.Warning))
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("storeNowPower", 1, "StringVariableWriter", argument.TokenId);
                        }
                        argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span, argument.TokenId);
                        argument.HasReference = true;
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                }

                break;
            case ActionKind.pushCountPower:
                if (argument.TrailingTokenCount == 0)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableWriter;
                    argument.ReferenceId = analysisResult.NumberVariableWriterSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }
                else
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("pushCountPower", argument.TokenId, argument.TrailingTokenCount);
                }

                break;
            case ActionKind.storeAllTalent:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("storeAllTalent", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("storeAllTalent", 1, "StringVariableWriter", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length == 1)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("storeAllTalent", 1, "StringVariableWriter", argument.TokenId);
                        }
                        else
                        {
                            argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.HasReference = true;
                        }
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                    else
                    {
                        if (context.CreateError(DiagnosticSeverity.Warning))
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("storeAllTalent", 1, "StringVariableWriter", argument.TokenId);
                        }
                        argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span, argument.TokenId);
                        argument.HasReference = true;
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                }

                break;
            case ActionKind.erasePowerMerce:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("erasePowerMerce", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("erasePowerMerce", 1, "Power", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.PowerSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Power;
                        argument.HasReference = true;
                    }
                }

                break;
            case ActionKind.erasePowerStaff:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("erasePowerStaff", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("erasePowerStaff", 1, "Power", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.PowerSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Power;
                        argument.HasReference = true;
                    }
                }

                break;
            case ActionKind.storeBattleSpot:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("storeBattleSpot", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("storeBattleSpot", 1, "StringVariableWriter", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length == 1)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("storeBattleSpot", 1, "StringVariableWriter", argument.TokenId);
                        }
                        else
                        {
                            argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.HasReference = true;
                        }
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                    else
                    {
                        if (context.CreateError(DiagnosticSeverity.Warning))
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("storeBattleSpot", 1, "StringVariableWriter", argument.TokenId);
                        }
                        argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span, argument.TokenId);
                        argument.HasReference = true;
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                }

                break;
            case ActionKind.storePlayerUnit:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("storePlayerUnit", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("storePlayerUnit", 1, "StringVariableWriter", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length == 1)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("storePlayerUnit", 1, "StringVariableWriter", argument.TokenId);
                        }
                        else
                        {
                            argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.HasReference = true;
                        }
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                    else
                    {
                        if (context.CreateError(DiagnosticSeverity.Warning))
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("storePlayerUnit", 1, "StringVariableWriter", argument.TokenId);
                        }
                        argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span, argument.TokenId);
                        argument.HasReference = true;
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                }

                break;
            case ActionKind.storeAttackPower:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("storeAttackPower", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("storeAttackPower", 1, "StringVariableWriter", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length == 1)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("storeAttackPower", 1, "StringVariableWriter", argument.TokenId);
                        }
                        else
                        {
                            argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.HasReference = true;
                        }
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                    else
                    {
                        if (context.CreateError(DiagnosticSeverity.Warning))
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("storeAttackPower", 1, "StringVariableWriter", argument.TokenId);
                        }
                        argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span, argument.TokenId);
                        argument.HasReference = true;
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                }

                break;
            case ActionKind.storeNeutralSpot:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("storeNeutralSpot", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("storeNeutralSpot", 1, "StringVariableWriter", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length == 1)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("storeNeutralSpot", 1, "StringVariableWriter", argument.TokenId);
                        }
                        else
                        {
                            argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.HasReference = true;
                        }
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                    else
                    {
                        if (context.CreateError(DiagnosticSeverity.Warning))
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("storeNeutralSpot", 1, "StringVariableWriter", argument.TokenId);
                        }
                        argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span, argument.TokenId);
                        argument.HasReference = true;
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                }

                break;
            case ActionKind.storePlayerPower:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("storePlayerPower", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("storePlayerPower", 1, "StringVariableWriter", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length == 1)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("storePlayerPower", 1, "StringVariableWriter", argument.TokenId);
                        }
                        else
                        {
                            argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.HasReference = true;
                        }
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                    else
                    {
                        if (context.CreateError(DiagnosticSeverity.Warning))
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("storePlayerPower", 1, "StringVariableWriter", argument.TokenId);
                        }
                        argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span, argument.TokenId);
                        argument.HasReference = true;
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                }

                break;
            case ActionKind.storeDefensePower:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("storeDefensePower", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("storeDefensePower", 1, "StringVariableWriter", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length == 1)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("storeDefensePower", 1, "StringVariableWriter", argument.TokenId);
                        }
                        else
                        {
                            argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.HasReference = true;
                        }
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                    else
                    {
                        if (context.CreateError(DiagnosticSeverity.Warning))
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("storeDefensePower", 1, "StringVariableWriter", argument.TokenId);
                        }
                        argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span, argument.TokenId);
                        argument.HasReference = true;
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                }

                break;
            case ActionKind.storeSpotOfBattle:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("storeSpotOfBattle", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("storeSpotOfBattle", 1, "StringVariableWriter", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length == 1)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("storeSpotOfBattle", 1, "StringVariableWriter", argument.TokenId);
                        }
                        else
                        {
                            argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.HasReference = true;
                        }
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                    else
                    {
                        if (context.CreateError(DiagnosticSeverity.Warning))
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("storeSpotOfBattle", 1, "StringVariableWriter", argument.TokenId);
                        }
                        argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span, argument.TokenId);
                        argument.HasReference = true;
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                }

                break;
            case ActionKind.storePowerOfAttack:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("storePowerOfAttack", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("storePowerOfAttack", 1, "StringVariableWriter", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length == 1)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("storePowerOfAttack", 1, "StringVariableWriter", argument.TokenId);
                        }
                        else
                        {
                            argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.HasReference = true;
                        }
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                    else
                    {
                        if (context.CreateError(DiagnosticSeverity.Warning))
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("storePowerOfAttack", 1, "StringVariableWriter", argument.TokenId);
                        }
                        argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span, argument.TokenId);
                        argument.HasReference = true;
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                }

                break;
            case ActionKind.storeNonPlayerPower:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("storeNonPlayerPower", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("storeNonPlayerPower", 1, "StringVariableWriter", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length == 1)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("storeNonPlayerPower", 1, "StringVariableWriter", argument.TokenId);
                        }
                        else
                        {
                            argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.HasReference = true;
                        }
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                    else
                    {
                        if (context.CreateError(DiagnosticSeverity.Warning))
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("storeNonPlayerPower", 1, "StringVariableWriter", argument.TokenId);
                        }
                        argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span, argument.TokenId);
                        argument.HasReference = true;
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                }

                break;
            case ActionKind.storePowerOfDefense:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("storePowerOfDefense", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("storePowerOfDefense", 1, "StringVariableWriter", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length == 1)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("storePowerOfDefense", 1, "StringVariableWriter", argument.TokenId);
                        }
                        else
                        {
                            argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.HasReference = true;
                        }
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                    else
                    {
                        if (context.CreateError(DiagnosticSeverity.Warning))
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("storePowerOfDefense", 1, "StringVariableWriter", argument.TokenId);
                        }
                        argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span, argument.TokenId);
                        argument.HasReference = true;
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                }

                break;
            case ActionKind.font:
                argument.ReferenceKind = ReferenceKind.font;
                argument.ReferenceId = analysisResult.fontSet.GetOrAdd(result.GetSpan(argument.TokenId, argument.TrailingTokenCount), argument.TokenId);
                argument.HasReference = true;

                if (arguments.Length <= 1)
                {
                    break;
                }
                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0 || !argument.IsNumber)
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("font", 2, "Number", argument.TokenId);
                }

                if (arguments.Length <= 2)
                {
                    break;
                }
                argument = ref arguments[2];
                if (argument.TrailingTokenCount != 0 || !argument.IsNumber)
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("font", 3, "Number", argument.TokenId);
                }

                break;
            case ActionKind.fontc:
                if (argument.TrailingTokenCount != 0 || !argument.IsNumber)
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("fontc", 1, "Number", argument.TokenId);
                }

                if (arguments.Length <= 1)
                {
                    break;
                }
                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0 || !argument.IsNumber)
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("fontc", 2, "Number", argument.TokenId);
                }

                if (arguments.Length <= 2)
                {
                    break;
                }
                argument = ref arguments[2];
                if (argument.TrailingTokenCount != 0 || !argument.IsNumber)
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("fontc", 3, "Number", argument.TokenId);
                }

                break;
            case ActionKind.gread:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("gread", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("gread", 1, "GlobalVariableReader", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.GlobalVariableReaderSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.GlobalVariableReader;
                        argument.HasReference = true;
                    }
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount == 0)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableWriter;
                    argument.ReferenceId = analysisResult.NumberVariableWriterSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }
                else
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("gread", argument.TokenId, argument.TrailingTokenCount);
                }

                if (arguments.Length <= 2)
                {
                    break;
                }
                argument = ref arguments[2];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("gread", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("gread", 3, "StringVariableWriter", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length == 1)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("gread", 3, "StringVariableWriter", argument.TokenId);
                        }
                        else
                        {
                            argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.HasReference = true;
                        }
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                    else
                    {
                        if (context.CreateError(DiagnosticSeverity.Warning))
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("gread", 3, "StringVariableWriter", argument.TokenId);
                        }
                        argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span, argument.TokenId);
                        argument.HasReference = true;
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                }

                break;
            case ActionKind.gwrite:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("gwrite", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("gwrite", 1, "GlobalVariableWriter", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.GlobalVariableWriterSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.GlobalVariableWriter;
                        argument.HasReference = true;
                    }
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("gwrite", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                if (arguments.Length <= 2)
                {
                    break;
                }
                argument = ref arguments[2];
                span = result.GetSpan(argument.TokenId);
                if (span.Length > 1 && span[0] == '@')
                {
                    argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                    argument.ReferenceKind = ReferenceKind.StringVariableReader;
                    argument.HasReference = true;
                }

                break;
            case ActionKind.pushv:
                switch (arguments.Length)
                {
                    case 2:
                        if (argument.TrailingTokenCount != 0)
                        {
                            result.ErrorAdd_InvalidMultipleTokenArgument("pushv", argument.TokenId, argument.TrailingTokenCount);
                        }
                        else
                        {
                            span = result.GetSpan(argument.TokenId);
                            if (span.IsEmpty)
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("pushv", 1, "StringVariableReader", argument.TokenId);
                            }
                            else if (span[0] == '@')
                            {
                                if (span.Length != 1)
                                {
                                    argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                    argument.HasReference = true;
                                }
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            }
                            else
                            {
                                if (context.CreateError(DiagnosticSeverity.Warning))
                                {
                                    result.ErrorAdd_UnexpectedArgumentReferenceKind("pushv", 1, "StringVariableReader", argument.TokenId);
                                }
                                argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span, argument.TokenId);
                                argument.HasReference = true;
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            }
                        }
                        argument = ref arguments[1];
                        if (argument.TrailingTokenCount == 0)
                        {
                            argument.ReferenceKind = ReferenceKind.NumberVariableWriter;
                            argument.ReferenceId = analysisResult.NumberVariableWriterSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                            argument.HasReference = true;
                        }
                        else
                        {
                            result.ErrorAdd_InvalidMultipleTokenArgument("pushv", argument.TokenId, argument.TrailingTokenCount);
                        }
                        break;
                    case 3:
                        if (argument.TrailingTokenCount != 0)
                        {
                            result.ErrorAdd_InvalidMultipleTokenArgument("pushv", argument.TokenId, argument.TrailingTokenCount);
                        }
                        else
                        {
                            span = result.GetSpan(argument.TokenId);
                            if (span.IsEmpty)
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("pushv", 1, "StringVariableReader", argument.TokenId);
                            }
                            else if (span[0] == '@')
                            {
                                if (span.Length != 1)
                                {
                                    argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                    argument.HasReference = true;
                                }
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            }
                            else
                            {
                                if (context.CreateError(DiagnosticSeverity.Warning))
                                {
                                    result.ErrorAdd_UnexpectedArgumentReferenceKind("pushv", 1, "StringVariableReader", argument.TokenId);
                                }
                                argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span, argument.TokenId);
                                argument.HasReference = true;
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            }
                        }
                        argument = ref arguments[1];
                        span = result.GetSpan(argument.TokenId);
                        if (span.Length > 1 && span[0] == '@')
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                        argument = ref arguments[2];
                        if (argument.TrailingTokenCount == 0)
                        {
                            argument.ReferenceKind = ReferenceKind.NumberVariableWriter;
                            argument.ReferenceId = analysisResult.NumberVariableWriterSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                            argument.HasReference = true;
                        }
                        else
                        {
                            result.ErrorAdd_InvalidMultipleTokenArgument("pushv", argument.TokenId, argument.TrailingTokenCount);
                        }
                        break;
                }
                break;
            case ActionKind.addUnit:
                // skip addUnit
                break;
            case ActionKind.addDiplo:
                switch (arguments.Length)
                {
                    case 2:
                        if (argument.TrailingTokenCount != 0)
                        {
                            result.ErrorAdd_InvalidMultipleTokenArgument("addDiplo", argument.TokenId, argument.TrailingTokenCount);
                        }
                        else
                        {
                            span = result.GetSpan(argument.TokenId);
                            if (span.IsEmpty)
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("addDiplo", 1, "StringVariableReader", argument.TokenId);
                            }
                            else if (span[0] == '@')
                            {
                                if (span.Length != 1)
                                {
                                    argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                    argument.HasReference = true;
                                }
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            }
                            else
                            {
                                if (context.CreateError(DiagnosticSeverity.Warning))
                                {
                                    result.ErrorAdd_UnexpectedArgumentReferenceKind("addDiplo", 1, "StringVariableReader", argument.TokenId);
                                }
                                argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span, argument.TokenId);
                                argument.HasReference = true;
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            }
                        }
                        argument = ref arguments[1];
                        if (argument.TrailingTokenCount != 0)
                        {
                            result.ErrorAdd_InvalidMultipleTokenArgument("addDiplo", argument.TokenId, argument.TrailingTokenCount);
                        }
                        else if (!argument.IsNumber)
                        {
                            argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                            argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                            argument.HasReference = true;
                        }
                        break;
                    case 3:
                        if (argument.TrailingTokenCount != 0)
                        {
                            result.ErrorAdd_InvalidMultipleTokenArgument("addDiplo", argument.TokenId, argument.TrailingTokenCount);
                        }
                        else
                        {
                            span = result.GetSpan(argument.TokenId);
                            if (span.IsEmpty)
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("addDiplo", 1, "Power", argument.TokenId);
                            }
                            else if (span[0] == '@')
                            {
                                if (span.Length != 1)
                                {
                                    argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                    argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                    argument.HasReference = true;
                                }
                            }
                            else
                            {
                                argument.ReferenceId = analysisResult.PowerSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Power;
                                argument.HasReference = true;
                            }
                        }
                        argument = ref arguments[1];
                        if (argument.TrailingTokenCount != 0)
                        {
                            result.ErrorAdd_InvalidMultipleTokenArgument("addDiplo", argument.TokenId, argument.TrailingTokenCount);
                        }
                        else
                        {
                            span = result.GetSpan(argument.TokenId);
                            if (span.IsEmpty)
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("addDiplo", 2, "Power", argument.TokenId);
                            }
                            else if (span[0] == '@')
                            {
                                if (span.Length != 1)
                                {
                                    argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                    argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                    argument.HasReference = true;
                                }
                            }
                            else
                            {
                                argument.ReferenceId = analysisResult.PowerSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Power;
                                argument.HasReference = true;
                            }
                        }
                        argument = ref arguments[2];
                        if (argument.TrailingTokenCount != 0)
                        {
                            result.ErrorAdd_InvalidMultipleTokenArgument("addDiplo", argument.TokenId, argument.TrailingTokenCount);
                        }
                        else if (!argument.IsNumber)
                        {
                            argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                            argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                            argument.HasReference = true;
                        }
                        break;
                }
                break;
            case ActionKind.setDiplo:
                switch (arguments.Length)
                {
                    case 2:
                        if (argument.TrailingTokenCount != 0)
                        {
                            result.ErrorAdd_InvalidMultipleTokenArgument("setDiplo", argument.TokenId, argument.TrailingTokenCount);
                        }
                        else
                        {
                            span = result.GetSpan(argument.TokenId);
                            if (span.IsEmpty)
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("setDiplo", 1, "StringVariableReader", argument.TokenId);
                            }
                            else if (span[0] == '@')
                            {
                                if (span.Length != 1)
                                {
                                    argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                    argument.HasReference = true;
                                }
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            }
                            else
                            {
                                if (context.CreateError(DiagnosticSeverity.Warning))
                                {
                                    result.ErrorAdd_UnexpectedArgumentReferenceKind("setDiplo", 1, "StringVariableReader", argument.TokenId);
                                }
                                argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span, argument.TokenId);
                                argument.HasReference = true;
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            }
                        }
                        argument = ref arguments[1];
                        if (argument.TrailingTokenCount != 0)
                        {
                            result.ErrorAdd_InvalidMultipleTokenArgument("setDiplo", argument.TokenId, argument.TrailingTokenCount);
                        }
                        else if (!argument.IsNumber)
                        {
                            argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                            argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                            argument.HasReference = true;
                        }
                        break;
                    case 3:
                        if (argument.TrailingTokenCount != 0)
                        {
                            result.ErrorAdd_InvalidMultipleTokenArgument("setDiplo", argument.TokenId, argument.TrailingTokenCount);
                        }
                        else
                        {
                            span = result.GetSpan(argument.TokenId);
                            if (span.IsEmpty)
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("setDiplo", 1, "Power", argument.TokenId);
                            }
                            else if (span[0] == '@')
                            {
                                if (span.Length != 1)
                                {
                                    argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                    argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                    argument.HasReference = true;
                                }
                            }
                            else
                            {
                                argument.ReferenceId = analysisResult.PowerSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Power;
                                argument.HasReference = true;
                            }
                        }
                        argument = ref arguments[1];
                        if (argument.TrailingTokenCount != 0)
                        {
                            result.ErrorAdd_InvalidMultipleTokenArgument("setDiplo", argument.TokenId, argument.TrailingTokenCount);
                        }
                        else
                        {
                            span = result.GetSpan(argument.TokenId);
                            if (span.IsEmpty)
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("setDiplo", 2, "Power", argument.TokenId);
                            }
                            else if (span[0] == '@')
                            {
                                if (span.Length != 1)
                                {
                                    argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                    argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                    argument.HasReference = true;
                                }
                            }
                            else
                            {
                                argument.ReferenceId = analysisResult.PowerSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Power;
                                argument.HasReference = true;
                            }
                        }
                        argument = ref arguments[2];
                        if (argument.TrailingTokenCount != 0)
                        {
                            result.ErrorAdd_InvalidMultipleTokenArgument("setDiplo", argument.TokenId, argument.TrailingTokenCount);
                        }
                        else if (!argument.IsNumber)
                        {
                            argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                            argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                            argument.HasReference = true;
                        }
                        break;
                }
                break;
            case ActionKind.setTruce:
                switch (arguments.Length)
                {
                    case 2:
                        if (argument.TrailingTokenCount != 0)
                        {
                            result.ErrorAdd_InvalidMultipleTokenArgument("setTruce", argument.TokenId, argument.TrailingTokenCount);
                        }
                        else
                        {
                            span = result.GetSpan(argument.TokenId);
                            if (span.IsEmpty)
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("setTruce", 1, "StringVariableReader", argument.TokenId);
                            }
                            else if (span[0] == '@')
                            {
                                if (span.Length != 1)
                                {
                                    argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                    argument.HasReference = true;
                                }
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            }
                            else
                            {
                                if (context.CreateError(DiagnosticSeverity.Warning))
                                {
                                    result.ErrorAdd_UnexpectedArgumentReferenceKind("setTruce", 1, "StringVariableReader", argument.TokenId);
                                }
                                argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span, argument.TokenId);
                                argument.HasReference = true;
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            }
                        }
                        argument = ref arguments[1];
                        if (argument.TrailingTokenCount != 0)
                        {
                            result.ErrorAdd_InvalidMultipleTokenArgument("setTruce", argument.TokenId, argument.TrailingTokenCount);
                        }
                        else if (!argument.IsNumber)
                        {
                            argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                            argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                            argument.HasReference = true;
                        }
                        break;
                    case 3:
                        if (argument.TrailingTokenCount != 0)
                        {
                            result.ErrorAdd_InvalidMultipleTokenArgument("setTruce", argument.TokenId, argument.TrailingTokenCount);
                        }
                        else
                        {
                            span = result.GetSpan(argument.TokenId);
                            if (span.IsEmpty)
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("setTruce", 1, "Power", argument.TokenId);
                            }
                            else if (span[0] == '@')
                            {
                                if (span.Length != 1)
                                {
                                    argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                    argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                    argument.HasReference = true;
                                }
                            }
                            else
                            {
                                argument.ReferenceId = analysisResult.PowerSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Power;
                                argument.HasReference = true;
                            }
                        }
                        argument = ref arguments[1];
                        if (argument.TrailingTokenCount != 0)
                        {
                            result.ErrorAdd_InvalidMultipleTokenArgument("setTruce", argument.TokenId, argument.TrailingTokenCount);
                        }
                        else
                        {
                            span = result.GetSpan(argument.TokenId);
                            if (span.IsEmpty)
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("setTruce", 2, "Power", argument.TokenId);
                            }
                            else if (span[0] == '@')
                            {
                                if (span.Length != 1)
                                {
                                    argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                    argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                    argument.HasReference = true;
                                }
                            }
                            else
                            {
                                argument.ReferenceId = analysisResult.PowerSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Power;
                                argument.HasReference = true;
                            }
                        }
                        argument = ref arguments[2];
                        if (argument.TrailingTokenCount != 0)
                        {
                            result.ErrorAdd_InvalidMultipleTokenArgument("setTruce", argument.TokenId, argument.TrailingTokenCount);
                        }
                        else if (!argument.IsNumber)
                        {
                            argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                            argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                            argument.HasReference = true;
                        }
                        break;
                }
                break;
            case ActionKind.equipItem:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("equipItem", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("equipItem", 1, "Unit", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.UnitSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Unit;
                        argument.HasReference = true;
                    }
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("equipItem", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("equipItem", 2, "Skill", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.SkillSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Skill;
                        argument.HasReference = true;
                    }
                }

                if (arguments.Length <= 2)
                {
                    break;
                }
                argument = ref arguments[2];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("equipItem", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber && (argument.HasReference = PerResultValidator.IsBoolean(result.GetSpan(argument.TokenId), out argument.ReferenceId)))
                {
                    argument.ReferenceKind = ReferenceKind.Boolean;
                }
                else
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("equipItem", 3, "Boolean", argument.TokenId);
                }

                break;
            case ActionKind.setLeague:
                switch (arguments.Length)
                {
                    case 2:
                        if (argument.TrailingTokenCount != 0)
                        {
                            result.ErrorAdd_InvalidMultipleTokenArgument("setLeague", argument.TokenId, argument.TrailingTokenCount);
                        }
                        else
                        {
                            span = result.GetSpan(argument.TokenId);
                            if (span.IsEmpty)
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("setLeague", 1, "StringVariableReader", argument.TokenId);
                            }
                            else if (span[0] == '@')
                            {
                                if (span.Length != 1)
                                {
                                    argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                    argument.HasReference = true;
                                }
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            }
                            else
                            {
                                if (context.CreateError(DiagnosticSeverity.Warning))
                                {
                                    result.ErrorAdd_UnexpectedArgumentReferenceKind("setLeague", 1, "StringVariableReader", argument.TokenId);
                                }
                                argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span, argument.TokenId);
                                argument.HasReference = true;
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            }
                        }
                        argument = ref arguments[1];
                        if (argument.TrailingTokenCount != 0)
                        {
                            result.ErrorAdd_InvalidMultipleTokenArgument("setLeague", argument.TokenId, argument.TrailingTokenCount);
                        }
                        else if (!argument.IsNumber)
                        {
                            argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                            argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                            argument.HasReference = true;
                        }
                        break;
                    case 3:
                        if (argument.TrailingTokenCount != 0)
                        {
                            result.ErrorAdd_InvalidMultipleTokenArgument("setLeague", argument.TokenId, argument.TrailingTokenCount);
                        }
                        else
                        {
                            span = result.GetSpan(argument.TokenId);
                            if (span.IsEmpty)
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("setLeague", 1, "Power", argument.TokenId);
                            }
                            else if (span[0] == '@')
                            {
                                if (span.Length != 1)
                                {
                                    argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                    argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                    argument.HasReference = true;
                                }
                            }
                            else
                            {
                                argument.ReferenceId = analysisResult.PowerSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Power;
                                argument.HasReference = true;
                            }
                        }
                        argument = ref arguments[1];
                        if (argument.TrailingTokenCount != 0)
                        {
                            result.ErrorAdd_InvalidMultipleTokenArgument("setLeague", argument.TokenId, argument.TrailingTokenCount);
                        }
                        else
                        {
                            span = result.GetSpan(argument.TokenId);
                            if (span.IsEmpty)
                            {
                                result.ErrorAdd_UnexpectedArgumentReferenceKind("setLeague", 2, "Power", argument.TokenId);
                            }
                            else if (span[0] == '@')
                            {
                                if (span.Length != 1)
                                {
                                    argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                    argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                    argument.HasReference = true;
                                }
                            }
                            else
                            {
                                argument.ReferenceId = analysisResult.PowerSet.GetOrAdd(span, argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.Power;
                                argument.HasReference = true;
                            }
                        }
                        argument = ref arguments[2];
                        if (argument.TrailingTokenCount != 0)
                        {
                            result.ErrorAdd_InvalidMultipleTokenArgument("setLeague", argument.TokenId, argument.TrailingTokenCount);
                        }
                        else if (!argument.IsNumber)
                        {
                            argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                            argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                            argument.HasReference = true;
                        }
                        break;
                }
                break;
            case ActionKind.skillTroop:
                // skip skillTroop
                break;
            case ActionKind.index:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("index", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("index", 1, "StringVariableReader", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.HasReference = true;
                        }
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                    }
                    else
                    {
                        if (context.CreateError(DiagnosticSeverity.Warning))
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("index", 1, "StringVariableReader", argument.TokenId);
                        }
                        argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span, argument.TokenId);
                        argument.HasReference = true;
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                    }
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("index", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                argument = ref arguments[2];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("index", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("index", 3, "StringVariableWriter", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length == 1)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("index", 3, "StringVariableWriter", argument.TokenId);
                        }
                        else
                        {
                            argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.HasReference = true;
                        }
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                    else
                    {
                        if (context.CreateError(DiagnosticSeverity.Warning))
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("index", 3, "StringVariableWriter", argument.TokenId);
                        }
                        argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span, argument.TokenId);
                        argument.HasReference = true;
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                }

                break;
            case ActionKind.storeIndex:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("storeIndex", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("storeIndex", 1, "StringVariableReader", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.HasReference = true;
                        }
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                    }
                    else
                    {
                        if (context.CreateError(DiagnosticSeverity.Warning))
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("storeIndex", 1, "StringVariableReader", argument.TokenId);
                        }
                        argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span, argument.TokenId);
                        argument.HasReference = true;
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                    }
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("storeIndex", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                argument = ref arguments[2];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("storeIndex", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("storeIndex", 3, "StringVariableWriter", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length == 1)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("storeIndex", 3, "StringVariableWriter", argument.TokenId);
                        }
                        else
                        {
                            argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.HasReference = true;
                        }
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                    else
                    {
                        if (context.CreateError(DiagnosticSeverity.Warning))
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("storeIndex", 3, "StringVariableWriter", argument.TokenId);
                        }
                        argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span, argument.TokenId);
                        argument.HasReference = true;
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                }

                break;
            case ActionKind.storeIndexVar:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("storeIndexVar", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("storeIndexVar", 1, "StringVariableReader", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.HasReference = true;
                        }
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                    }
                    else
                    {
                        if (context.CreateError(DiagnosticSeverity.Warning))
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("storeIndexVar", 1, "StringVariableReader", argument.TokenId);
                        }
                        argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span, argument.TokenId);
                        argument.HasReference = true;
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                    }
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("storeIndexVar", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                argument = ref arguments[2];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("storeIndexVar", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("storeIndexVar", 3, "StringVariableWriter", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length == 1)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("storeIndexVar", 3, "StringVariableWriter", argument.TokenId);
                        }
                        else
                        {
                            argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.HasReference = true;
                        }
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                    else
                    {
                        if (context.CreateError(DiagnosticSeverity.Warning))
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("storeIndexVar", 3, "StringVariableWriter", argument.TokenId);
                        }
                        argument.ReferenceId = analysisResult.StringVariableWriterSet.GetOrAdd(span, argument.TokenId);
                        argument.HasReference = true;
                        argument.ReferenceKind = ReferenceKind.StringVariableWriter;
                    }
                }

                break;
            case ActionKind.addStatus:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("addStatus", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("addStatus", 1, "Unit", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.UnitSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Unit;
                        argument.HasReference = true;
                    }
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("addStatus", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (argument.IsNumber)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("addStatus", 2, "Status, StringVariableReader", argument.TokenId);
                    }
                    else if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("addStatus", 2, "Status, StringVariableReader", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length == 1)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("addStatus", 2, "Status, StringVariableReader", argument.TokenId);
                        }
                        else
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else if (argument.HasReference = PerResultValidator.IsStatus(span, out argument.ReferenceId))
                    {
                        argument.ReferenceKind = ReferenceKind.Status;
                    }
                    else
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("addStatus", 2, "Status, StringVariableReader", argument.TokenId);
                    }
                }

                argument = ref arguments[2];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("addStatus", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                break;
            case ActionKind.pushDiplo:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("pushDiplo", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("pushDiplo", 1, "Power", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.PowerSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Power;
                        argument.HasReference = true;
                    }
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("pushDiplo", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("pushDiplo", 2, "Power", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.PowerSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Power;
                        argument.HasReference = true;
                    }
                }

                argument = ref arguments[2];
                if (argument.TrailingTokenCount == 0)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableWriter;
                    argument.ReferenceId = analysisResult.NumberVariableWriterSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }
                else
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("pushDiplo", argument.TokenId, argument.TrailingTokenCount);
                }

                break;
            case ActionKind.setArbeit:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("setArbeit", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("setArbeit", 1, "Power", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.PowerSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Power;
                        argument.HasReference = true;
                    }
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("setArbeit", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("setArbeit", 2, "Unit", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.UnitSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Unit;
                        argument.HasReference = true;
                    }
                }

                argument = ref arguments[2];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("setArbeit", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                break;
            case ActionKind.setStatus:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("setStatus", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("setStatus", 1, "Unit", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.UnitSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Unit;
                        argument.HasReference = true;
                    }
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("setStatus", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (argument.IsNumber)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("setStatus", 2, "Status, StringVariableReader", argument.TokenId);
                    }
                    else if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("setStatus", 2, "Status, StringVariableReader", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length == 1)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("setStatus", 2, "Status, StringVariableReader", argument.TokenId);
                        }
                        else
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else if (argument.HasReference = PerResultValidator.IsStatus(span, out argument.ReferenceId))
                    {
                        argument.ReferenceKind = ReferenceKind.Status;
                    }
                    else
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("setStatus", 2, "Status, StringVariableReader", argument.TokenId);
                    }
                }

                argument = ref arguments[2];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("setStatus", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                break;
            case ActionKind.pushStatus:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("pushStatus", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("pushStatus", 1, "Unit", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.UnitSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Unit;
                        argument.HasReference = true;
                    }
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("pushStatus", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber && (argument.HasReference = PerResultValidator.IsStatus(result.GetSpan(argument.TokenId), out argument.ReferenceId)))
                {
                    argument.ReferenceKind = ReferenceKind.Status;
                }
                else
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("pushStatus", 2, "Status", argument.TokenId);
                }

                argument = ref arguments[2];
                if (argument.TrailingTokenCount == 0)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableWriter;
                    argument.ReferenceId = analysisResult.NumberVariableWriterSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }
                else
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("pushStatus", argument.TokenId, argument.TrailingTokenCount);
                }

                break;
            case ActionKind.pushSpotPos:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("pushSpotPos", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("pushSpotPos", 1, "Spot", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.SpotSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Spot;
                        argument.HasReference = true;
                    }
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount == 0)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableWriter;
                    argument.ReferenceId = analysisResult.NumberVariableWriterSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }
                else
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("pushSpotPos", argument.TokenId, argument.TrailingTokenCount);
                }

                argument = ref arguments[2];
                if (argument.TrailingTokenCount == 0)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableWriter;
                    argument.ReferenceId = analysisResult.NumberVariableWriterSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }
                else
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("pushSpotPos", argument.TokenId, argument.TrailingTokenCount);
                }

                break;
            case ActionKind.setEnemyPower:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("setEnemyPower", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("setEnemyPower", 1, "Power", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.PowerSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Power;
                        argument.HasReference = true;
                    }
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("setEnemyPower", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("setEnemyPower", 2, "Power", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.PowerSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Power;
                        argument.HasReference = true;
                    }
                }

                argument = ref arguments[2];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("setEnemyPower", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                break;
            case ActionKind.shadow:
                if (argument.TrailingTokenCount != 0 || !argument.IsNumber)
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("shadow", 1, "Number", argument.TokenId);
                }

                if (arguments.Length <= 1)
                {
                    break;
                }
                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0 || !argument.IsNumber)
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("shadow", 2, "Number", argument.TokenId);
                }

                if (arguments.Length <= 2)
                {
                    break;
                }
                argument = ref arguments[2];
                if (argument.TrailingTokenCount != 0 || !argument.IsNumber)
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("shadow", 3, "Number", argument.TokenId);
                }

                if (arguments.Length <= 3)
                {
                    break;
                }
                argument = ref arguments[3];
                if (argument.TrailingTokenCount != 0 || !argument.IsNumber)
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("shadow", 4, "Number", argument.TokenId);
                }

                if (arguments.Length <= 4)
                {
                    break;
                }
                argument = ref arguments[4];
                if (argument.TrailingTokenCount != 0 || !argument.IsNumber)
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("shadow", 5, "Number", argument.TokenId);
                }

                if (arguments.Length <= 5)
                {
                    break;
                }
                argument = ref arguments[5];
                if (argument.TrailingTokenCount != 0 || !argument.IsNumber)
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("shadow", 6, "Number", argument.TokenId);
                }

                break;
            case ActionKind.doskill:
                if (argument.TrailingTokenCount == 0)
                {
                    argument.ReferenceKind = ReferenceKind.Skill;
                    argument.ReferenceId = analysisResult.SkillSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }
                else
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("doskill", argument.TokenId, argument.TrailingTokenCount);
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("doskill", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                argument = ref arguments[2];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("doskill", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                argument = ref arguments[3];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("doskill", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                argument = ref arguments[4];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("doskill", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber && (argument.HasReference = PerResultValidator.IsBoolean(result.GetSpan(argument.TokenId), out argument.ReferenceId)))
                {
                    argument.ReferenceKind = ReferenceKind.Boolean;
                }
                else
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("doskill", 5, "Boolean", argument.TokenId);
                }

                break;
            case ActionKind.storeRectUnit:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("storeRectUnit", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber && (argument.HasReference = PerResultValidator.IsRedBlue(result.GetSpan(argument.TokenId), out argument.ReferenceId)))
                {
                    argument.ReferenceKind = ReferenceKind.RedBlue;
                }
                else
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("storeRectUnit", 1, "RedBlue", argument.TokenId);
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("storeRectUnit", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                argument = ref arguments[2];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("storeRectUnit", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                argument = ref arguments[3];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("storeRectUnit", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                argument = ref arguments[4];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("storeRectUnit", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                argument = ref arguments[5];
                if (argument.TrailingTokenCount == 0)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableWriter;
                    argument.ReferenceId = analysisResult.NumberVariableWriterSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }
                else
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("storeRectUnit", argument.TokenId, argument.TrailingTokenCount);
                }

                break;
            case ActionKind.loopBGM:
                argument.ReferenceKind = ReferenceKind.bgm;
                argument.ReferenceId = analysisResult.bgmSet.GetOrAdd(result.GetSpan(argument.TokenId, argument.TrailingTokenCount), argument.TokenId);
                argument.HasReference = true;

                for (int i = 1; i < arguments.Length; ++i)
                {
                    argument = ref arguments[i];
                    argument.ReferenceKind = ReferenceKind.bgm;
                    argument.ReferenceId = analysisResult.bgmSet.GetOrAdd(result.GetSpan(argument.TokenId, argument.TrailingTokenCount), argument.TokenId);
                    argument.HasReference = true;

                }
                break;
            case ActionKind.darkness:
                if (argument.TrailingTokenCount != 0 || !argument.IsNumber)
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("darkness", 1, "Number", argument.TokenId);
                }

                if (arguments.Length <= 1)
                {
                    break;
                }
                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0 || !argument.IsNumber)
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("darkness", 2, "Number", argument.TokenId);
                }

                if (arguments.Length <= 2)
                {
                    break;
                }
                argument = ref arguments[2];
                if (argument.TrailingTokenCount != 0 || !argument.IsNumber)
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("darkness", 3, "Number", argument.TokenId);
                }

                if (arguments.Length <= 3)
                {
                    break;
                }
                argument = ref arguments[3];
                if (argument.TrailingTokenCount != 0 || !argument.IsNumber)
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("darkness", 4, "Number", argument.TokenId);
                }

                break;
            case ActionKind.linkSpot:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("linkSpot", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("linkSpot", 1, "Spot", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.SpotSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Spot;
                        argument.HasReference = true;
                    }
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("linkSpot", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("linkSpot", 2, "Spot", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.SpotSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Spot;
                        argument.HasReference = true;
                    }
                }

                if (arguments.Length <= 2)
                {
                    break;
                }
                argument = ref arguments[2];
                if (argument.TrailingTokenCount == 0)
                {
                    argument.ReferenceKind = ReferenceKind.imagedata;
                    argument.ReferenceId = analysisResult.imagedataSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }
                else
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("linkSpot", argument.TokenId, argument.TrailingTokenCount);
                }

                if (arguments.Length <= 3)
                {
                    break;
                }
                argument = ref arguments[3];
                if (argument.TrailingTokenCount != 0 || !argument.IsNumber)
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("linkSpot", 4, "Number", argument.TokenId);
                }

                break;
            case ActionKind.linkEscape:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("linkEscape", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("linkEscape", 1, "Spot", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.SpotSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Spot;
                        argument.HasReference = true;
                    }
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("linkEscape", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("linkEscape", 2, "Spot", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.SpotSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Spot;
                        argument.HasReference = true;
                    }
                }

                if (arguments.Length <= 2)
                {
                    break;
                }
                argument = ref arguments[2];
                if (argument.TrailingTokenCount == 0)
                {
                    argument.ReferenceKind = ReferenceKind.imagedata;
                    argument.ReferenceId = analysisResult.imagedataSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }
                else
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("linkEscape", argument.TokenId, argument.TrailingTokenCount);
                }

                if (arguments.Length <= 3)
                {
                    break;
                }
                argument = ref arguments[3];
                if (argument.TrailingTokenCount != 0 || !argument.IsNumber)
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("linkEscape", 4, "Number", argument.TokenId);
                }

                break;
            case ActionKind.showChara:
                if (argument.TrailingTokenCount == 0)
                {
                    argument.ReferenceKind = ReferenceKind.imagedata;
                    argument.ReferenceId = analysisResult.imagedataSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }
                else
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("showChara", argument.TokenId, argument.TrailingTokenCount);
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("showChara", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                argument = ref arguments[2];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("showChara", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                if (arguments.Length <= 3)
                {
                    break;
                }
                argument = ref arguments[3];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("showChara", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                if (arguments.Length <= 4)
                {
                    break;
                }
                argument = ref arguments[4];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("showChara", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                break;
            case ActionKind.shiftTroop2:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("shiftTroop2", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("shiftTroop2", 1, "Unit", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.UnitSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Unit;
                        argument.HasReference = true;
                    }
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("shiftTroop2", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                argument = ref arguments[2];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("shiftTroop2", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                argument = ref arguments[3];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("shiftTroop2", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber && (argument.HasReference = PerResultValidator.IsBoolean(result.GetSpan(argument.TokenId), out argument.ReferenceId)))
                {
                    argument.ReferenceKind = ReferenceKind.Boolean;
                }
                else
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("shiftTroop2", 4, "Boolean", argument.TokenId);
                }

                break;
        }
    }

    public static bool ArgumentCountValidation(ref Context context, ref Result result, ActionKind kind, int count, uint index)
    {
        if (count < 0)
        {
            return false;
        }

		switch (kind)
        {
            case ActionKind.pushDeath:
                if (count < 6)
                {
                    result.ErrorAdd_TooLessArguments(kind, count, 6, index);
                    return false;
                }
                else if (count > 6)
                {
                    result.ErrorAdd_TooManyArguments(kind, count, 6, index);
                    return false;
                }
                break;
            case ActionKind.setPowerHome:
            case ActionKind.dialog:
            case ActionKind.dialogF:
            case ActionKind.hideImage:
            case ActionKind.hideFace:
            case ActionKind.hidePicture:
            case ActionKind.bg:
            case ActionKind.locate:
            case ActionKind.scroll:
            case ActionKind.scroll2:
            case ActionKind.addSpot:
            case ActionKind.showSpotMark:
            case ActionKind.resetTruce:
            case ActionKind.resetLeague:
            case ActionKind.resetEnemyPower:
				if (count < 1)
                {
                    result.ErrorAdd_TooLessArguments(kind, count, 1, index);
                    return false;
                }
                else if (count > 2)
                {
                    result.ErrorAdd_TooManyArguments(kind, count, 2, index);
                    return false;
                }
                break;
            case ActionKind.msg:
            case ActionKind.msg2:
            case ActionKind.talk:
            case ActionKind.talk2:
            case ActionKind.chat:
            case ActionKind.chat2:
            case ActionKind.@event:
            case ActionKind.changeMaster:
				if (count < 1)
                {
                    result.ErrorAdd_TooLessArguments(kind, count, 1, index);
                    return false;
                }
                else if (count > 3)
                {
                    result.ErrorAdd_TooManyArguments(kind, count, 3, index);
                    return false;
                }
                break;
            case ActionKind.select:
            case ActionKind.add:
            case ActionKind.div:
            case ActionKind.mod:
            case ActionKind.mul:
            case ActionKind.per:
            case ActionKind.set:
            case ActionKind.sub:
            case ActionKind.addv:
            case ActionKind.setv:
            case ActionKind.subv:
            case ActionKind.setPM:
            case ActionKind.setud:
            case ActionKind.storeud:
            case ActionKind.title:
            case ActionKind.addstr:
            case ActionKind.addVar:
            case ActionKind.setVar:
            case ActionKind.subVar:
            case ActionKind.title2:
            case ActionKind.addCapa:
            case ActionKind.addGain:
            case ActionKind.pushSex:
            case ActionKind.pushVar:
            case ActionKind.setCapa:
            case ActionKind.setDone:
            case ActionKind.setGain:
            case ActionKind.storePM:
            case ActionKind.levelup:
            case ActionKind.addLevel:
            case ActionKind.addLoyal:
            case ActionKind.addMoney:
            case ActionKind.addTrust:
            case ActionKind.hideLink:
            case ActionKind.pushCapa:
            case ActionKind.pushGain:
            case ActionKind.pushItem:
            case ActionKind.pushRank:
            case ActionKind.pushSpot:
            case ActionKind.setLevel:
            case ActionKind.setMoney:
            case ActionKind.hideEscape:
            case ActionKind.addCastle:
            case ActionKind.addMerits:
            case ActionKind.changeMap:
            case ActionKind.formTroop:
            case ActionKind.pushForce:
            case ActionKind.pushLevel:
            case ActionKind.pushLoyal:
            case ActionKind.pushMoney:
            case ActionKind.pushTrain:
            case ActionKind.pushTrust:
            case ActionKind.setCastle:
            case ActionKind.changeRace:
            case ActionKind.pushCastle:
            case ActionKind.pushMerits:
            case ActionKind.setDungeon:
            case ActionKind.speedTroop:
            case ActionKind.unionPower:
            case ActionKind.addTraining:
            case ActionKind.changeClass:
            case ActionKind.pushTrainUp:
            case ActionKind.removeSkill:
            case ActionKind.setTraining:
            case ActionKind.addBaseLevel:
            case ActionKind.changeCastle:
            case ActionKind.setBaseLevel:
            case ActionKind.addTrainingUp:
            case ActionKind.changeDungeon:
            case ActionKind.pushBaseLevel:
            case ActionKind.setTrainingUp:
            case ActionKind.storeNextSpot:
            case ActionKind.storeSkillset:
            case ActionKind.storeTodoUnit:
            case ActionKind.changePowerFix:
            case ActionKind.pushBattleHome:
            case ActionKind.pushBattleRect:
            case ActionKind.storeAliveUnit:
            case ActionKind.changePowerFlag:
            case ActionKind.changePowerName:
            case ActionKind.changeSpotImage:
            case ActionKind.setDungeonFloor:
            case ActionKind.storeRaceOfUnit:
            case ActionKind.storeSpotOfUnit:
            case ActionKind.storeUnitOfSpot:
            case ActionKind.storeClassOfUnit:
            case ActionKind.storePowerOfSpot:
            case ActionKind.storePowerOfUnit:
            case ActionKind.storeSkillOfUnit:
            case ActionKind.storeSpotOfPower:
            case ActionKind.storeTalentPower:
            case ActionKind.storeUnitOfPower:
            case ActionKind.storeLeaderOfSpot:
            case ActionKind.storeMasterOfUnit:
            case ActionKind.storeMemberOfUnit:
            case ActionKind.storePowerOfForce:
            case ActionKind.storeLeaderOfPower:
            case ActionKind.storeMasterOfPower:
            case ActionKind.storeRoamUnitOfSpot:
            case ActionKind.storeBaseClassOfUnit:
                if (count < 2)
                {
                    result.ErrorAdd_TooLessArguments(kind, count, 2, index);
                    return false;
                }
                else if (count > 2)
                {
                    result.ErrorAdd_TooManyArguments(kind, count, 2, index);
                    return false;
                }
                break;
            case ActionKind.choice:
            case ActionKind.addSkill:
            case ActionKind.addFriend:
            case ActionKind.addSkill2:
            case ActionKind.eraseUnit2:
            case ActionKind.addPowerMerce:
            case ActionKind.addPowerStaff:
            case ActionKind.addPowerMerce2:
            case ActionKind.addPowerStaff2:
                if (count < 2)
                {
                    result.ErrorAdd_TooLessArguments(kind, count, 2, index);
                    return false;
                }
                break;
            case ActionKind.exit:
            case ActionKind.wait:
            case ActionKind.focus:
            case ActionKind.shake:
            case ActionKind.fadein:
            case ActionKind.fadeout:
            case ActionKind.playBGM:
            case ActionKind.reloadMenu:
            case ActionKind.choiceTitle:
            case ActionKind.changePlayer:
            case ActionKind.setGameClear:
				if (count > 1)
                {
                    result.ErrorAdd_TooManyArguments(kind, count, 1, index);
                    return false;
                }
                break;
            case ActionKind.image:
            case ActionKind.image2:
            case ActionKind.showImage:
            case ActionKind.face:
            case ActionKind.face2:
            case ActionKind.showFace:
            case ActionKind.picture:
            case ActionKind.picture2:
            case ActionKind.showPict:
            case ActionKind.showPicture:
				if (count < 1)
                {
                    result.ErrorAdd_TooLessArguments(kind, count, 1, index);
                    return false;
                }
                else if (count > 5)
                {
                    result.ErrorAdd_TooManyArguments(kind, count, 5, index);
                    return false;
                }
                break;
            case ActionKind.stop:
            case ActionKind.win:
            case ActionKind.save:
            case ActionKind.erase:
            case ActionKind.stopBGM:
            case ActionKind.openGoal:
            case ActionKind.hideSpotMark:
            case ActionKind.closeGoal:
            case ActionKind.hideBlind:
            case ActionKind.playWorld:
            case ActionKind.resetTime:
            case ActionKind.resetZone:
            case ActionKind.showBlind:
            case ActionKind.terminate:
            case ActionKind.backScroll:
            case ActionKind.playBattle:
            case ActionKind.setWorldMusic:
            case ActionKind.resetWorldMusic:
            case ActionKind.clearBattleRecord:
				if (count != 0)
                {
                    result.ErrorAdd_TooManyArguments(kind, count, 0, index);
                    return false;
                }
                break;
            case ActionKind.call:
            case ActionKind.zoom:
            case ActionKind.clear:
            case ActionKind.playSE:
            case ActionKind.volume:
            case ActionKind.addItem:
            case ActionKind.minimap:
            case ActionKind.routine:
            case ActionKind.shuffle:
            case ActionKind.addLimit:
            case ActionKind.addPower:
            case ActionKind.clearVar:
            case ActionKind.exitItem:
            case ActionKind.hideSpot:
            case ActionKind.pushRand:
            case ActionKind.pushTurn:
            case ActionKind.roamUnit:
            case ActionKind.roamUnit2:
            case ActionKind.setLimit:
            case ActionKind.showSpot:
            case ActionKind.showParty:
            case ActionKind.ctrlTroop:
            case ActionKind.entryItem:
            case ActionKind.eraseItem:
            case ActionKind.eraseUnit:
            case ActionKind.freeTroop:
            case ActionKind.haltTroop:
            case ActionKind.hideChara:
            case ActionKind.pushLimit:
            case ActionKind.pushRand2:
            case ActionKind.endingRoll:
            case ActionKind.erasePower:
            case ActionKind.eraseTroop:
            case ActionKind.removeSpot:
            case ActionKind.shuffleVar:
            case ActionKind.sleepTroop:
            case ActionKind.activeTroop:
            case ActionKind.battleEvent:
            case ActionKind.removeTroop:
            case ActionKind.scrollSpeed:
            case ActionKind.showDungeon:
            case ActionKind.unctrlTroop:
            case ActionKind.retreatTroop:
            case ActionKind.reverseChara:
            case ActionKind.showPolitics:
            case ActionKind.storeAllSpot:
            case ActionKind.storeAllPower:
            case ActionKind.storeComPower:
            case ActionKind.storeNowPower:
            case ActionKind.eraseUnitTroop:
            case ActionKind.pushCountPower:
            case ActionKind.storeAllTalent:
            case ActionKind.erasePowerMerce:
            case ActionKind.erasePowerStaff:
            case ActionKind.storeBattleSpot:
            case ActionKind.storePlayerUnit:
            case ActionKind.storeAttackPower:
            case ActionKind.storeNeutralSpot:
            case ActionKind.storePlayerPower:
            case ActionKind.storeDefensePower:
            case ActionKind.storeSpotOfBattle:
            case ActionKind.storePowerOfAttack:
            case ActionKind.storeNonPlayerPower:
            case ActionKind.storePowerOfDefense:
                if (count < 1)
                {
                    result.ErrorAdd_TooLessArguments(kind, count, 1, index);
                    return false;
                }
                else if (count > 1)
                {
                    result.ErrorAdd_TooManyArguments(kind, count, 1, index);
                    return false;
                }
                break;
            case ActionKind.font:
            case ActionKind.fontc:
				if (count > 3)
                {
                    result.ErrorAdd_TooManyArguments(kind, count, 3, index);
                    return false;
                }
                break;
            case ActionKind.gread:
            case ActionKind.gwrite:
            case ActionKind.pushv:
            case ActionKind.addUnit:
            case ActionKind.addDiplo:
            case ActionKind.aimTroop:
            case ActionKind.setDiplo:
            case ActionKind.setTruce:
            case ActionKind.equipItem:
            case ActionKind.setLeague:
            case ActionKind.skillTroop:
				if (count < 2)
                {
                    result.ErrorAdd_TooLessArguments(kind, count, 2, index);
                    return false;
                }
                else if (count > 3)
                {
                    result.ErrorAdd_TooManyArguments(kind, count, 3, index);
                    return false;
                }
                break;
            case ActionKind.index:
            case ActionKind.storeIndex:
            case ActionKind.storeIndexVar:
            case ActionKind.pushCon:
            case ActionKind.addStatus:
            case ActionKind.pushDiplo:
            case ActionKind.setArbeit:
            case ActionKind.setStatus:
            case ActionKind.pushStatus:
            case ActionKind.pushSpotPos:
            case ActionKind.setEnemyPower:
                if (count < 3)
                {
                    result.ErrorAdd_TooLessArguments(kind, count, 3, index);
                    return false;
                }
                else if (count > 3)
                {
                    result.ErrorAdd_TooManyArguments(kind, count, 3, index);
                    return false;
                }
                break;
            case ActionKind.shadow:
				if (count > 6)
                {
                    result.ErrorAdd_TooManyArguments(kind, count, 6, index);
                    return false;
                }
                break;
            case ActionKind.doskill:
            case ActionKind.addTroop:
            case ActionKind.storeRectUnit:
                if (count < 5)
                {
                    result.ErrorAdd_TooLessArguments(kind, count, 5, index);
                    return false;
                }
                else if (count > 5)
                {
                    result.ErrorAdd_TooManyArguments(kind, count, 5, index);
                    return false;
                }
                break;
            case ActionKind.loopBGM:
            case ActionKind.stopTroop:
            case ActionKind.eraseSkill:
            case ActionKind.eraseFriend:
                if (count < 1)
                {
                    result.ErrorAdd_TooLessArguments(kind, count, 1, index);
                    return false;
                }
                break;
            case ActionKind.darkness:
				if (count > 4)
                {
                    result.ErrorAdd_TooManyArguments(kind, count, 4, index);
                    return false;
                }
                break;
            case ActionKind.linkSpot:
            case ActionKind.moveTroop:
            case ActionKind.moveTroopFix:
            case ActionKind.smoveTroop:
            case ActionKind.smoveTroopFix:
            case ActionKind.linkEscape:
				if (count < 2)
                {
                    result.ErrorAdd_TooLessArguments(kind, count, 2, index);
                    return false;
                }
                else if (count > 4)
                {
                    result.ErrorAdd_TooManyArguments(kind, count, 4, index);
                    return false;
                }
                break;
            case ActionKind.spotmark:
				if (count > 2)
                {
                    result.ErrorAdd_TooManyArguments(kind, count, 2, index);
                    return false;
                }
                break;
            case ActionKind.showChara:
				if (count < 3)
                {
                    result.ErrorAdd_TooLessArguments(kind, count, 3, index);
                    return false;
                }
                else if (count > 5)
                {
                    result.ErrorAdd_TooManyArguments(kind, count, 5, index);
                    return false;
                }
                break;
            case ActionKind.shiftTroop:
				if (count < 3)
                {
                    result.ErrorAdd_TooLessArguments(kind, count, 3, index);
                    return false;
                }
                else if (count > 4)
                {
                    result.ErrorAdd_TooManyArguments(kind, count, 4, index);
                    return false;
                }
                break;
            case ActionKind.shiftTroop2:
                if (count < 4)
                {
                    result.ErrorAdd_TooLessArguments(kind, count, 4, index);
                    return false;
                }
                else if (count > 4)
                {
                    result.ErrorAdd_TooManyArguments(kind, count, 4, index);
                    return false;
                }
                break;
        }
        return true;
	}

    public static void AddReferenceAndValidateCallFunction(ref Context context, ref Result result, AnalysisResult analysisResult, CallFunctionExpression call)
    {
        var arguments = call.Arguments.AsSpan();
        if (arguments.IsEmpty)
        {
            return;
        }

        ref var argument = ref arguments[0];
        ReadOnlySpan<char> span;
        switch (call.Kind)
        {
            case FunctionKind.isSelect:
                if (context.CreateError(DiagnosticSeverity.Warning))
                {
                    result.WarningAdd($"Unknown action 'isSelect'.", call.TokenId);
                }
                break;
            case FunctionKind.isWhoDead:
                if (context.CreateError(DiagnosticSeverity.Warning))
                {
                    result.WarningAdd($"Unknown action 'isWhoDead'.", call.TokenId);
                }
                break;
            case FunctionKind.isGameOver:
                if (context.CreateError(DiagnosticSeverity.Warning))
                {
                    result.WarningAdd($"Unknown action 'isGameOver'.", call.TokenId);
                }
                break;
            case FunctionKind.has:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("has", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("has", 1, "StringVariableReader", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.HasReference = true;
                        }
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                    }
                    else
                    {
                        if (context.CreateError(DiagnosticSeverity.Warning))
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("has", 1, "StringVariableReader", argument.TokenId);
                        }
                        argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span, argument.TokenId);
                        argument.HasReference = true;
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                    }
                }

                argument = ref arguments[1];
                span = result.GetSpan(argument.TokenId);
                if (span.Length > 1 && span[0] == '@')
                {
                    argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                    argument.ReferenceKind = ReferenceKind.StringVariableReader;
                    argument.HasReference = true;
                }

                for (int i = 2; i < arguments.Length; ++i)
                {
                    argument = ref arguments[i];
                    span = result.GetSpan(argument.TokenId);
                    if (span.Length > 1 && span[0] == '@')
                    {
                        argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }

                }
                break;
            case FunctionKind.inVar:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("inVar", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("inVar", 1, "StringVariableReader", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.HasReference = true;
                        }
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                    }
                    else
                    {
                        if (context.CreateError(DiagnosticSeverity.Warning))
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("inVar", 1, "StringVariableReader", argument.TokenId);
                        }
                        argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span, argument.TokenId);
                        argument.HasReference = true;
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                    }
                }

                argument = ref arguments[1];
                span = result.GetSpan(argument.TokenId);
                if (span.Length > 1 && span[0] == '@')
                {
                    argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                    argument.ReferenceKind = ReferenceKind.StringVariableReader;
                    argument.HasReference = true;
                }

                for (int i = 2; i < arguments.Length; ++i)
                {
                    argument = ref arguments[i];
                    span = result.GetSpan(argument.TokenId);
                    if (span.Length > 1 && span[0] == '@')
                    {
                        argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                        argument.HasReference = true;
                    }

                }
                break;
            case FunctionKind.inSpot:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("inSpot", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("inSpot", 1, "Spot", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.SpotSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Spot;
                        argument.HasReference = true;
                    }
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("inSpot", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("inSpot", 2, "Unit", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.UnitSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Unit;
                        argument.HasReference = true;
                    }
                }

                for (int i = 2; i < arguments.Length; ++i)
                {
                    argument = ref arguments[i];
                    if (argument.TrailingTokenCount != 0)
                    {
                        result.ErrorAdd_InvalidMultipleTokenArgument("inSpot", argument.TokenId, argument.TrailingTokenCount);
                    }
                    else
                    {
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("inSpot", i + 1, "Unit", argument.TokenId);
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length != 1)
                            {
                                argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            argument.ReferenceId = analysisResult.UnitSet.GetOrAdd(span, argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.Unit;
                            argument.HasReference = true;
                        }
                    }

                }
                break;
            case FunctionKind.inRoamSpot:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("inRoamSpot", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("inRoamSpot", 1, "Spot", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.SpotSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Spot;
                        argument.HasReference = true;
                    }
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("inRoamSpot", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("inRoamSpot", 2, "Unit", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.UnitSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Unit;
                        argument.HasReference = true;
                    }
                }

                for (int i = 2; i < arguments.Length; ++i)
                {
                    argument = ref arguments[i];
                    if (argument.TrailingTokenCount != 0)
                    {
                        result.ErrorAdd_InvalidMultipleTokenArgument("inRoamSpot", argument.TokenId, argument.TrailingTokenCount);
                    }
                    else
                    {
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("inRoamSpot", i + 1, "Unit", argument.TokenId);
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length != 1)
                            {
                                argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            argument.ReferenceId = analysisResult.UnitSet.GetOrAdd(span, argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.Unit;
                            argument.HasReference = true;
                        }
                    }

                }
                break;
            case FunctionKind.yet:
                if (argument.TrailingTokenCount == 0)
                {
                    argument.ReferenceKind = ReferenceKind.Event;
                    argument.ReferenceId = analysisResult.EventSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }
                else
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("yet", argument.TokenId, argument.TrailingTokenCount);
                }

                break;
            case FunctionKind.count:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("count", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("count", 1, "StringVariableReader", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.HasReference = true;
                        }
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                    }
                    else
                    {
                        if (context.CreateError(DiagnosticSeverity.Warning))
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("count", 1, "StringVariableReader", argument.TokenId);
                        }
                        argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span, argument.TokenId);
                        argument.HasReference = true;
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                    }
                }

                break;
            case FunctionKind.amount:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("amount", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("amount", 1, "StringVariableReader", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.HasReference = true;
                        }
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                    }
                    else
                    {
                        if (context.CreateError(DiagnosticSeverity.Warning))
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("amount", 1, "StringVariableReader", argument.TokenId);
                        }
                        argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span, argument.TokenId);
                        argument.HasReference = true;
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                    }
                }

                break;
            case FunctionKind.conVar:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("conVar", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("conVar", 1, "StringVariableReader", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.HasReference = true;
                        }
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                    }
                    else
                    {
                        if (context.CreateError(DiagnosticSeverity.Warning))
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("conVar", 1, "StringVariableReader", argument.TokenId);
                        }
                        argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span, argument.TokenId);
                        argument.HasReference = true;
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                    }
                }

                break;
            case FunctionKind.isDone:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("isDone", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("isDone", 1, "Unit", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.UnitSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Unit;
                        argument.HasReference = true;
                    }
                }

                break;
            case FunctionKind.getLife:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("getLife", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("getLife", 1, "Unit", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.UnitSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Unit;
                        argument.HasReference = true;
                    }
                }

                break;
            case FunctionKind.countVar:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("countVar", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("countVar", 1, "StringVariableReader", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.HasReference = true;
                        }
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                    }
                    else
                    {
                        if (context.CreateError(DiagnosticSeverity.Warning))
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("countVar", 1, "StringVariableReader", argument.TokenId);
                        }
                        argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span, argument.TokenId);
                        argument.HasReference = true;
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                    }
                }

                break;
            case FunctionKind.isActive:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("isActive", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("isActive", 1, "Unit", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.UnitSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Unit;
                        argument.HasReference = true;
                    }
                }

                break;
            case FunctionKind.isArbeit:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("isArbeit", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("isArbeit", 1, "Unit", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.UnitSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Unit;
                        argument.HasReference = true;
                    }
                }

                break;
            case FunctionKind.isEnable:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("isEnable", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("isEnable", 1, "Unit", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.UnitSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Unit;
                        argument.HasReference = true;
                    }
                }

                break;
            case FunctionKind.isInvade:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("isInvade", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("isInvade", 1, "Power", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.PowerSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Power;
                        argument.HasReference = true;
                    }
                }

                break;
            case FunctionKind.isLeader:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("isLeader", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("isLeader", 1, "Unit", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.UnitSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Unit;
                        argument.HasReference = true;
                    }
                }

                break;
            case FunctionKind.isMaster:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("isMaster", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("isMaster", 1, "Unit", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.UnitSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Unit;
                        argument.HasReference = true;
                    }
                }

                break;
            case FunctionKind.isRoamer:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("isRoamer", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("isRoamer", 1, "Unit", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.UnitSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Unit;
                        argument.HasReference = true;
                    }
                }

                break;
            case FunctionKind.isTalent:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("isTalent", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("isTalent", 1, "Unit", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.UnitSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Unit;
                        argument.HasReference = true;
                    }
                }

                break;
            case FunctionKind.isVassal:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("isVassal", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("isVassal", 1, "Unit", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.UnitSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Unit;
                        argument.HasReference = true;
                    }
                }

                break;
            case FunctionKind.countGain:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("countGain", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("countGain", 1, "Power", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.PowerSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Power;
                        argument.HasReference = true;
                    }
                }

                break;
            case FunctionKind.countSpot:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("countSpot", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("countSpot", 1, "Power", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.PowerSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Power;
                        argument.HasReference = true;
                    }
                }

                break;
            case FunctionKind.isAllDead:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("isAllDead", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("isAllDead", 1, "Unit", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.UnitSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Unit;
                        argument.HasReference = true;
                    }
                }

                break;
            case FunctionKind.isNowSpot:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("isNowSpot", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("isNowSpot", 1, "Spot", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.SpotSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Spot;
                        argument.HasReference = true;
                    }
                }

                break;
            case FunctionKind.countForce:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("countForce", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("countForce", 1, "Power", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.PowerSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Power;
                        argument.HasReference = true;
                    }
                }

                break;
            case FunctionKind.countMoney:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("countMoney", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("countMoney", 1, "Power", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.PowerSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Power;
                        argument.HasReference = true;
                    }
                }

                break;
            case FunctionKind.countSkill:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("countSkill", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("countSkill", 1, "Skill", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.SkillSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Skill;
                        argument.HasReference = true;
                    }
                }

                break;
            case FunctionKind.getLifePer:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("getLifePer", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("getLifePer", 1, "Unit", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.UnitSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Unit;
                        argument.HasReference = true;
                    }
                }

                break;
            case FunctionKind.isInterval:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("isInterval", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                break;
            case FunctionKind.isScenario:
                if (argument.TrailingTokenCount == 0)
                {
                    argument.ReferenceKind = ReferenceKind.Scenario;
                    argument.ReferenceId = analysisResult.ScenarioSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }
                else
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("isScenario", argument.TokenId, argument.TrailingTokenCount);
                }

                break;
            case FunctionKind.isRoamLeader:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("isRoamLeader", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("isRoamLeader", 1, "Unit", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.UnitSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Unit;
                        argument.HasReference = true;
                    }
                }

                break;
            case FunctionKind.getClearFloor:
                if (argument.TrailingTokenCount == 0)
                {
                    argument.ReferenceKind = ReferenceKind.Dungeon;
                    argument.ReferenceId = analysisResult.DungeonSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }
                else
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("getClearFloor", argument.TokenId, argument.TrailingTokenCount);
                }

                break;
            case FunctionKind.equal:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("equal", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("equal", 1, "StringVariableReader", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.HasReference = true;
                        }
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                    }
                    else
                    {
                        if (context.CreateError(DiagnosticSeverity.Warning))
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("equal", 1, "StringVariableReader", argument.TokenId);
                        }
                        argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span, argument.TokenId);
                        argument.HasReference = true;
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                    }
                }

                argument = ref arguments[1];
                span = result.GetSpan(argument.TokenId);
                if (span.Length > 1 && span[0] == '@')
                {
                    argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                    argument.ReferenceKind = ReferenceKind.StringVariableReader;
                    argument.HasReference = true;
                }

                break;
            case FunctionKind.eqVar:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("eqVar", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("eqVar", 1, "StringVariableReader", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.HasReference = true;
                        }
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                    }
                    else
                    {
                        if (context.CreateError(DiagnosticSeverity.Warning))
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("eqVar", 1, "StringVariableReader", argument.TokenId);
                        }
                        argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span, argument.TokenId);
                        argument.HasReference = true;
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                    }
                }

                argument = ref arguments[1];
                span = result.GetSpan(argument.TokenId);
                if (span.Length > 1 && span[0] == '@')
                {
                    argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                    argument.ReferenceKind = ReferenceKind.StringVariableReader;
                    argument.HasReference = true;
                }

                break;
            case FunctionKind.isWar:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("isWar", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("isWar", 1, "Power", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.PowerSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Power;
                        argument.HasReference = true;
                    }
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount == 0)
                {
                    argument.ReferenceKind = ReferenceKind.Power;
                    argument.ReferenceId = analysisResult.PowerSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }
                else
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("isWar", argument.TokenId, argument.TrailingTokenCount);
                }

                break;
            case FunctionKind.ptest:
                if (argument.TrailingTokenCount == 0)
                {
                    argument.ReferenceKind = ReferenceKind.Spot;
                    argument.ReferenceId = analysisResult.SpotSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }
                else
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("ptest", argument.TokenId, argument.TrailingTokenCount);
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount == 0)
                {
                    argument.ReferenceKind = ReferenceKind.Unit;
                    argument.ReferenceId = analysisResult.UnitSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }
                else
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("ptest", argument.TokenId, argument.TrailingTokenCount);
                }

                break;
            case FunctionKind.reckon:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("reckon", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("reckon", 1, "StringVariableReader", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.HasReference = true;
                        }
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                    }
                    else
                    {
                        if (context.CreateError(DiagnosticSeverity.Warning))
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("reckon", 1, "StringVariableReader", argument.TokenId);
                        }
                        argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span, argument.TokenId);
                        argument.HasReference = true;
                        argument.ReferenceKind = ReferenceKind.StringVariableReader;
                    }
                }

                argument = ref arguments[1];
                span = result.GetSpan(argument.TokenId);
                if (span.Length > 1 && span[0] == '@')
                {
                    argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                    argument.ReferenceKind = ReferenceKind.StringVariableReader;
                    argument.HasReference = true;
                }

                break;
            case FunctionKind.isLeague:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("isLeague", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("isLeague", 1, "Power", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.PowerSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Power;
                        argument.HasReference = true;
                    }
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("isLeague", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("isLeague", 2, "Power", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.PowerSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Power;
                        argument.HasReference = true;
                    }
                }

                break;
            case FunctionKind.isSameArmy:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("isSameArmy", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("isSameArmy", 1, "Unit", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.UnitSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Unit;
                        argument.HasReference = true;
                    }
                }

                break;
            case FunctionKind.isDead:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("isDead", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("isDead", 1, "Unit", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.UnitSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Unit;
                        argument.HasReference = true;
                    }
                }

                for (int i = 1; i < arguments.Length; ++i)
                {
                    argument = ref arguments[i];
                    if (argument.TrailingTokenCount != 0)
                    {
                        result.ErrorAdd_InvalidMultipleTokenArgument("isDead", argument.TokenId, argument.TrailingTokenCount);
                    }
                    else
                    {
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("isDead", i + 1, "Unit", argument.TokenId);
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length != 1)
                            {
                                argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            argument.ReferenceId = analysisResult.UnitSet.GetOrAdd(span, argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.Unit;
                            argument.HasReference = true;
                        }
                    }

                }
                break;
            case FunctionKind.isAnyDead:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("isAnyDead", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("isAnyDead", 1, "Unit", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.UnitSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Unit;
                        argument.HasReference = true;
                    }
                }

                for (int i = 1; i < arguments.Length; ++i)
                {
                    argument = ref arguments[i];
                    if (argument.TrailingTokenCount != 0)
                    {
                        result.ErrorAdd_InvalidMultipleTokenArgument("isAnyDead", argument.TokenId, argument.TrailingTokenCount);
                    }
                    else
                    {
                        span = result.GetSpan(argument.TokenId);
                        if (span.IsEmpty)
                        {
                            result.ErrorAdd_UnexpectedArgumentReferenceKind("isAnyDead", i + 1, "Unit", argument.TokenId);
                        }
                        else if (span[0] == '@')
                        {
                            if (span.Length != 1)
                            {
                                argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                                argument.ReferenceKind = ReferenceKind.StringVariableReader;
                                argument.HasReference = true;
                            }
                        }
                        else
                        {
                            argument.ReferenceId = analysisResult.UnitSet.GetOrAdd(span, argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.Unit;
                            argument.HasReference = true;
                        }
                    }

                }
                break;
            case FunctionKind.isNext:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("isNext", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("isNext", 1, "Spot", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.SpotSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Spot;
                        argument.HasReference = true;
                    }
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("isNext", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("isNext", 2, "Spot", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.SpotSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Spot;
                        argument.HasReference = true;
                    }
                }

                if (arguments.Length <= 2)
                {
                    break;
                }
                argument = ref arguments[2];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("isNext", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                break;
            case FunctionKind.countPost:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("countPost", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber && (argument.HasReference = PerResultValidator.IsRedBlue(result.GetSpan(argument.TokenId), out argument.ReferenceId)))
                {
                    argument.ReferenceKind = ReferenceKind.RedBlue;
                }
                else
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("countPost", 1, "RedBlue", argument.TokenId);
                }

                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("countPost", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("countPost", 2, "Unit", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.UnitSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Unit;
                        argument.HasReference = true;
                    }
                }

                argument = ref arguments[2];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("countPost", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                argument = ref arguments[3];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("countPost", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                argument = ref arguments[4];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("countPost", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                argument = ref arguments[5];
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("countPost", argument.TokenId, argument.TrailingTokenCount);
                }
                else if (!argument.IsNumber)
                {
                    argument.ReferenceKind = ReferenceKind.NumberVariableReader;
                    argument.ReferenceId = analysisResult.NumberVariableReaderSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }

                break;
            case FunctionKind.isComTurn:
                if (argument.TrailingTokenCount != 0)
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("isComTurn", argument.TokenId, argument.TrailingTokenCount);
                }
                else
                {
                    span = result.GetSpan(argument.TokenId);
                    if (span.IsEmpty)
                    {
                        result.ErrorAdd_UnexpectedArgumentReferenceKind("isComTurn", 1, "Power", argument.TokenId);
                    }
                    else if (span[0] == '@')
                    {
                        if (span.Length != 1)
                        {
                            argument.ReferenceId = analysisResult.StringVariableReaderSet.GetOrAdd(span.Slice(1), argument.TokenId);
                            argument.ReferenceKind = ReferenceKind.StringVariableReader;
                            argument.HasReference = true;
                        }
                    }
                    else
                    {
                        argument.ReferenceId = analysisResult.PowerSet.GetOrAdd(span, argument.TokenId);
                        argument.ReferenceKind = ReferenceKind.Power;
                        argument.HasReference = true;
                    }
                }

                break;
            case FunctionKind.isDungeon:
                if (argument.TrailingTokenCount == 0)
                {
                    argument.ReferenceKind = ReferenceKind.Dungeon;
                    argument.ReferenceId = analysisResult.DungeonSet.GetOrAdd(result.GetSpan(argument.TokenId), argument.TokenId);
                    argument.HasReference = true;
                }
                else
                {
                    result.ErrorAdd_InvalidMultipleTokenArgument("isDungeon", argument.TokenId, argument.TrailingTokenCount);
                }

                if (arguments.Length <= 1)
                {
                    break;
                }
                argument = ref arguments[1];
                if (argument.TrailingTokenCount != 0 || !argument.IsNumber)
                {
                    result.ErrorAdd_UnexpectedArgumentReferenceKind("isDungeon", 2, "Number", argument.TokenId);
                }

                break;
        }
    }

    public static bool ArgumentCountValidation(ref Context context, ref Result result, FunctionKind kind, int count, uint index)
    {
        if (count < 0)
        {
            return false;
        }

		switch (kind)
        {
            case FunctionKind.has:
            case FunctionKind.inVar:
            case FunctionKind.inSpot:
            case FunctionKind.inPower:
            case FunctionKind.inRoamSpot:
                if (count < 2)
                {
                    result.ErrorAdd_TooLessArguments(kind, count, 2, index);
                    return false;
                }
                break;
            case FunctionKind.yet:
            case FunctionKind.count:
            case FunctionKind.amount:
            case FunctionKind.conVar:
            case FunctionKind.isDone:
            case FunctionKind.getLife:
            case FunctionKind.countVar:
            case FunctionKind.isActive:
            case FunctionKind.isArbeit:
            case FunctionKind.isEnable:
            case FunctionKind.isInvade:
            case FunctionKind.isLeader:
            case FunctionKind.isMaster:
            case FunctionKind.isPlayer:
            case FunctionKind.isRoamer:
            case FunctionKind.isTalent:
            case FunctionKind.isVassal:
            case FunctionKind.countGain:
            case FunctionKind.countSpot:
            case FunctionKind.countUnit:
            case FunctionKind.isAllDead:
            case FunctionKind.isNowSpot:
            case FunctionKind.countForce:
            case FunctionKind.countMoney:
            case FunctionKind.countSkill:
            case FunctionKind.getLifePer:
            case FunctionKind.isInterval:
            case FunctionKind.isScenario:
            case FunctionKind.isRoamLeader:
            case FunctionKind.getClearFloor:
                if (count < 1)
                {
                    result.ErrorAdd_TooLessArguments(kind, count, 1, index);
                    return false;
                }
                else if (count > 1)
                {
                    result.ErrorAdd_TooManyArguments(kind, count, 1, index);
                    return false;
                }
                break;
            case FunctionKind.rand:
            case FunctionKind.isMap:
            case FunctionKind.isNPM:
            case FunctionKind.getMode:
            case FunctionKind.getTime:
            case FunctionKind.getTurn:
            case FunctionKind.isEvent:
            case FunctionKind.isPeace:
            case FunctionKind.isWorld:
            case FunctionKind.getLimit:
            case FunctionKind.isNewTurn:
            case FunctionKind.istoWorld:
            case FunctionKind.countPower:
            case FunctionKind.isRedAlive:
            case FunctionKind.isWatching:
            case FunctionKind.getRedCount:
            case FunctionKind.isBlueAlive:
            case FunctionKind.isGameClear:
            case FunctionKind.isPlayerEnd:
            case FunctionKind.getBlueCount:
            case FunctionKind.isPlayerTurn:
            case FunctionKind.isWorldMusicStop:
				if (count != 0)
                {
                    result.ErrorAdd_TooManyArguments(kind, count, 0, index);
                    return false;
                }
                break;
            case FunctionKind.equal:
            case FunctionKind.eqVar:
            case FunctionKind.isWar:
            case FunctionKind.ptest:
            case FunctionKind.reckon:
            case FunctionKind.isEnemy:
            case FunctionKind.isFriend:
            case FunctionKind.isLeague:
            case FunctionKind.isSameArmy:
                if (count < 2)
                {
                    result.ErrorAdd_TooLessArguments(kind, count, 2, index);
                    return false;
                }
                else if (count > 2)
                {
                    result.ErrorAdd_TooManyArguments(kind, count, 2, index);
                    return false;
                }
                break;
            case FunctionKind.isNpc:
            case FunctionKind.isDead:
            case FunctionKind.isAlive:
            case FunctionKind.inBattle:
            case FunctionKind.isAnyDead:
                if (count < 1)
                {
                    result.ErrorAdd_TooLessArguments(kind, count, 1, index);
                    return false;
                }
                break;
            case FunctionKind.isJoin:
            case FunctionKind.isNext:
            case FunctionKind.getDistance:
				if (count < 2)
                {
                    result.ErrorAdd_TooLessArguments(kind, count, 2, index);
                    return false;
                }
                else if (count > 3)
                {
                    result.ErrorAdd_TooManyArguments(kind, count, 3, index);
                    return false;
                }
                break;
            case FunctionKind.isPostIn:
				if (count < 3)
                {
                    result.ErrorAdd_TooLessArguments(kind, count, 3, index);
                    return false;
                }
                else if (count > 5)
                {
                    result.ErrorAdd_TooManyArguments(kind, count, 5, index);
                    return false;
                }
                break;
            case FunctionKind.countPost:
                if (count < 6)
                {
                    result.ErrorAdd_TooLessArguments(kind, count, 6, index);
                    return false;
                }
                else if (count > 6)
                {
                    result.ErrorAdd_TooManyArguments(kind, count, 6, index);
                    return false;
                }
                break;
            case FunctionKind.isComTurn:
				if (count > 1)
                {
                    result.ErrorAdd_TooManyArguments(kind, count, 1, index);
                    return false;
                }
                break;
            case FunctionKind.isDungeon:
				if (count > 2)
                {
                    result.ErrorAdd_TooManyArguments(kind, count, 2, index);
                    return false;
                }
                break;
        }
        return true;
	}
}
